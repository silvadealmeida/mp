"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[45110],{518051:(t,n,o)=>{o.d(n,{Z:()=>e});const e=Object.freeze({SHIFT:0,CTRL:1,ALT:2})},745110:(t,n,o)=>{o.d(n,{Z:()=>B});var e=o(98554),i=o(889124),s=o(999104),c=o(302075),r=o(581459),u=o(110189),l=o(686849),p=o(489697),_=o(518051),Z=o(634895);function a(t,n,o){const e=t._element;if(e===document)return o.x=n.clientX,o.y=n.clientY,o;const i=e.getBoundingClientRect();return o.x=n.clientX-i.left,o.y=n.clientY-i.top,o}function f(t,n){let o=t;return(0,c.Z)(n)&&(o+=`+${n}`),o}function d(t){return t.shiftKey?_.Z.SHIFT:t.ctrlKey?_.Z.CTRL:t.altKey?_.Z.ALT:void 0}function h(t,n,o,e){function i(n){e(t,n)}l.Z.isInternetExplorer()?o.addEventListener(n,i,!1):o.addEventListener(n,i,{capture:!1,passive:!1}),t._removalFunctions.push(function(){o.removeEventListener(n,i,!1)})}const P={position:new i.Z};function m(t){t._lastSeenTouchEvent=(0,p.Z)()}function v(t){return(0,p.Z)()-t._lastSeenTouchEvent>V.mouseEmulationIgnoreMilliseconds}function w(t,n,o){const e=t.x-n.x,i=t.y-n.y;return Math.sqrt(e*e+i*i)<o}function I(t,n){if(!v(t))return;const o=n.button;let e;if(t._buttonDown[o]=!0,0===o)e=Z.Z.LEFT_DOWN;else if(1===o)e=Z.Z.MIDDLE_DOWN;else{if(2!==o)return;e=Z.Z.RIGHT_DOWN}const s=a(t,n,t._primaryPosition);i.Z.clone(s,t._primaryStartPosition),i.Z.clone(s,t._primaryPreviousPosition);const r=d(n),u=t.getInputAction(e,r);(0,c.Z)(u)&&(i.Z.clone(s,P.position),u(P),n.preventDefault())}const E={position:new i.Z},T={position:new i.Z};function D(t,n,o,e){const s=d(e),r=t.getInputAction(n,s),u=t.getInputAction(o,s);if((0,c.Z)(r)||(0,c.Z)(u)){const n=a(t,e,t._primaryPosition);(0,c.Z)(r)&&(i.Z.clone(n,E.position),r(E)),(0,c.Z)(u)&&w(t._primaryStartPosition,n,t._clickPixelTolerance)&&(i.Z.clone(n,T.position),u(T))}}function g(t,n){if(!v(t))return;const o=n.button;0!==o&&1!==o&&2!==o||(t._buttonDown[0]&&(D(t,Z.Z.LEFT_UP,Z.Z.LEFT_CLICK,n),t._buttonDown[0]=!1),t._buttonDown[1]&&(D(t,Z.Z.MIDDLE_UP,Z.Z.MIDDLE_CLICK,n),t._buttonDown[1]=!1),t._buttonDown[2]&&(D(t,Z.Z.RIGHT_UP,Z.Z.RIGHT_CLICK,n),t._buttonDown[2]=!1))}const y={startPosition:new i.Z,endPosition:new i.Z};function L(t,n){if(!v(t))return;const o=d(n),e=a(t,n,t._primaryPosition),s=t._primaryPreviousPosition,r=t.getInputAction(Z.Z.MOUSE_MOVE,o);(0,c.Z)(r)&&(i.Z.clone(s,y.startPosition),i.Z.clone(e,y.endPosition),r(y)),i.Z.clone(e,s),(t._buttonDown[0]||t._buttonDown[1]||t._buttonDown[2])&&n.preventDefault()}const H={position:new i.Z};function C(t,n){let o;if(0!==n.button)return;o=Z.Z.LEFT_DOUBLE_CLICK;const e=d(n),i=t.getInputAction(o,e);(0,c.Z)(i)&&(a(t,n,H.position),i(H))}function M(t,n){let o;if((0,c.Z)(n.deltaY)){const t=n.deltaMode;o=t===n.DOM_DELTA_PIXEL?-n.deltaY:t===n.DOM_DELTA_LINE?40*-n.deltaY:120*-n.deltaY}else o=n.detail>0?-120*n.detail:n.wheelDelta;if(!(0,c.Z)(o))return;const e=d(n),i=t.getInputAction(Z.Z.WHEEL,e);(0,c.Z)(i)&&(i(o),n.preventDefault())}function A(t,n){m(t);const o=n.changedTouches;let e;const s=o.length;let c,r;const u=t._positions;for(e=0;e<s;++e)c=o[e],r=c.identifier,u.set(r,a(t,c,new i.Z));R(t,n);const l=t._previousPositions;for(e=0;e<s;++e)c=o[e],r=c.identifier,l.set(r,i.Z.clone(u.get(r)))}function b(t,n){m(t);const o=n.changedTouches;let e;const i=o.length;let s,c;const r=t._positions;for(e=0;e<i;++e)s=o[e],c=s.identifier,r.remove(c);R(t,n);const u=t._previousPositions;for(e=0;e<i;++e)s=o[e],c=s.identifier,u.remove(c)}const O={position:new i.Z},F={position1:new i.Z,position2:new i.Z},S={position:new i.Z},N={position:new i.Z},x={position:new i.Z};function R(t,n){const o=d(n),e=t._positions,s=e.length;let r,u;const l=t._isPinching;if(1!==s&&t._buttonDown[0]&&(t._buttonDown[0]=!1,(0,c.Z)(t._touchHoldTimer)&&(clearTimeout(t._touchHoldTimer),t._touchHoldTimer=void 0),r=t.getInputAction(Z.Z.LEFT_UP,o),(0,c.Z)(r)&&(i.Z.clone(t._primaryPosition,S.position),r(S)),0===s&&!t._isTouchHolding&&(u=t.getInputAction(Z.Z.LEFT_CLICK,o),(0,c.Z)(u))&&w(t._primaryStartPosition,t._previousPositions.values[0],t._clickPixelTolerance)&&(i.Z.clone(t._primaryPosition,N.position),u(N)),t._isTouchHolding=!1),0===s&&l&&(t._isPinching=!1,r=t.getInputAction(Z.Z.PINCH_END,o),(0,c.Z)(r)&&r()),1===s&&!l){const s=e.values[0];i.Z.clone(s,t._primaryPosition),i.Z.clone(s,t._primaryStartPosition),i.Z.clone(s,t._primaryPreviousPosition),t._buttonDown[0]=!0,r=t.getInputAction(Z.Z.LEFT_DOWN,o),(0,c.Z)(r)&&(i.Z.clone(s,O.position),r(O)),t._touchHoldTimer=setTimeout(function(){!t.isDestroyed()&&(t._touchHoldTimer=void 0,t._isTouchHolding=!0,u=t.getInputAction(Z.Z.RIGHT_CLICK,o),(0,c.Z)(u))&&w(t._primaryStartPosition,t._previousPositions.values[0],t._holdPixelTolerance)&&(i.Z.clone(t._primaryPosition,x.position),u(x))},V.touchHoldDelayMilliseconds),n.preventDefault()}2!==s||l||(t._isPinching=!0,r=t.getInputAction(Z.Z.PINCH_START,o),(0,c.Z)(r)&&(i.Z.clone(e.values[0],F.position1),i.Z.clone(e.values[1],F.position2),r(F),n.preventDefault()))}function K(t,n){m(t);const o=n.changedTouches;let e;const s=o.length;let r,u;const l=t._positions;for(e=0;e<s;++e){r=o[e],u=r.identifier;const n=l.get(u);(0,c.Z)(n)&&a(t,r,n)}k(t,n);const p=t._previousPositions;for(e=0;e<s;++e)r=o[e],u=r.identifier,i.Z.clone(l.get(u),p.get(u))}const U={startPosition:new i.Z,endPosition:new i.Z},W={distance:{startPosition:new i.Z,endPosition:new i.Z},angleAndHeight:{startPosition:new i.Z,endPosition:new i.Z}};function k(t,n){const o=d(n),e=t._positions,s=t._previousPositions,r=e.length;let u;if(1===r&&t._buttonDown[0]){const s=e.values[0];i.Z.clone(s,t._primaryPosition);const r=t._primaryPreviousPosition;u=t.getInputAction(Z.Z.MOUSE_MOVE,o),(0,c.Z)(u)&&(i.Z.clone(r,U.startPosition),i.Z.clone(s,U.endPosition),u(U)),i.Z.clone(s,r),n.preventDefault()}else if(2===r&&t._isPinching&&(u=t.getInputAction(Z.Z.PINCH_MOVE,o),(0,c.Z)(u))){const t=e.values[0],n=e.values[1],o=s.values[0],c=s.values[1],r=n.x-t.x,l=n.y-t.y,p=.25*Math.sqrt(r*r+l*l),_=c.x-o.x,Z=c.y-o.y,a=.25*Math.sqrt(_*_+Z*Z),f=.125*(n.y+t.y),d=.125*(c.y+o.y),h=Math.atan2(l,r),P=Math.atan2(Z,_);i.Z.fromElements(0,a,W.distance.startPosition),i.Z.fromElements(0,p,W.distance.endPosition),i.Z.fromElements(P,d,W.angleAndHeight.startPosition),i.Z.fromElements(h,f,W.angleAndHeight.endPosition),u(W)}}function G(t,n){if(n.target.setPointerCapture(n.pointerId),"touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.set(e,a(t,n,new i.Z)),R(t,n),t._previousPositions.set(e,i.Z.clone(o.get(e)))}else I(t,n)}function q(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId;o.remove(e),R(t,n),t._previousPositions.remove(e)}else g(t,n)}function Y(t,n){if("touch"===n.pointerType){const o=t._positions,e=n.pointerId,s=o.get(e);if(!(0,c.Z)(s))return;a(t,n,s),k(t,n);const r=t._previousPositions;i.Z.clone(o.get(e),r.get(e))}else L(t,n)}function V(t){this._inputEvents={},this._buttonDown={LEFT:!1,MIDDLE:!1,RIGHT:!1},this._isPinching=!1,this._isTouchHolding=!1,this._lastSeenTouchEvent=-V.mouseEmulationIgnoreMilliseconds,this._primaryStartPosition=new i.Z,this._primaryPosition=new i.Z,this._primaryPreviousPosition=new i.Z,this._positions=new e.Z,this._previousPositions=new e.Z,this._removalFunctions=[],this._touchHoldTimer=void 0,this._clickPixelTolerance=5,this._holdPixelTolerance=25,this._element=(0,s.Z)(t,document),function(t){const n=t._element,o=(0,c.Z)(n.disableRootEvents)?n:document;let e;l.Z.supportsPointerEvents()?(h(t,"pointerdown",n,G),h(t,"pointerup",n,q),h(t,"pointermove",n,Y),h(t,"pointercancel",n,q)):(h(t,"mousedown",n,I),h(t,"mouseup",o,g),h(t,"mousemove",o,L),h(t,"touchstart",n,A),h(t,"touchend",o,b),h(t,"touchmove",o,K),h(t,"touchcancel",o,b)),h(t,"dblclick",n,C),e="onwheel"in n?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h(t,e,n,M)}(this)}V.prototype.setInputAction=function(t,n,o){if(!(0,c.Z)(t))throw new u.Z("action is required.");if(!(0,c.Z)(n))throw new u.Z("type is required.");const e=f(n,o);this._inputEvents[e]=t},V.prototype.getInputAction=function(t,n){if(!(0,c.Z)(t))throw new u.Z("type is required.");const o=f(t,n);return this._inputEvents[o]},V.prototype.removeInputAction=function(t,n){if(!(0,c.Z)(t))throw new u.Z("type is required.");const o=f(t,n);delete this._inputEvents[o]},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return function(t){const n=t._removalFunctions;for(let t=0;t<n.length;++t)n[t]()}(this),(0,r.Z)(this)},V.mouseEmulationIgnoreMilliseconds=800,V.touchHoldDelayMilliseconds=1500;const B=V},634895:(t,n,o)=>{o.d(n,{Z:()=>e});const e=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19})},489697:(t,n,o)=>{let e;o.d(n,{Z:()=>i}),e="undefined"!=typeof performance&&"function"==typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()};const i=e}}]);