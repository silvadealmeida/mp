(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[96336,47310],{41156:(e,t,r)=>{"use strict";r.d(t,{fy:()=>n,gd:()=>o,zZ:()=>i,ZR:()=>a});var n="BOX_END",o="CHANGE_BOX_SELECTION_STATUS";function i(e){return{type:n,boxEndInfo:e}}function a(e){return{type:o,status:e}}},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>u,uB:()=>f,Rh:()=>s,G_:()=>p,vU:()=>d,Vw:()=>y,KD:()=>g,uj:()=>v,lo:()=>b,Yf:()=>m,fo:()=>O,PY:()=>E,bp:()=>S,oJ:()=>T,k4:()=>w,sc:()=>h,Li:()=>P});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",l="DRAW:DRAWING_FEATURES",f="DRAW:SET_SNAPPING_LAYER",s="DRAW:SNAPPING_IS_LOADING",p="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function y(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function g(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:l,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:u}}function m(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function O(e,t){return{type:o,geometry:e,owner:t}}function E(e){return{type:i,currentStyle:e}}var S=function(e){return m("clean","",e,[],{})};function T(){return{type:p}}function w(e){return{type:f,snappingLayer:e}}function h(){return{type:s}}function P(e,t,r){return{type:d,value:e,prop:t,pluginCfg:r}}},129386:(e,t,r)=>{"use strict";r.d(t,{F2:()=>n,fu:()=>o,NF:()=>i,WP:()=>a,_E:()=>u});var n="HIGHLIGHT_STATUS",o="UPDATE_HIGHLIGHTED",i="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:i,featuresPath:e}}function u(e,t){return{type:o,features:e,status:t}}},921914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>u,Pn:()=>c,DZ:()=>l,e8:()=>f,E0:()=>s,F9:()=>p,X_:()=>d,pb:()=>y,Re:()=>g,ih:()=>v,xy:()=>b,jL:()=>m,oz:()=>O,ph:()=>E,lF:()=>S,gG:()=>T,cb:()=>w,GI:()=>h,B1:()=>P,fv:()=>_,gc:()=>F,zX:()=>I,ZF:()=>A,Zb:()=>M,DW:()=>R,Xp:()=>D,Fm:()=>G,sV:()=>N,LU:()=>j,XP:()=>L,WU:()=>C,mK:()=>k,g:()=>U,ws:()=>x,HP:()=>Y,aN:()=>H,Pg:()=>z,u0:()=>W,TM:()=>B,PM:()=>Z,lK:()=>Q,sv:()=>q,MO:()=>X,oO:()=>$,Mc:()=>K,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",u="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",f="CHANGE_MAPINFO_FORMAT",s="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",g="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",m="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",O="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",S="UPDATE_CENTER_TO_MARKER",T="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",h="IDENTIFY:CHANGE_FORMAT",P="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",_="IDENTIFY:EDIT_LAYER_FEATURES",F="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",I="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",M="IDENTIFY:SET_SHOW_IN_MAP_POPUP",R="IDENTIFY:IDENTIFY_IS_MOUNTED",D="IDENTIFY:INIT_PLUGIN";function G(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function N(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function j(){return{type:g}}function L(){return{type:v}}function C(e,t){return{type:c,reqId:e,request:t}}function k(e){return{type:u,enabled:e}}function U(){return{type:l}}function x(e){return{type:f,infoFormat:e}}function Y(){return{type:s}}function H(){return{type:p}}function V(e){return{type:d,reverseGeocodeData:e.data}}function z(e){return function(t){n.Z.reverseGeocode(e).then(function(e){t(V(e))}).catch(function(e){t(V(e))})}}function W(){return{type:y}}function B(){return{type:E}}function Z(e){return{type:S,status:e}}function Q(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function q(e){return{type:m,point:e}}function X(e){return{type:O,enabled:e}}function $(e){return{type:T,index:e}}var K=function(){return{type:w}},J=function(e){return{type:h,format:e}},ee=function(e){return{type:P,showCoordinateEditor:e}},te=function(e){return{type:_,layer:e}},re=function(e){return{type:F,query:e}},ne=function(e){return{type:I,trigger:e}},oe=function(e){return{type:M,value:e}},ie=function(e){return{type:R,isMounted:e}},ae=function(e){return{type:D,cfg:e}}},807878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>u,l1:()=>c,J9:()=>l,U:()=>f,z8:()=>s,ql:()=>p,O_:()=>d,M$:()=>y,Ug:()=>g,p5:()=>v,Fz:()=>b,WZ:()=>m,bP:()=>O,On:()=>E,d_:()=>S,xM:()=>T,bl:()=>w,Wi:()=>h,PN:()=>P,_M:()=>_,Wm:()=>F,Eg:()=>I,V1:()=>A,cY:()=>M,RD:()=>R,Hl:()=>D,co:()=>G,uY:()=>N,H8:()=>j,je:()=>L,go:()=>C,_8:()=>k,xd:()=>U,o7:()=>x,Nr:()=>Y,Gf:()=>H,nh:()=>V,Rf:()=>z,Xp:()=>W,D6:()=>B,Sm:()=>Z,Ef:()=>Q,qu:()=>q,LY:()=>X,ZC:()=>$,c1:()=>K,jW:()=>J,kQ:()=>ee,JG:()=>te,js:()=>re,q$:()=>ne,OZ:()=>oe,Nc:()=>ie,NV:()=>ae,I5:()=>ue,QL:()=>ce,I:()=>le,ku:()=>fe,EU:()=>se,IV:()=>pe,HT:()=>de,lg:()=>ye,ds:()=>ge,VF:()=>ve,DD:()=>be,uo:()=>me,Ry:()=>Oe,ZH:()=>Ee,AQ:()=>Se,yC:()=>Te,F:()=>we,mc:()=>he,uM:()=>_e,eJ:()=>Fe,uP:()=>Ie,N5:()=>Ae,bn:()=>Me,Bm:()=>Re,F2:()=>De,jR:()=>Ge,$J:()=>Ne,ln:()=>je});var n=r(375875),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a="ADD_FILTER_FIELD",u="REMOVE_FILTER_FIELD",c="UPDATE_FILTER_FIELD",l="UPDATE_EXCEPTION_FIELD",f="ADD_GROUP_FIELD",s="UPDATE_LOGIC_COMBO",p="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",g="EXPAND_SPATIAL_PANEL",v="QUERYFORM:EXPAND_CROSS_LAYER",b="QUERYFORM:SET_CROSS_LAYER_PARAMETER",m="QUERYFORM:RESET_CROSS_LAYER_FILTER",O="SELECT_SPATIAL_METHOD",E="SELECT_VIEWPORT_SPATIAL_METHOD",S="UPDATE_GEOMETRY",T="SELECT_SPATIAL_OPERATION",w="CHANGE_SPATIAL_ATTRIBUTE",h="CHANGE_SPATIAL_FILTER_VALUE",P="REMOVE_SPATIAL_SELECT",_="SHOW_SPATIAL_DETAILS",F="QUERY_FORM_SEARCH",I="QUERY_FORM_RESET",A="SHOW_GENERATED_FILTER",M="CHANGE_DWITHIN_VALUE",R="ZONE_SEARCH",D="ZONE_SEARCH_ERROR",G="ZONE_FILTER",N="ZONE_CHANGE",j="ZONES_RESET",L="SIMPLE_FILTER_FIELD_UPDATE",C="ADD_SIMPLE_FILTER_FIELD",k="REMOVE_SIMPLE_FILTER_FIELD",U="REMOVE_ALL_SIMPLE_FILTER_FIELDS",x="UPDATE_FILTER_FIELD_OPTIONS",Y="LOADING_FILTER_FIELD_OPTIONS",H="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",V="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",z="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",B="SET_AUTOCOMPLETE_MODE",Z="TOGGLE_AUTOCOMPLETE_MENU",Q="QUERYFORM:LOAD_FILTER",q="QUERYFORM:UPSERT_FILTERS",X="QUERYFORM:REMOVE_FILTERS",$="QUERYFORM:CHANGE_MAP_EDITOR",K=function(e){return{type:$,mapData:e}};function J(e){return{type:a,groupId:e}}function ee(e,t){return{type:f,groupId:e,index:t}}function te(e){return{type:u,rowId:e}}function re(e,t){return{type:Z,rowId:e,status:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function ne(e,t,r,n){return{type:c,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function oe(e,t){return{type:l,rowId:e,exceptionMessage:t}}function ie(e,t){return{type:s,groupId:e,logic:t}}function ae(e){return{type:B,status:e}}function ue(e){return{type:p,groupId:e}}function ce(e){return{type:d,attributes:e}}function le(e){return{type:y,expand:e}}function fe(e){return{type:g,expand:e}}function se(e){return{type:v,expand:e}}function pe(e,t){return{type:b,key:e,value:t}}function de(e,t){return{type:O,fieldName:t,method:e}}function ye(){return{type:E}}function ge(e){return{type:S,geometry:e}}function ve(e,t){return{type:T,fieldName:t,operation:e}}function be(e){return{type:w,attribute:e}}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:h,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function Oe(){return{type:P}}function Ee(e){return{type:_,show:e}}function Se(e){return{type:M,distance:e}}function Te(e,t){return{type:F,searchUrl:e,filterObj:t}}function we(e){return{type:Q,filter:e}}function he(e){return{type:I,skip:e}}function Pe(e,t){return{type:D,error:e,id:t}}function _e(e,t){return{type:R,active:e,id:t}}function Fe(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then(function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Pe("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:G,data:e,id:t}}(a,r)),n(_e(!1,r))}).catch(function(e){n(Pe(e,r))})}}function Ie(e,t){return{type:N,id:e,value:t}}function Ae(e){return{type:H,rowId:(new Date).getTime(),groupId:e}}function Me(e,t,r,n){return{type:V,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}}}function Re(e){return{type:z,rowId:e}}function De(){return{type:m}}function Ge(e,t){return{type:Y,status:e,filterField:t,layerFilterType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField"}}function Ne(e,t,r){return{type:x,filterField:e,options:t,valuesCount:r}}function je(e,t,r){return{type:W,filterField:e,options:t,valuesCount:r}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),u=r(727418),c=r.n(u),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const f={geocode:function(e,t){var r=c()({q:e},l,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=c()({lat:e.lat,lon:e.lng},t||{},l),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},218291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(124852),o=r.n(n);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(null,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,r=void 0===t?null:t;return function(t){return(0,n.forwardRef)(function(a,u){return void 0===e||e(a)?o().createElement(n.Suspense,{fallback:r},o().createElement(t,i({ref:u},a))):null})}}},238880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>or});var n={};r.r(n),r.d(n,{activateBoxSelectionTool:()=>Re,activateGeometryFilter:()=>Ce,activateSyncWmsFilterOnFeatureGridOpen:()=>yt,activateTemporaryChangesEpic:()=>Ne,askChangesConfirmOnFeatureGridClose:()=>rt,autoCloseFeatureGridEpicOnDrowerOpen:()=>tt,autoReopenFeatureGridOnFeatureInfoClose:()=>at,closeFeatureGridOnDrawingToolOpen:()=>Ze,closeIdentifyWhenOpenFeatureGrid:()=>ft,closeRightPanelOnFeatureGridOpen:()=>Be,deactivateBoxSelectionTool:()=>De,deactivateGeometryFilter:()=>Le,deactivateSyncWmsFilterOnFeatureGridClose:()=>dt,deactivateViewportFilterEpic:()=>ht,deleteGeometryFeature:()=>qe,deleteSelectedFeatureGridFeatures:()=>He,disableMultiSelect:()=>Ie,enableGeometryFilterOnEditMode:()=>Fe,featureGridBrowseData:()=>Ee,featureGridChangePage:()=>ke,featureGridLayerSelectionInitialization:()=>Se,featureGridReloadPageOnSaveSuccess:()=>Ue,featureGridSort:()=>we,featureGridStartupQuery:()=>Te,featureGridUpdateGeometryFilter:()=>he,featureGridUpdateTextFilters:()=>_e,handleBoxSelectionDrawEnd:()=>Me,handleClickOnMap:()=>Ae,handleDrawFeature:()=>ze,handleEditFeature:()=>Ve,handleGeometryFilterActivation:()=>je,hideDrawerOnFeatureGridOpenMobile:()=>Ot,hideFeatureGridOnDrawerOpenMobile:()=>mt,launchUpdateFilterEpic:()=>Pe,onClearChangeConfirmedFeatureGrid:()=>nt,onCloseFeatureGridConfirmed:()=>ot,onFeatureGridCreateNewFeature:()=>$e,onFeatureGridGeometryEditing:()=>Qe,onFeatureGridZoomAll:()=>ct,onOpenAdvancedSearch:()=>ut,removeWmsFilterOnGridClose:()=>it,replayOnTimeDimensionChange:()=>bt,resetControlsOnEnterInEditMode:()=>lt,resetEditingOnFeatureGridClose:()=>We,resetGridOnLocationChange:()=>Je,resetQueryPanel:()=>et,resetSnappingLayerOnFeatureGridClosed:()=>St,resetViewportFilter:()=>Pt,savePendingFeatureGridChanges:()=>Ye,selectFeaturesOnMapClickResult:()=>Ge,setDefaultSnappingLayerOnFeatureGridOpen:()=>Et,setHighlightFeaturesPath:()=>Ke,setViewportFilterEpic:()=>wt,startSyncWmsFilter:()=>st,stopSyncWmsFilter:()=>pt,syncMapWmsFilter:()=>gt,toggleSnappingOffOnFeatureGridViewMode:()=>Tt,triggerDrawSupportOnSelectionChange:()=>Xe,updateSelectedOnSaveOrCloseFeatureGrid:()=>xe,virtualScrollLoadFeatures:()=>vt});var o=r(124852),i=r.n(o),a=r(171703),u=r(22222),c=r(618446),l=r.n(c),f=r(322843),s=r(49977),p=r.n(s),d=r(227361),y=r.n(d),g=r(91175),v=r.n(g),b=r(441609),m=r.n(b),O=r(313311),E=r.n(O),S=r(984596),T=r.n(S),w=r(264721),h=r.n(w),P=r(354061),_=r.n(P),F=r(275982),I=r(375875),A=r.n(I),M=r(813292),R=r.n(M),D=r(196958),G=r(727418),N=r.n(G),j=r(604206),L=r(750937),C=r.n(L),k=r(378889),U=r(921914),x=r(95797),Y=r(807878),H=r(801550),V=r(41156),z=r(800827),W=r(580416),B=r(433528),Z=r(782904),Q=r(607147),q=r(129386),X=r(731255),$=r(197395),K=r(824260),J=r(510284),ee=r(469842),te=r(120096),re=r(428913),ne=r(307887),oe=r(552259),ie=r(55105),ae=r(998869),ue=r(93152),ce=r(898631);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function fe(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(t){ye(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ye(e,t,r){return(t=function(e){var t=function(e){if("object"!=le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,X.Vf)(e),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},ve=function(e,t){return de(de({},e),{},{pagination:t})},be=function(e,t){return p().Observable.defer(function(){return A().post(e,t,{headers:{"Content-Type":"application/xml"}})}).let(J.oB)},me=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featuregrid;return(0,W.He)(e.selectedLayer,{filterObj:void 0})},Oe=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,i=r.append,a=(0,X.Li)(e.getState()).id,u=de({},y()(e.getState(),'featuregrid.advancedFilters["'.concat(a,'"]')));if(u){var c=(0,X.M0)(e.getState())||{},l=_()(c,function(e,t,r){return(0,D.dJ)(de({attribute:r},t),e)},{}),f="AND";l.spatialField&&(u.spatialField=void 0,f=l.spatialFieldOperator);var s=(0,re.composeAttributeFilters)([u,l],"AND",f),p=de(de({},u),s);return(0,x.rh)({updates:p,reason:null==o?void 0:o.type})}var d=o;return i&&null!=o&&o.attribute&&(d=(0,X.M0)(e.getState())[null==o?void 0:o.attribute]),(0,x.rh)({updates:(0,D.dJ)(d,(0,K.X1)(e.getState())),reason:null===(t=d)||void 0===t?void 0:t.type})}},Ee=function(e,t){return e.ofType(W.R8).switchMap(function(r){var n,o=r.layer,i=y()(t.getState(),"query.typeName");return(n=p().Observable).of.apply(n,fe(i!==o.name?[(0,Y.mc)()]:[]).concat([(0,Z.Xg)("drawer","enabled",!1),(0,B.uF)(o.id),(0,B.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,a=r.fields,u=y()(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]'));return p().Observable.of((0,x.gT)(n,o,a)).merge(e.ofType(x.u7).filter(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o}).map(function(e){return(0,x.rP)(n,u||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"},e.owner)}))}(e,t,o))})},Se=function(e){return e.ofType(x.DR).switchMap(function(e){return p().Observable.of((0,B.uF)(e.id))})},Te=function(e,t){return e.ofType(x.Yx).switchMap(function(e){var r=e.owner;return p().Observable.of((0,B.oO)(0)).concat((0,X.eK)(t.getState())===B.EH.VIEW&&"widgets"!==r?p().Observable.of((0,B.nY)()):p().Observable.empty())})},we=function(e,t){return e.ofType(B.dY).switchMap(function(r){var n=r.sortBy,o=r.sortOrder;return p().Observable.of((0,x.IO)((0,K.Bu)(t.getState()),ve(de(de({},(0,K.X1)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),ge(t.getState())),(0,X.TC)(t.getState()))).merge(e.ofType(x.Hu).map(function(e){return(0,B.UB)(y()(e,"result.features",[]),[y()(e,"filterObj.pagination.startIndex")])}).takeUntil(e.ofType(x.VT)).take(1))})},he=function(e,t){return e.ofType(B.$O).switchMap(function(){var r,n=null===(r=(0,X.Vf)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value}).switchMap(function(){var r=!1;return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated}).switchMap(function(e,n){return 0===n?(r=!0,p().Observable.from([(0,B.Jr)(1e5),(0,B.KD)([]),Oe(t)(e)])):p().Observable.of(Oe(t)(e))}).takeUntil(p().Observable.merge(e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(B.sF,F.nk))).merge(e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}).take(1).switchMap(function(e){return r?p().Observable.of((0,B.Jr)(n),Oe(t)(e)):p().Observable.of(Oe(t)(e))}).takeUntil(e.ofType(B.sF,F.nk))).merge(e.ofType(B.sF,F.nk).take(1).switchMap(function(){var e,o=(0,B.a8)({attribute:null===(e=(0,k.findGeometryProperty)((0,K.Qs)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?p().Observable.of((0,B.Jr)(n),o,(0,B.pP)(o)):p().Observable.of(o,(0,B.pP)(o))}))})})},Pe=function(e,t){return e.ofType(B.iB).switchMap(function(e){return p().Observable.of(Oe(t)(e.updateFilterAction))})},_e=function(e,t){return e.ofType(x.Yx).switchMap(function(){return e.ofType(B._u).filter(function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type}).map(Oe(t))})},Fe=function(e,t){return e.ofType(B.aO).filter(function(){return(0,X.eK)(t.getState())===B.EH.EDIT}).switchMap(function(){return(E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{}).value?p().Observable.empty():p().Observable.of((0,B.a8)({attribute:(0,k.findGeometryProperty)((0,K.Qs)(t.getState())).name,enabled:!0,type:"geometry"}))})},Ie=function(e){return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}).switchMap(function(){return p().Observable.of((0,B.dq)({multiselect:!1}))})},Ae=function(e,t){return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return e.ofType(H.TR).switchMap(function(e){var r,n=e.point,o=n.latlng,i=n.pixel,a=n.modifiers,u=a.ctrl,c=a.metaKey,l=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{},f=(0,z.uy)(t.getState()),s=ne.default.reproject([o.lng,o.lat],"EPSG:4326",f),d=oe.ZP.getHook(oe.ZP.GET_COORDINATES_FROM_PIXEL_HOOK),g=ne.default.calculateCircleRadiusFromPixel(d,i,s,4);return l.deactivated?p().Observable.empty():p().Observable.of((0,B.dq)({multiselect:null!==(r=u||c)&&void 0!==r&&r}),(0,B.a8)(de(de({},l),{},{value:{attribute:l.attribute||y()((0,ee.vE)(t.getState()),"attribute"),geometry:{center:[s.x,s.y],coordinates:ne.default.calculateCircleCoordinates(s,g,12),extent:[s.x-g,s.y-g,s.x+g,s.y+g],projection:f,radius:g,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),u||c))}).takeUntil(p().Observable.merge(e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(F.nk)))})},Me=function(e,t){return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return e.ofType(V.fy).switchMap(function(e){var r,n=e.boxEndInfo,o=n.boxExtent,i=n.modifiers,a=i.ctrl,u=i.metaKey,c=ne.default.getPolygonFromExtent(o),l=(0,z.uy)(t.getState()),f=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{};return f.deactivated?p().Observable.empty():p().Observable.of((0,B.dq)({multiselect:null!==(r=a||u)&&void 0!==r&&r}),(0,B.a8)(de(de({},f),{},{value:{geometry:de(de({},c.geometry),{},{projection:l}),attribute:f.attribute||y()((0,ee.vE)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),a||u))}).takeUntil(p().Observable.merge(e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})))})},Re=function(e){return e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled}).switchMap(function(){return p().Observable.of((0,V.ZR)("start"))})},De=function(e){return p().Observable.merge(e.ofType(B._u).filter(function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}),e.ofType(B.sF)).switchMap(function(){return p().Observable.of((0,V.ZR)("end"))})},Ge=function(e,t){return e.ofType(x.Hu).filter(function(e){return"geometry"===e.reason}).switchMap(function(e){var r=e.result,n=y()(r,"features"),o=(0,X.gz)(t.getState()),i=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type});return p().Observable.of((0,B.KD)(n.length>0&&i&&i.value?fe(n):[],o))})},Ne=function(e){return e.ofType(B.VV).flatMap(function(e){var t=e.activated;return p().Observable.of((0,B.YG)(t),(0,B.VH)(t))})},je=function(e,t){return e.ofType(B._9).flatMap(function(){var e=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{},r=(0,X.LB)(t.getState()),n=(0,X.b4)(t.getState());return p().Observable.of((0,B.a8)(de(de({},e),{},{type:"geometry",attribute:e.attribute||y()((0,ee.vE)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))})},Le=function(e,t){return p().Observable.merge(e.ofType(B.IN,j.DI,B.JB,B.K8),e.ofType(B.B8).filter(function(e){return!!e.deactivated})).flatMap(function(){var e=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{};return e.deactivated?p().Observable.empty():p().Observable.of((0,B.a8)(de(de({},e),{},{type:"geometry",attribute:e.attribute||y()((0,ee.vE)(t.getState()),"attribute"),deactivated:!0})))})},Ce=function(e,t){return p().Observable.merge(e.ofType(B.AY,B.yi),e.ofType(B.B8).filter(function(e){return!e.deactivated})).flatMap(function(){var e=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type})||{},r=(0,X.LB)(t.getState()),n=(0,X.b4)(t.getState());return!e.deactivated||r||n?p().Observable.empty():p().Observable.of((0,B.a8)(de(de({},e),{},{type:"geometry",attribute:e.attribute||y()((0,ee.vE)(t.getState()),"attribute"),deactivated:!1})))})},ke=function(e,t){return e.ofType(B.gG).merge(e.ofType(x.VN).debounceTime(500).map(function(e){return de(de({},e),{},{page:0})})).switchMap(function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,i=e.getState();return p().Observable.of((0,x.IO)((0,K.Bu)(i),ve(de(de({},(0,K.X1)(i)),(0,X.zc)(i)),ge(i,{page:r,size:n})),(0,X.TC)(i),o))}}(t)(r).merge(e.ofType(x.Hu).map(function(e){var r=y()(e,"result.features",[]),n=(0,X.gz)(t.getState()),o=E()((0,X.M0)(t.getState()),function(e){return"geometry"===e.type});return n&&null!=o&&o.enabled&&(r=(0,X._w)(t.getState())),(0,B.UB)(r,[y()(e,"filterObj.pagination.startIndex")])}).take(1).takeUntil(e.ofType(x.VT)))})},Ue=function(e,t){return e.ofType(B.AY).switchMap(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return p().Observable.of((0,x.IO)((0,K.Bu)(t.getState()),ve(de({},(0,K.X1)(t.getState())),ge(t.getState(),{page:n,size:o})),(0,X.TC)(t.getState())),(0,W.ct)((0,X.u$)(t.getState()))).merge(e.ofType(x.Hu).map(function(e){return p().Observable.of((0,B.$E)(),(0,B.UB)(y()(e,"result.features",[]),[y()(e,"filterObj.pagination.startIndex")]))}).mergeAll().takeUntil(e.ofType(x.VT)).take(2))})},xe=function(e){return e.ofType(B.AY,B.sF).switchMap(function(){return p().Observable.of((0,B.KD)([]))})},Ye=function(e,t){return e.ofType(B.zh).switchMap(function(){return p().Observable.of((0,B.fO)()).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return be(arguments.length>3?arguments[3]:void 0,(0,D.Li)(e,t,C()(r)))}((0,X.ND)(t.getState()),(0,X.kG)(t.getState()),(0,K.Qs)(t.getState()),(0,K.Bu)(t.getState())).map(function(){return(0,B.gc)()}).catch(function(e){return p().Observable.of((0,B.cE)(),(0,$.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))}))})},He=function(e,t){return e.ofType(B.Hk).switchMap(function(){return p().Observable.of((0,B.fO)()).concat((e=(0,X._w)(t.getState()),r=(0,K.Qs)(t.getState()),n=(0,K.Bu)(t.getState()),be(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,C()(r)))).map(function(){return(0,B.gc)()}).catch(function(e){return p().Observable.of((0,B.cE)(),(0,$.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))}).concat(p().Observable.of((0,B.Pv)("deleteConfirm"),(0,B.MO)())));var e,r,n})},Ve=function(e,t){return e.ofType(B.Ub).switchMap(function(){var e=t.getState(),r=(0,K.Qs)(e),n=(0,D.cZ)(),o=(0,k.findGeometryProperty)(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=N()({},(0,X.P3)(e),{type:"Feature"}),u=(0,X.ND)(e);return u[a.id]&&u[a.id]&&u[a.id].geometry&&(a.geometry=u[a.id].geometry),p().Observable.of((0,j.Yf)("drawOrEdit",o,"featureGrid",[a],i))})},ze=function(e,t){return e.ofType(B._9).switchMap(function(){var e=t.getState(),r=(0,K.Qs)(e),n=(0,D.cZ)(),o=(0,k.findGeometryProperty)(r).localType,i=N()({},(0,X.P3)(e),{type:"Feature"}),a=(0,X.ND)(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=v()((0,X.kG)(e)).geometry);var u={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,X.Ae)(e),drawEnabled:(0,X.Ae)(e)};return p().Observable.of((0,j.Yf)("drawOrEdit",o,"featureGrid",[i],u))})},We=function(e,t){return e.ofType(B.$O).switchMap(function(){return e.ofType(B.aO).filter(function(){return(0,X.eK)(t.getState())===B.EH.EDIT}).take(1).switchMap(function(){return e.ofType(F.nk,B.sF).take(1).switchMap(function(){return p().Observable.of((0,j.bp)())})})})},Be=function(e,t){return e.ofType(B.$O).switchMap(function(){var e=[],r=t.getState();return(0,ie.Ju)(r).right.forEach(function(t){(0,Q.Yq)(t)(r)&&e.push((0,Z.Xg)(t,"enabled",!1))}),p().Observable.from(e)})},Ze=function(e,t){return(0,ae.U)(e,t,"featureGrid",function(){return p().Observable.from([(0,B.YV)()])},function(e){return(0,X.Rd)(e)})},Qe=function(e,t){return e.ofType(j.DI).filter(function(e){return"featureGrid"===e.owner}).delay(500).switchMap(function(e){var r=t.getState(),n={featureProjection:(0,D.cZ)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map(function(e,t){return N()({},e,{id:(0,X._w)(r)[t].id,_new:(0,X._w)(r)[t]._new,type:"Feature"})}),i=N()({},v()(e.features),{id:(0,X.P3)(r).id,_new:(0,X.P3)(r)._new,type:"Feature"}),a="enterEditMode"===e.enableEdit?p().Observable.of((0,j.Yf)("drawOrEdit",i.geometry.type,"featureGrid",o,n)):p().Observable.empty();return p().Observable.of((0,B.Vw)(o)).concat(a)})},qe=function(e,t){return e.ofType(B.JB).switchMap(function(){var e=t.getState();return p().Observable.from([(0,B.F5)((0,X._w)(e)),(0,j.bp)()])})},Xe=function(e,t){return e.ofType(B.Oj,B.jp,B.yi,B.aO).filter(function(){return(0,X.eK)(t.getState())===B.EH.EDIT&&(0,X.bq)(t.getState())}).switchMap(function(e){return r=t.getState(),n=e.type===B.yi,o=(0,D.cZ)(),i=(0,k.findGeometryProperty)((0,K.Qs)(r)).localType,a={featureProjection:o,stopAfterDrawing:oe.ZP.isSimpleGeomType(i),editEnabled:!0,drawEnabled:!1},(u=(0,X._w)(r).map(function(e){var t=N()({},e,{type:"Feature"});if(!m()(t)){var o=(0,X.ND)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var i=E()((0,X.kG)(r),{id:t.id});i&&i.geometry&&(t.geometry=i.geometry)}n&&(t.geometry=(0,K.dc)(r,t.id)?(0,K.dc)(r,t.id).geometry:null)}return t}).filter(function(e){return null!==e.geometry||"empty_row"!==e.id})).length>0?p().Observable.from([(0,j.Yf)("drawOrEdit",i,"featureGrid",u,a)]):p().Observable.from([(0,j.Yf)("clean","","featureGrid",[],{})]);var r,n,o,i,a,u})},$e=function(e){return e.ofType(B.IN).switchMap(function(){return p().Observable.of((0,j.bp)())})},Ke=function(e,t){return e.ofType(B.aO).switchMap(function(e){return e.mode===B.EH.VIEW?p().Observable.of((0,j.bp)(),(0,q.WP)("featuregrid.select")):e.mode!==B.EH.EDIT||(0,X.bq)(t.getState())?p().Observable.of((0,q.WP)()):p().Observable.of((0,j.bp)(),(0,q.WP)("featuregrid.select"),(0,$.Kp)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))})},Je=function(e){return e.ofType(B.$O).switchMap(function(){return e.ofType(F.nk).take(1).switchMap(function(){return p().Observable.of((0,B.nY)(),(0,B.YV)())}).takeUntil(e.ofType(B.sF))})},et=function(e,t){return e.ofType(F.nk).switchMap(function(){return(0,Q._d)(t.getState())?p().Observable.of((0,Z.Xg)("queryPanel","enabled",!1)):p().Observable.empty()})},tt=function(e,t){return e.ofType(B.$O).switchMap(function(){return e.ofType(Z.kM).filter(function(e){return e.control&&"drawer"===e.control&&(0,X.Rd)(t.getState())}).switchMap(function(){return p().Observable.of((0,B.YV)(),(0,B.KD)([]))}).takeUntil(e.ofType(F.nk))})},rt=function(e,t){return e.ofType(B.bZ).switchMap(function(){var e=t.getState();return(0,X.LB)(e)||(0,X.b4)(e)?p().Observable.of((0,B.Pv)("featureCloseConfirm",!0)):p().Observable.of((0,B.YV)())})},nt=function(e){return e.ofType(B.Gk).switchMap(function(){return p().Observable.of((0,B.$E)(),(0,B.Pv)("clearConfirm",!1))})},ot=function(e){return e.ofType(B.vO).switchMap(function(){return p().Observable.of((0,Z.Xg)("drawer","enabled",!1),(0,B.Pv)("featureCloseConfirm",!1))})},it=function(e,t){return e.ofType(B.$O).exhaustMap(function(){return e.ofType(B.sF).delay(50).filter(function(){return(0,K.M7)(t.getState())}).switchMap(function(){return p().Observable.of(me(t.getState()))}).takeUntil(e.ofType(F.nk,U.xy,B.VM))})},at=function(e){return e.ofType(B.$O).switchMap(function(){return p().Observable.race(e.ofType(U.xy).take(1),e.ofType(B.sF).take(1)).exhaustMap(function(t){return t.type===B.sF?p().Observable.empty():e.ofType(U.F9).switchMap(function(){return p().Observable.of((0,B.t9)())})}).takeUntil(e.ofType(F.nk,Z.kM).filter(function(e){return e.type===F.nk||e.control&&"drawer"===e.control}).merge(e.ofType(B.sF).withLatestFrom(e.ofType(U.xy,U.F9).scan(function(e,t){switch(t.type){case U.xy:return!1;case U.F9:return!0;default:return!1}},!0).startWith(!0),function(e,t){return t}).filter(function(e){return e})))})},ut=function(e,t){return e.ofType(B.VM).switchMap(function(){return p().Observable.of((0,B.KD)([]),(0,Y.F)(y()(t.getState(),'featuregrid.advancedFilters["'.concat((0,X.u$)(t.getState()),'"]'))),(0,B.YV)("queryPanel"),(0,Z.Xg)("queryPanel","enabled",!0)).merge(p().Observable.race(e.ofType(Y.Wm).mergeMap(function(e){return p().Observable.of((0,x.rP)(e.searchUrl,e.filterObj),(0,B.Uh)(N()({},(0,ee.gC)(t.getState()),e.filterObj)),(0,Z.Xg)("queryPanel","enabled",!1),(0,B.t9)(),(0,K.M7)(t.getState())?(0,B.hB)():p().Observable.empty())}),e.ofType(Z.kM).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)}).mergeMap(function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,j.Yf)("clean","","featureGrid",[],{})]:[];return p().Observable.from(e.concat((0,B.t9)()))})).takeUntil(e.ofType(B.$O,F.nk)))})},ct=function(e,t){return e.ofType(B.a3).filter(function(){return!y()(t.getState(),"featuregird.virtualScroll",!1)}).switchMap(function(){return p().Observable.of((0,H.Px)(R()((0,K.F0)(t.getState())),"EPSG:4326"))})},lt=function(e){return e.ofType(B.aO).filter(function(e){return e.mode===B.EH.EDIT}).map(function(){return(0,Z.fV)(["query"])})},ft=function(e){return e.ofType(B.$O).switchMap(function(){return p().Observable.of((0,U.Mc)())})},st=function(e,t){return e.ofType(x._T).filter(function(){return(0,K.M7)(t.getState())}).mapTo((0,B.hB)())},pt=function(e,t){return e.ofType(x._T).filter(function(){return!(0,K.M7)(t.getState())}).switchMap(function(){return p().Observable.from([me(t.getState()),{type:B.Hg}])})},dt=function(e,t){return e.ofType(B.sF).switchMap(function(){var e,r=t.getState(),n="queryPanel"===(null===(e=r.featuregrid)||void 0===e?void 0:e.closer);return n&&(0,K.M7)(r)?p().Observable.of(me(t.getState())):(0,K.M7)(r)&&!n?p().Observable.of((0,x.XO)()):p().Observable.empty()})},yt=function(e,t){return e.ofType(B.$O).filter(function(){return(0,K.M7)(t.getState())}).switchMap(function(){return p().Observable.of((0,B.hB)())})},gt=function(e,t){return e.ofType(x.Yx,x.VN).filter(function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===x.Yx||!r}).switchMap(function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return p().Observable.merge(p().Observable.of((0,K.M7)(t.getState())).filter(function(e){return e}),e.ofType(B.Yd)).mergeMap(function(){return p().Observable.of(function(e,t){return(0,W.He)(e,{filterObj:t})}(o,i))})})},vt=function(e,t){var r=t.getState;return e.ofType(B.ye).filter(function(){return!(0,K.gy)(r())}).switchMap(function(t){var n=r(),o=t.pages,i=o.startPage,a=o.endPage,u=n.featuregrid,c=u.pages,l=u.pagination,f=y()(l,"size"),s=(0,D.gP)(i,a,c,f),d=s[1]-s[0]+1;return p().Observable.of((0,x.IO)((0,K.Bu)(n),ve(de({},(0,K.X1)(n)),{startIndex:s[0]*f,maxFeatures:d*f}),(0,X.TC)(n))).filter(function(){return s.length>0}).merge(e.ofType(x.Hu).filter(function(){return s.length>0}).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,u=r().featuregrid,l=u.features,s=u.maxStoredPages,p=y()(o,"pagination.startIndex"),d=(0,D.f1)(n,{endPage:a,startPage:i},{pages:c,features:l||[]},{size:f,startIndex:p,maxStoredPages:s}),g=d.pages,v=d.features;return(0,B.UB)(v,g)}).take(1).takeUntil(e.ofType(x.VT))).merge(e.ofType(x.yz).filter(function(){return s.length>0}).filter(function(e){return!e.isLoading}).withLatestFrom(e.ofType(B.ye)).map(function(e){return e[1]}).take(1).takeUntil(e.ofType(x.VT)))})},bt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(W.Zz).filter(function(e){var t=e.layer,n=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return h()(T()(n),(0,X.u$)(r()))&&h()(Object.keys(i),"time")&&(0,X.DK)(r())}).merge(e.ofType(B.d)).filter(function(){return(0,X.Rd)(r())}).withLatestFrom(e.ofType(x.Qq),function(e,t){return t}).switchMap(function(e){return p().Observable.of((0,x.rP)(e.searchUrl,e.filterObj))})},mt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(Z.kM).filter(function(){return"drawer"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).control&&t().browser&&t().browser.mobile&&(0,Q.BP)(t())}).switchMap(function(){return p().Observable.of((0,U.aN)(),(0,B.YV)())})},Ot=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(U.xy).filter(function(){return t().browser&&t().browser.mobile&&(0,Q.BP)(t())}).mapTo((0,Z.Xi)("drawer","enabled"))},Et=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(B.$).switchMap(function(){var e,r=null===(e=(0,X.Li)(t()))||void 0===e?void 0:e.id;return p().Observable.of((0,j.k4)(r))})},St=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(B.sF).switchMap(function(){var e=[(0,j.k4)(!1)];return(0,te.jP)(t())&&e.push((0,j.oJ)()),p().Observable.from(e)})},Tt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(B.aO).filter(function(e){return"VIEW"===e.mode}).switchMap(function(){var e=[];return(0,te.jP)(t())&&e.push((0,j.oJ)()),p().Observable.from(e)})},wt=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState;return e.ofType(B.$O,B.vm,H.pP).filter(function(){return(0,X.Rd)(t())&&(0,X.qd)(t())&&(0,ue.$v)(t())!==ce.Bk.CESIUM}).switchMap(function(){return p().Observable.of((0,B.a8)())})},ht=function(e){return e.ofType(B.vm).filter(function(e){var t=e.type,r=e.value;return t===B.vm&&!1===r}).switchMap(function(){return p().Observable.of((0,B.a8)())})},Pt=function(e,t){return e.ofType(F.nk).switchMap(function(){return null!==(0,X.zc)(t.getState())?p().Observable.of((0,B.dM)(null)):p().Observable.empty()})},_t=r(545578),Ft=r.n(_t),It=r(701469),At=r.n(It),Mt=r(881808),Rt=r(455877),Dt=r.n(Rt);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Nt(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach(function(t){kt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Gt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ut={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],editingAllowedGroups:[],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,mode:B.EH.VIEW,changes:[],pagination:{page:0,size:20},select:[],drawing:!1,newFeatures:[],features:[],dockSize:.35,customEditorsOptions:{rules:[]},viewportFilter:null},xt=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},Yt=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(t){return xt(e,t)}).length>0},Ht=function(e,t,r,n){return e.map(function(e){return Yt(e,t)?function(e,t,r){return Ct(Ct({},e),{},r?{properties:Ct(Ct({},e.properties),t),geometry:r.geometry}:{properties:Ct(Ct({},e.properties),t)})}(e,r,n):e})};var Vt=r(532425);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bt(e,t,r){return(t=function(e){var t=function(e){if("object"!=zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Zt=(0,a.connect)((0,u.P1)(function(e){var t;return null==e||null===(t=e.featuregrid)||void 0===t?void 0:t.dockSize},function(e){return(0,ie.ic)(e,{transform:!0})},function(e,t){return{size:e,dockStyle:t}}))(function(e){var t=e.size,r=e.dockStyle,n=(0,o.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach(function(t){Bt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({height:"".concat(100*t,"%")},r)},[t,r]);return i().createElement("div",{className:"feature-editor-fallback-container",style:n},i().createElement(Vt.Z,{size:100,style:{margin:"0 auto"}}))});var Qt=r(218291),qt=r(867076);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}var $t=["onClick","selectedNodes","status","itemComponent","statusTypes"];function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kt.apply(null,arguments)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach(function(t){tr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tr(e,t,r){return(t=function(e){var t=function(e){if("object"!=Xt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rr=(0,a.connect)((0,u.P1)([function(e){var t;return null==e||null===(t=e.featuregrid)||void 0===t?void 0:t.open},X.qd],function(e,t){return{open:e,viewportFilterInitialized:null!==t}}),{setViewportFilter:B.dM,initPlugin:B.QT})((0,qt.compose)((0,qt.lifecycle)({componentDidMount:function(){var e;!this.props.viewportFilterInitialized&&this.props.filterByViewport&&this.props.setViewportFilter(!0),this.props.initPlugin({virtualScroll:null===(e=this.props.virtualScroll)||void 0===e||e,editingAllowedRoles:this.props.editingAllowedRoles,editingAllowedGroups:this.props.editingAllowedGroups,maxStoredPages:this.props.maxStoredPages})},componentDidUpdate:function(e){var t;!this.props.viewportFilterInitialized&&this.props.filterByViewport&&this.props.setViewportFilter(!0);var r=null!==(t=this.props)&&void 0!==t?t:{},n=r.virtualScroll,o=r.editingAllowedRoles,i=r.editingAllowedGroups,a=r.maxStoredPages;e.virtualScroll===n&&l()(e.editingAllowedRoles,o)&&l()(e.editingAllowedGroups,i)&&e.maxStoredPages===a||this.props.initPlugin({virtualScroll:null==n||n,editingAllowedRoles:o,editingAllowedGroups:i,maxStoredPages:a})}}),(0,Qt.Z)(function(e){return!!e.open},{fallback:i().createElement(Zt,null)}))((0,o.lazy)(function(){return Promise.all([r.e(85294),r.e(96259),r.e(43129),r.e(72555),r.e(20),r.e(32833),r.e(53370),r.e(9090),r.e(21951),r.e(91090),r.e(24011),r.e(15760),r.e(32988)]).then(r.bind(r,809031))}))),nr=(0,a.connect)(function(){return{}},{onClick:W.Qr})(function(e){var t,r=e.onClick,n=e.selectedNodes,o=e.status,a=e.itemComponent,u=e.statusTypes,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$t),l=a,f=null==n||null===(t=n[0])||void 0===t?void 0:t.node;return![u.LAYER].includes(o)||null==f||!f.search||null!=f&&f.error?null:i().createElement(l,Kt({},c,{glyph:"features-grid",tooltipId:"toc.toolFeaturesGridTooltip",onClick:function(){var e;return r(er(er({},f),{},{url:(null==f||null===(e=f.search)||void 0===e?void 0:e.url)||f.url}))}}))});const or=(0,f.rx)("FeatureEditor",{component:rr,epics:n,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.Xp:return N()({},e,{editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],editingAllowedGroups:t.options.editingAllowedGroups||e.editingAllowedGroups||[],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case B.ye:case B.gG:return N()({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case B.fT:var r;return Ct(Ct({},e),{},{pagination:Ct(Ct({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case B.Oj:var n=t.features.filter(function(e){return"empty_row"!==e.id});return e.multiselect&&t.append?N()({},e,{select:t.append?Ft()([].concat(Nt(e.select),Nt(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&xt(n[0],e.select[0])?e:N()({},e,{select:n||[]});case B.v6:var o=e.select.filter(function(e){return!Yt(e,t.features)}),i=t.features.filter(function(t){return!Yt(t,e.select)}),a=o.concat(i||[]);return N()({},e,{select:a});case B.jp:return N()({},e,{select:e.select.filter(function(e){return!Yt(e,t.features)})});case B.DU:var u,c;return N()({},e,{multiselect:null!==(u=t.multiselect)&&void 0!==u?u:e.multiselect,showCheckbox:null!==(c=t.showCheckbox)&&void 0!==c?c:e.showCheckbox});case B.r:return N()({},e,{customEditorsOptions:t.payload});case B.gJ:return N()({},e,t.options||{});case B.CM:return N()({},e,{select:[],changes:[]});case B.iQ:return N()({},e,{features:t.features});case B.dZ:return N()({},e,{dockSize:t.dockSize});case B.$:return N()({},e,{selectedLayer:t.id});case B.qw:return N()({},e,{tools:Ct(Ct({},e.tools),{},kt({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case B.f$:return N()({},e,{attributes:Ct(Ct({},e.attributes),{},kt({},t.name,Ct(Ct({},e.attributes&&e.attributes[t.name]||{}),{},kt({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case B.aO:return N()({},e,{tools:t.mode===B.EH.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===B.EH.EDIT,drawing:!1});case B.K8:var l=t.features.filter(function(e){return e._new})||[];return N()({},e,{newFeatures:l.length>0?Ht(e.newFeatures,l,t.updated,null):e.newFeatures,changes:[].concat(Nt(e&&e.changes||[]),Nt(t.features.filter(function(e){return!e._new}).map(function(e){return{id:e.id,updated:t.updated}})))});case B.AH:return N()({},e,{saving:!0,loading:!0});case B.AY:return N()({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case B.yi:return N()({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case B.IN:var f=Dt().v1();return N()({},e,{newFeatures:t.features.map(function(e){return Ct(Ct({},e),{},{_new:!0,id:e.id?e.id:f,type:"Feature",geometry:e.geometry?e.geometry:null})}),select:t.features.map(function(e){return Ct(Ct({},e),{},{_new:!0,id:e.id?e.id:f,type:"Feature",geometry:e.geometry?e.geometry:null})})});case B.SW:return N()({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case B.DI:var s=t.features.filter(function(e){return e._new})||[];return N()({},e,{newFeatures:s.length>0?Ht(e.newFeatures,s,null,{geometry:Ct({},v()(s).geometry)}):e.newFeatures,changes:t.features.filter(function(e){return!e._new}).map(function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}}),drawing:!1});case B.oh:var p=t.features.filter(function(e){return e._new})||[];return N()({},e,{newFeatures:p.length>0?Ht(e.newFeatures,p,null,{geometry:null}):e.newFeatures,changes:[].concat(Nt(e&&e.changes||[]),Nt(t.features.filter(function(e){return!e._new}).map(function(e){return{id:e.id,updated:{geometry:null}}})))});case x.u7:return N()({},e,{localType:y()(t,"featureType.original.featureTypes[0].properties[1].localType")});case B._9:return N()({},e,{drawing:!e.drawing});case B.$O:return N()({},e,{open:!0,closer:null});case B.sF:return N()({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:B.EH.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],closer:t.closer});case B.MK:return N()({},e,{disableToolbar:t.disabled});case B.ut:return N()({},e,{canEdit:t.permission.canEdit});case j.hZ:return"clean"===t.status?N()({},e,{drawing:!1}):e;case B._u:var d=(t.update||{}).attribute;if(d&&t.append){var g=e.filters[d].value,b=[];null!=g&&g.attribute&&(b=[g]),At()(g)&&(b=g);var m=[].concat(Nt(b),[t.update.value]);return N()({},e,{filters:kt({},d,{attribute:d,enabled:!0,type:"geometry",operator:"OR",value:m})})}return d?N()({},e,{filters:Ct(Ct({},e.filters),{},kt({},d,t.update))}):e;case x.Yx:return N()({},e,{filters:{}});case x.VN:var O;return Ct(Ct({},e),{},{useLayerFilter:null!==(O=t.useLayerFilter)&&void 0!==O?O:e.useLayerFilter});case B.DA:var E=t.dockProps&&t.dockProps.maxDockSize,S=t.dockProps&&t.dockProps.minDockSize,T=E&&S&&S<=t.size&&E>=t.size&&t.size||E&&E<t.size&&E||S&&S>t.size&&S||t.size;return N()({},e,{dockSize:T});case B.Lz:return N()({},e,{advancedFilters:N()({},e.advancedFilters,kt({},e.selectedLayer,t.filterObj))});case B.Jb:return N()({},e,{features:t.features||[],pages:t.pages||[]});case B.sK:return N()({},e,{showAgain:!e.showAgain});case B.d:return N()({},e,{timeSync:t.value});case B.vm:return N()({},e,{viewportFilter:t.value});case Mt.ok:return Ct(Ct({},e),y()(t,"config.featureGrid",{}));default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor",Component:nr,target:"toolbar",position:7}}})},120096:(e,t,r)=>{"use strict";r.d(t,{lM:()=>p,jP:()=>d,Qp:()=>y,l:()=>g,$N:()=>v});var n=r(227361),o=r.n(n),i=r(513218),a=r.n(i),u=r(675110),c=r(731255),l=r(784715),f=r(624262),s=r(308316),p=function(e){var t,r;return!(null==e||null===(t=e.draw)||void 0===t||!t.snappingLayer)&&(null!==(r=(0,u.CA)(e,e.draw.snappingLayer))&&void 0!==r?r:(0,u.iv)(e,e.draw.snappingLayer))},d=function(e){return o()(e,"draw.snapping",!1)},y=function(e){return o()(e,"draw.snappingIsLoading",!1)},g=function(e){return o()(e,"draw.snapConfig",!1)},v=(0,l.oz)(function(e,t){return e===t||a()(e)&&a()(t)&&(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(null==e?void 0:e.title)===(null==t?void 0:t.title)&&(null==e?void 0:e.visibility)===(null==t?void 0:t.visibility)})([u.l2,u.KL,c.Li,p,g,s.Pz],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=null==n?void 0:n.id,u=null==r?void 0:r.id,c=t.filter(function(e){var t;return(null!==(t=null==o?void 0:o.additionalLayers)&&void 0!==t?t:[]).includes(e.id)}).map(function(e){return e.options}).concat(e);return(u?[{value:u,label:(0,f.in)(r,i),active:u===a}]:[]).concat(c.map(function(e){var t;return!(e.id===u||!["wms","wfs","vector"].includes(null==e?void 0:e.type)||"wms"===(null==e?void 0:e.type)&&"wfs"!==(null==e||null===(t=e.search)||void 0===t?void 0:t.type)||"background"===e.group||!e.visibility)&&{value:e.id,label:(0,f.in)(e,i),active:e.id===a}}).filter(Boolean))})},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>y,Nr:()=>g,QJ:()=>v,ic:()=>b,Jz:()=>m,VM:()=>O,CF:()=>E,Ju:()=>S,Fc:()=>T,gQ:()=>w});var n=r(91175),o=r.n(n),i=r(288306),a=r.n(i),u=r(800827),c=r(552259),l=r(737275);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){return e.maplayout&&e.maplayout.layout||{}},g=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=y(e),o=v(e);return n&&Object.keys(n).filter(function(e){return t[e]}).reduce(function(e,t){var i;return p(p({},e),{},d({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))},{})||{}},function(e,t,r){return JSON.stringify(y(e))+JSON.stringify(v(e))+JSON.stringify(t)+(r?"_isDock":"")}),m=function(e){var t;return!(null===(t=y(e))||void 0===t||!t.rightPanel)},O=function(e){var t,r=l.ZP.getConfigProp("mapLayout")||c.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=y(e);return!!o()(t.filter(function(e){return r[e.key]}).map(function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value}))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,u.Od)(e),r=g(e);return r&&t&&t.size&&{left:(0,c.pb)(r.left,t.size.width),bottom:(0,c.pb)(r.bottom,t.size.height),right:(0,c.pb)(r.right,t.size.width),top:(0,c.pb)(r.top,t.size.height)}},S=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},T=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},998869:(e,t,r)=>{"use strict";r.d(t,{k:()=>f,U:()=>s});var n=r(782904),o=r(49977),i=r.n(o),a=r(607147),u=r(604206),c=r(801550),l=r(433528),f="export-context",s=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,n.Xg)(t,"enabled",null)])},f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,a.Yq)(t)(e)};return e.ofType(u.hZ,c.YD,l.$O).filter(function(e){var n=e.type,o=e.status,i=e.owner,a=e.eventName,s=e.toolName,p=f(t.getState(),r);switch(n){case l.$O:return"featureGrid"!==r;case c.YD:return p&&"click"===a&&s!==r;case u.hZ:return p&&("drawOrEdit"===o||"start"===o)&&i!==r;default:return p&&"annotations"!==r}}).switchMap(function(e){return f(t.getState(),r)?o(t.getState(),r,e):i().Observable.empty()})}},651751:(e,t,r)=>{var n=r(834387),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},750937:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=["wfsVersion","wfsNS"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(227361),f=r(799767),s=f.insert,p=f.feature,d=f.attribute,y=r(199381).transaction,g=r(550525),v=g.deleteFeaturesByFilter,b=g.deleteFeature,m=r(516685),O=m.update,E=m.propertyChange,S=r(378889),T=S.getPropertyDescriptor,w=S.getValue,h=S.findGeometryProperty,P=S.featureTypeSchema,_=r(439156),F=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return c(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},I=function(e){this.version=e},A=function(e){return l(e,"featureTypes[0].typeName")},M=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(A(e)):A(e)},R=function(e,t){return e.geometry_name||h(t).name};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,i=t.wfsNS,u=void 0===i?"wfs":i,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,o);if("1.1.0"!==n)throw new I(n);var l=function(t){return p(e.targetPrefix,A(e),Object.keys(t.properties||[]).filter(function(t){return T(t,e)}).map(function(r){return d(e.targetPrefix,r,w(t.properties[r],r,e))}).concat(t.geometry?d(e.targetPrefix,R(t,e),w(t.geometry,R(t,e),e)):[]))},f=function(e){return e.features?e.features.map(l):l(e)};return a(a({},_(a(a({},c),{},{wfsVersion:n,wfsNS:u}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(u,Array.isArray(F(e,r))?F(e,r).map(f):f(e))},getPropertyName:function(t){return function(e,t){return"geometry"===e||e===R({},t)?R({},t):e}(t,e)},deleteByFilter:function(t){return v(u,t,M(e))},deleteFeature:function(t){return b(u,t,M(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return O(u,M(e),F(t,n))},propertyChange:function(t,r){return E(u,t,w(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return y(F(t,o),P(e),n,u)}})}},550525:(e,t,r)=>{var n=r(651751).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},799767:e=>{var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},199381:e=>{e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},516685:e=>{e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}}}]);