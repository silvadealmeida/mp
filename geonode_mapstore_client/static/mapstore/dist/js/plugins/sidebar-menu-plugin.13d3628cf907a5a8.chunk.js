"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[46858],{309986:(t,e,n)=>{n.r(e),n.d(e,{default:()=>K});var r=n(124852),o=n.n(r),i=n(45697),u=n.n(i),l=n(496259),a=n(271418),c=n(171703),s=n(22222),p=n(122727),f=n(658252),b=n(815135),d=n(294184),m=n.n(d),y=n(957557),v=n.n(y);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var g=["children","className","bsStyle","tooltipId","tooltipPosition"];function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O.apply(null,arguments)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function P(t,e,n){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=(0,b.Z)(a.zx);const E=function(t){var e=t.children,n=t.className,r=t.bsStyle,i=void 0===r?"link":r,u=t.tooltipId,l=t.tooltipPosition,a=void 0===l?"left":l,c=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,g);return o().createElement(w,O({className:m()(S({"square-button":!0},n?P({},n,!0):{})),bsStyle:i,tooltipId:u,tooltipPosition:a},v()(c,["pluginCfg","help","defaultOptions","items","advancedSettings"])),e)};var I=n(55105),k=n(782904),D=n(322843),T="SIDEBARMENU:SET_LAST_ACTIVE_ITEM";function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach(function(e){N(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function N(t,e,n){return(e=function(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M=n(893379),_=n.n(M),H=n(213717);_()(H.Z,{insert:"head",singleton:!1}),H.Z.locals;var C=n(88791),F=n(805346);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach(function(e){V(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(B=function(){return!!t})()}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}function V(t,e,n){return(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){var e=function(t){if("object"!=L(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:e+""}var Q=(0,b.Z)(a.PS),X=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V(t=function(t,e,n){return e=U(e),function(t,e){if(e&&("object"==L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B()?Reflect.construct(e,n||[],U(t).constructor):e.apply(t,n))}(this,e),"getStyle",function(t){var e,n=(null==t?void 0:t.dockSize)>0;return R(R({},t),{},{height:n?"auto":"100%",maxHeight:null!==(e=null==t?void 0:t.height)&&void 0!==e?e:null,bottom:n?"calc(".concat(t.dockSize,"vh + 30px)"):null})}),V(t,"getPanels",function(){return t.props.items.filter(function(t){return t.tools}).reduce(function(t,e){return t.concat(e.tools.map(function(t,n){var r,o;return{name:e.name+n,panel:t,cfg:(null==e||null===(r=e.cfg)||void 0===r||null===(o=r.toolsCfg)||void 0===o?void 0:o[n])||{}}}))},[])}),V(t,"visibleItems",function(e){return t.props.items.reduce(function(n,r){return null!=r&&r.components||!t.targetMatch(e,r.target)||!t.isNotHidden(r,t.props.state)?(null!=r&&r.components&&Array.isArray(r.components)&&r.components.forEach(function(o){return t.targetMatch(e,null==o?void 0:o.target)&&t.isNotHidden(null!=o&&o.selector?o:r,t.props.state)&&n.push(R({plugin:(null==r?void 0:r.plugin)||t.defaultTool,position:null==r?void 0:r.position,cfg:null==r?void 0:r.cfg,name:r.name,help:null==r?void 0:r.help,items:null==r?void 0:r.items},o)),n}),n):(n.push(R(R({},r),{},{target:e})),n)},[])}),V(t,"getItems",function(e,n){var r=Math.floor(n/t.props.sidebarWidth)-1,i=e||t.defaultTarget,u=t.visibleItems(i);if(r<u.length){var l=u.sort(function(t,e){var n,r;return(null!==(n=t.position)&&void 0!==n?n:0)-(null!==(r=e.position)&&void 0!==r?r:0)});t.swapLastActiveItem(l,r);var c=l.slice(0,r),s={name:"moreItems",position:9999,icon:o().createElement(a.gG,{glyph:"option-horizontal"}),tool:function(){return t.renderExtraItems(u.slice(r))},priority:1};return c.splice(r,0,s),c}return u.sort(function(t,e){var n,r;return(null!==(n=t.position)&&void 0!==n?n:0)-(null!==(r=e.position)&&void 0!==r?r:0)})}),V(t,"targetMatch",function(e,n){return n===e||!n&&e===t.defaultTarget}),V(t,"getTools",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sidebar",n=arguments.length>1?arguments[1]:void 0;return t.getItems(e,n).sort(function(t,e){return t.position-e.position})}),V(t,"renderExtraItems",function(e){var n=function(){return{}},r=e.map(function(e){var r;if(e.tool){var i=e.tool;return o().createElement(i,{key:e.name,menuItem:!0})}var u=(0,c.connect)(null!==(r=null==e?void 0:e.selector)&&void 0!==r?r:n,function(n,r){var o={};return r.action&&(o.onClick=function(){var o;t.props.setLastActiveItem(null!==(o=null==e?void 0:e.name)&&void 0!==o?o:null==e?void 0:e.toggleProperty),(0,p.DE)(r.action,n)()}),o})(a.sN);return o().createElement(u,{action:e.action},null==e?void 0:e.icon,null==e?void 0:e.text)});return o().createElement(Q,{dropup:!0,pullRight:!0,bsStyle:"tray",id:"extra-items",tooltip:o().createElement(F.Z,{msgId:"sidebarMenu.showMoreItems"}),tooltipPosition:"left",title:o().createElement(a.gG,{glyph:"option-horizontal"})},r)}),V(t,"swapLastActiveItem",function(e,n){var r=t.props.lastActiveTool;if(r){var o=e.findIndex(function(t){return(null==t?void 0:t.name)===r||(null==t?void 0:t.toggleProperty)===r});if(-1!==o&&o>n-1){var i=e[o];e[o]=e[n-1],e[n-2]=i}}}),V(t,"isNotHidden",function(t,e){var n,r;return null==t||!t.selector||"none"!==(null===(n=t.selector(e))||void 0===n||null===(r=n.style)||void 0===r?void 0:r.display)}),t.defaultTool=E,t.defaultTarget="sidebar",t.state={lastVisible:!1,hidden:!1},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){(0,this.props.onInit)()}},{key:"shouldComponentUpdate",value:function(t){var e,n,r,o,i,u,l,a,c,s,p,f,b=this,d=!1===t.isActive,m=(null===(e=t.state.map)||void 0===e||null===(n=e.present)||void 0===n||null===(r=n.size)||void 0===r?void 0:r.height)!==(null===(o=this.props.state.map)||void 0===o||null===(i=o.present)||void 0===i||null===(u=i.size)||void 0===u?void 0:u.height),y=t.style.bottom!==this.props.style.bottom,v=t.items!==this.props.items,h=(null===(l=t.state)||void 0===l||null===(a=l.controls)||void 0===a||null===(c=a.burgermenu)||void 0===c?void 0:c.enabled)!==(null===(s=this.props.state)||void 0===s||null===(p=s.controls)||void 0===p||null===(f=p.burgermenu)||void 0===f?void 0:f.enabled),g=!v&&t.items.reduce(function(e,n,r){return b.isNotHidden(n,t.state)!==b.isNotHidden(b.props.items[r],b.props.state)&&e.push(n),e},[]).length>0,O=!this.props.isSidebarFullHeight&&t.isSidebarFullHeight;return m||v||g||y||h||d||O}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.onInit,r=e.onDetach,o=this.state.hidden,i=this.visibleItems("sidebar").length;i&&!1===t.isActive&&n(),0!==i||o?i>0&&o&&(n(),this.setState(function(t){return R(R({},t),{},{hidden:!1})})):(r(),this.setState(function(t){return R(R({},t),{},{hidden:!0})}))}},{key:"componentWillUnmount",value:function(){(0,this.props.onDetach)()}},{key:"render",value:function(){var t=this;return!this.state.hidden&&o().createElement("div",{id:"mapstore-sidebar-menu-container",className:"shadow-soft ".concat(this.props.isSidebarFullHeight?"fullHeightSideBar":""),style:this.getStyle(this.props.style)},o().createElement(l.Z,null,function(e){var n=e.height;return o().createElement(f.Z,{id:t.props.id,className:t.props.className,container:function(t){return o().createElement(o().Fragment,null,t.children)},toolStyle:"tray",activeStyle:"primary",stateSelector:"sidebarMenu",tool:E,tools:t.getTools("sidebar",n),panels:t.getPanels(t.props.items)})}))}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);V(X,"propTypes",{className:u().string,style:u().object,items:u().array,id:u().string,onInit:u().func,onDetach:u().func,sidebarWidth:u().number,state:u().object,setLastActiveItem:u().func,isSidebarFullHeight:u().bool}),V(X,"contextTypes",{messages:u().object,router:u().object}),V(X,"defaultProps",{items:[],style:{},id:"mapstore-sidebar-menu",onInit:function(){},onDetach:function(){},eventSelector:"onClick",toolStyle:"default",activeStyle:"primary",stateSelector:"sidebarMenu",tool:E,toolCfg:{},sidebarWidth:40,isSidebarFullHeight:!1});var q=(0,s.P1)([function(t){return t},function(t){return(0,C.Tp)(t)},function(t){return(0,I.ic)(t,{dockSize:!0,bottom:!0,height:!0})},C.zL,C.mr],function(t,e,n,r,o){return{style:n,lastActiveTool:e,state:t,isActive:r,isSidebarFullHeight:o}});const K=(0,D.rx)("SidebarMenu",{cfg:{},component:(0,c.connect)(q,{onInit:k.Xg.bind(null,"sidebarMenu","enabled",!0),onDetach:k.Xg.bind(null,"sidebarMenu","enabled",!1),setLastActiveItem:function(t){return{type:T,value:t}}})(X),reducers:{sidebarmenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lastActiveItem:null},e=arguments.length>1?arguments[1]:void 0;return e.type===T?A(A({},t),{},{lastActiveItem:e.value}):t}}})},55105:(t,e,n)=>{n.d(e,{Ss:()=>d,Nr:()=>m,QJ:()=>y,ic:()=>v,Jz:()=>h,VM:()=>g,CF:()=>O,Ju:()=>j,Fc:()=>S,gQ:()=>P});var r=n(91175),o=n.n(r),i=n(288306),u=n.n(i),l=n(800827),a=n(552259),c=n(737275);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){b(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function b(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){return t.maplayout&&t.maplayout.layout||{}},m=function(t){return t.maplayout&&t.maplayout.boundingMapRect||{}},y=function(t){return t.maplayout&&t.maplayout.boundingSidebarRect||{}},v=u()(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d(t),o=y(t);return r&&Object.keys(r).filter(function(t){return e[t]}).reduce(function(t,e){var i;return f(f({},t),{},b({},e,n&&null!==(i=o[e])&&void 0!==i?i:r[e]))},{})||{}},function(t,e,n){return JSON.stringify(d(t))+JSON.stringify(y(t))+JSON.stringify(e)+(n?"_isDock":"")}),h=function(t){var e;return!(null===(e=d(t))||void 0===e||!e.rightPanel)},g=function(t){var e,n=c.ZP.getConfigProp("mapLayout")||a.Ur;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=d(t);return!!o()(e.filter(function(t){return n[t.key]}).map(function(t){return"not"===t.type?n[t.key]!==t.value&&n[t.key]:n[t.key]===t.value}))}(t,[{key:"bottom",value:null!==(e=null==n?void 0:n.bottom.sm)&&void 0!==e?e:0,type:"not"}])},O=function(t){var e=(0,l.Od)(t),n=m(t);return n&&e&&e.size&&{left:(0,a.pb)(n.left,e.size.width),bottom:(0,a.pb)(n.bottom,e.size.height),right:(0,a.pb)(n.right,e.size.width),top:(0,a.pb)(n.top,e.size.height)}},j=function(t){var e,n;return null!==(e=null==t||null===(n=t.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==e?e:{left:[],right:[]}},S=function(t){return v(t,{height:!0,right:!0},!0)},P=function(t){return v(t,{right:!0},!0)}},88791:(t,e,n)=>{n.d(e,{Tp:()=>u,zL:()=>l,mr:()=>a});var r=n(227361),o=n.n(r),i=n(367306),u=function(t){return o()(t,"sidebarmenu.lastActiveItem",!1)},l=function(t){return o()(t,"controls.sidebarMenu.enabled",!1)},a=function(t){return(0,i.Wy)(t)}},213717:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(923645),o=n.n(r)()(function(t){return t[1]});o.push([t.id,"#mapstore-sidebar-menu-container {\n  z-index: 1030;\n  position: absolute;\n  background: inherit;\n  right: 0;\n  top: 0;\n  width: 40px;\n  height: 100%;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: auto;\n  z-index: 10;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-tray,\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn,\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-group .btn {\n  border-bottom: 0;\n  height: 40px;\n  width: 40px;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-tray span:not(.glyphicon),\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn span:not(.glyphicon),\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu > .btn-group .btn span:not(.glyphicon) {\n  display: none;\n}\n#mapstore-sidebar-menu-container #mapstore-sidebar-menu .snapshot-panel {\n  position: absolute;\n  right: 40px;\n  top: 60px;\n  background: #ffffffab;\n}\n#mapstore-sidebar-menu-container.fullHeightSideBar {\n  position: relative;\n  max-height: 100% !important;\n}\n",""]);const i=o}}]);