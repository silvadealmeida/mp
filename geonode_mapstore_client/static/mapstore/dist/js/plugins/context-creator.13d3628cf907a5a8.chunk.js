"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[11239],{604206:(e,t,n)=>{n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>u,Rh:()=>p,G_:()=>f,vU:()=>d,Vw:()=>m,KD:()=>b,uj:()=>g,lo:()=>y,Yf:()=>v,fo:()=>h,PY:()=>E,bp:()=>S,oJ:()=>P,k4:()=>O,sc:()=>T,Li:()=>C});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",u="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function m(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function b(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function g(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function y(){return{type:l}}function v(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function E(e){return{type:i,currentStyle:e}}var S=function(e){return v("clean","",e,[],{})};function P(){return{type:f}}function O(e){return{type:u,snappingLayer:e}}function T(){return{type:p}}function C(e,t,n){return{type:d,value:e,prop:t,pluginCfg:n}}},433528:(e,t,n)=>{n.d(t,{gJ:()=>r,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>l,aO:()=>c,v6:()=>s,K8:()=>u,IN:()=>p,zh:()=>f,AH:()=>d,Ub:()=>m,_9:()=>b,JB:()=>g,oh:()=>y,AY:()=>v,yi:()=>h,SW:()=>E,Hk:()=>S,iQ:()=>P,dY:()=>O,$:()=>T,_u:()=>C,gG:()=>w,DI:()=>x,dZ:()=>j,qw:()=>D,f$:()=>N,bZ:()=>R,$O:()=>I,sF:()=>A,Gk:()=>k,vO:()=>F,ut:()=>U,MK:()=>_,VV:()=>Z,B8:()=>M,VM:()=>G,a3:()=>L,Xp:()=>B,DA:()=>z,sK:()=>V,r:()=>$,iB:()=>W,WB:()=>H,vm:()=>J,EH:()=>Y,Yd:()=>X,Hg:()=>K,Lz:()=>q,ye:()=>Q,Jb:()=>ee,d:()=>te,fT:()=>ne,Ib:()=>re,UB:()=>oe,Uh:()=>ie,QT:()=>ae,oL:()=>le,Ap:()=>ce,KD:()=>se,Z_:()=>ue,Vw:()=>pe,sY:()=>fe,kA:()=>de,gr:()=>me,pX:()=>be,F5:()=>ge,MO:()=>ye,dq:()=>ve,DY:()=>he,oO:()=>Ee,uF:()=>Se,a8:()=>Pe,Pv:()=>Oe,an:()=>Te,lg:()=>Ce,nY:()=>we,nG:()=>xe,lx:()=>je,$S:()=>De,gc:()=>Ne,Uz:()=>Re,fO:()=>Ie,$E:()=>Ae,cE:()=>ke,JK:()=>Fe,YV:()=>Ue,t9:()=>_e,YG:()=>Ze,HT:()=>Me,MY:()=>Ge,ve:()=>Le,hB:()=>Be,Ox:()=>ze,zd:()=>Ve,aT:()=>$e,VH:()=>We,Yb:()=>He,Jr:()=>Je,pP:()=>Ye,gL:()=>Xe,dM:()=>Ke});var r="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",l="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",s="FEATUREGRID:TOGGLE_FEATURES_SELECTION",u="FEATUREGRID:FEATURES_MODIFIED",p="FEATUREGRID:NEW_FEATURE",f="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",m="FEATUREGRID:START_EDITING_FEATURE",b="FEATUREGRID:START_DRAWING_FEATURE",g="FEATUREGRID:DELETE_GEOMETRY",y="FEATUREGRID:DELETE_GEOMETRY_FEATURE",v="FEATUREGRID:SAVE_SUCCESS",h="FEATUREGRID:CLEAR_CHANGES",E="FEATUREGRID:SAVE_ERROR",S="FEATUREGRID:DELETE_SELECTED_FEATURES",P="SET_FEATURES",O="FEATUREGRID:SORT_BY",T="FEATUREGRID:SET_LAYER",C="QUERY:UPDATE_FILTER",w="FEATUREGRID:CHANGE_PAGE",x="FEATUREGRID:GEOMETRY_CHANGED",j="DOCK_SIZE_FEATURES",D="FEATUREGRID:TOGGLE_TOOL",N="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",R="ASK_CLOSE_FEATURE_GRID_CONFIRM",I="FEATUREGRID:OPEN_GRID",A="FEATUREGRID:CLOSE_GRID",k="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",F="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",U="FEATUREGRID:SET_PERMISSION",_="FEATUREGRID:DISABLE_TOOLBAR",Z="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",M="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",G="FEATUREGRID:ADVANCED_SEARCH",L="FEATUREGRID:ZOOM_ALL",B="FEATUREGRID:INIT_PLUGIN",z="FEATUREGRID:SIZE_CHANGE",V="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",$="FEATUREGRID:UPDATE_EDITORS_OPTIONS",W="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",H="FEATUREGRID:SET_SYNC_TOOL",J="FEATUREGRID:SET_VIEWPORT_FILTER",Y={EDIT:"EDIT",VIEW:"VIEW"},X="FEATUREGRID:START_SYNC_WMS",K="FEATUREGRID:STOP_SYNC_WMS",q="STORE_ADVANCED_SEARCH_FILTER",Q="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",ne="FEATUREGRID:SET_PAGINATION";function re(){return{type:V}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:q,filterObj:e}}function ae(){return{type:B,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function le(){return{type:k}}function ce(){return{type:F}}function se(e,t){return{type:o,features:e,append:t}}function ue(e){return{type:r,options:e}}function pe(e){return{type:x,features:e}}function fe(){return{type:m}}function de(){return{type:b}}function me(e){return{type:i,features:e}}function be(){return{type:g}}function ge(e){return{type:y,features:e}}function ye(){return{type:a}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=e.showCheckbox;return{type:l,multiselect:t,showCheckbox:n}}function he(e,t){return{type:O,sortBy:e,sortOrder:t}}function Ee(e,t){return{type:w,page:e,size:t}}function Se(e){return{type:T,id:e}}function Pe(e){return{type:C,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Oe(e,t){return{type:D,tool:e,value:t}}function Te(e,t,n){return{type:N,name:e,key:t,value:n}}function Ce(){return{type:c,mode:Y.EDIT}}function we(){return{type:c,mode:Y.VIEW}}function xe(e,t){return{type:u,features:e,updated:t}}function je(e){return{type:p,features:e}}function De(){return{type:f}}function Ne(){return{type:v}}function Re(){return{type:S}}function Ie(){return{type:d}}function Ae(){return{type:h}}function ke(){return{type:E}}function Fe(){return{type:R}}function Ue(e){return{type:A,closer:e}}function _e(){return{type:I}}function Ze(e){return{type:_,disabled:e}}function Me(e){return{type:U,permission:e}}function Ge(){return{type:G}}function Le(){return{type:L}}function Be(){return{type:X}}function ze(e,t){return{type:z,size:e,dockProps:t}}var Ve=function(e){return{type:Q,pages:e}},$e=function(e){return{type:Z,activated:e}},We=function(e){return{type:M,deactivated:e}},He=function(e){return{type:te,value:e}},Je=function(e){return{type:ne,size:e}},Ye=function(e){return{type:W,updateFilterAction:e}},Xe=function(e){return{type:H,syncWmsFilter:e}},Ke=function(e){return{type:J,value:e}}},725288:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(271418),c=n(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(e=function(e,t,n){return t=f(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"getContainerNode",function(t){return t?document.body:e.parentNode||document.querySelector("."+(c.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.getContainerNode(this.props.useBody);return o().createElement("div",{ref:function(t){e.parentNode=t&&t.parentNode},className:this.props.className,style:this.props.style},o().createElement(l.Ox,{ref:function(t){e.trigger=t},trigger:["click"],container:t,placement:this.props.placement,rootClose:!0,overlay:o().createElement(l.J2,{id:this.props.id,title:this.props.title,className:this.props.popoverClassName},this.props.content)},this.props.children))}}])&&u(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);m(g,"propTypes",{id:a().string,style:a().object,className:a().string,popoverClassName:a().string,placement:a().string,title:a().node,content:a().node,useBody:a().bool}),m(g,"defaultProps",{id:"",useBody:!1});const y=g},965539:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(124852),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=function(e){var t=e.id,n=e.children,r=e.header,i=e.footer,a=e.columns,c=e.height,s=e.style,u=void 0===s?{}:s,p=e.className,f=e.bodyClassName,d=void 0===f?"ms2-border-layout-body":f;return o().createElement("div",{id:t,className:p,style:l({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},r,o().createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},c?o().createElement("div",{style:{height:c}},n):n),c?o().createElement("div",{style:{height:c}},a):a),i)}},501262:(e,t,n)=>{n.d(t,{Z:()=>O});var r=n(727418),o=n.n(r),i=n(45697),a=n.n(i),l=n(124852),c=n.n(l),s=n(180307),u=n.n(s),p=n(271418),f=n(624847),d=n(805346),m=n(807472);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function E(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return E(e=function(e,t,n){return t=v(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"setConfirmRef",function(t){return e.confirm=t,e.confirm}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&u().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return c().createElement(m.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},c().createElement("span",{role:"header"},c().createElement("span",{className:"user-panel-title"},this.props.title),c().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?c().createElement(p.gG,{glyph:this.props.closeGlyph}):c().createElement("span",null,"×"))),c().createElement("div",{role:"body"},this.props.children),c().createElement("div",{role:"footer"},c().createElement(p.hE,null,c().createElement(f.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),c().createElement(f.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(c().Component);E(P,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),E(P,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:c().createElement(d.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:c().createElement(d.Z,{msgId:"confirm"})||"Confirm",closeText:c().createElement(d.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const O=P},135400:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=e.mainViewStyle,a=void 0===r?{}:r,l=e.contentStyle,s=void 0===l?{}:l,u=e.imageStyle,p=void 0===u?{}:u,f=e.glyph,d=void 0===f?"info-sign":f,m=e.iconFit,b=e.title,g=e.tooltip,y=e.tooltipId,v=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:m?"100%":void 0},n)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:m?"100%":void 0},a)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:m?"100%":void 0},p)},o().createElement(i.Z,{iconFit:m,tooltip:g,tooltipId:y,glyph:d})):null,b?o().createElement("h1",{key:"title"},b):null,v?o().createElement("p",{key:"description",className:"empty-state-description"},v):null),o().createElement("div",{key:"content",className:"empty-state-content",style:s},h))}},592778:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(893379),o=n.n(r),i=n(172704);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=n(45697),l=n.n(a),c=n(124852),s=n.n(c),u=n(271418);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var v=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return g(e=function(e,t,n){return t=m(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"onFilter",function(t){e.props.onFilter(t.target.value)}),g(e,"onClear",function(){e.props.onFilter("")}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.filterText?s().createElement(u.Ox,{placement:"bottom",overlay:s().createElement(u.u,{id:"mapstore-toc-filter"},this.props.tooltipClear)},s().createElement(u.gG,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):s().createElement(u.gG,{className:"text-primary",glyph:"filter"});return s().createElement(u.cw,{className:"mapstore-filter"},s().createElement(u.BZ,null,s().createElement(u.NI,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),s().createElement(u.BZ.Addon,{className:"square-button-md"},this.props.loading?s().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(s().Component);g(v,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),g(v,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const h=v},379313:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(124852),o=n.n(r),i=n(271418),a=n(496259),l=(0,n(815135).Z)(i.gG);const c=function(e){var t=e.glyph,n=void 0===t?"info-sign":t,r=e.tooltip,i=e.tooltipId,c=e.iconFit,s=e.padding,u=void 0===s?0:s,p=e.margin,f=void 0===p?0:p;return o().createElement(a.Z,null,function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:n,tooltip:r,tooltipId:i,style:{display:"inline-block",padding:u+"px",margin:f+"px",textAlign:"center",fontSize:c?Math.min(t,a)-2*u-2*f:t-2*u-2*f}})})}},975480:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(124852),o=n.n(r);const i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},352595:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(461365).Z)(n(271418).aV)},694745:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(124852),o=n.n(r),i=n(294184),a=n.n(i),l=n(271418),c=n(807472),s=n(80717),u=n(867076),p=n(819081),f=n.n(p),d=n(975480),m={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},b={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const g=(0,u.withState)("fullscreenState","onFullscreen",function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t})(function(e){var t=e.show,n=void 0!==t&&t,r=e.loading,i=e.loadingText,u=e.onClose,p=void 0===u?function(){}:u,g=e.title,y=void 0===g?"":g,v=e.clickOutEnabled,h=void 0===v||v,E=e.showClose,S=void 0===E||E,P=e.disabledClose,O=void 0!==P&&P,T=e.showFullscreen,C=void 0!==T&&T,w=e.fullscreenType,x=void 0===w?"full":w,j=e.buttons,D=void 0===j?[]:j,N=e.size,R=void 0===N?"":N,I=e.bodyClassName,A=void 0===I?"":I,k=e.children,F=e.draggable,U=void 0!==F&&F,_=e.fullscreenState,Z=e.onFullscreen,M=e.fade,G=void 0!==M&&M,L=e.fitContent,B=e.modalClassName,z=void 0===B?"":B,V=e.dialogClassName,$=void 0===V?"":V,W=e.enableFooter,H=void 0===W||W,J=m[R]||"",Y=C&&"expanded"===_&&b.className[x]||"",X=n?o().createElement("div",{className:"modal-fixed ".concat(z," ")+(U?"ms-draggable":"")},o().createElement(c.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?p:function(){},containerClassName:"ms-resizable-modal",draggable:U,modal:!0,className:a()("modal-dialog modal-content",J,Y,$,{"ms-fit-content":L})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},y),C&&b.className[x]&&o().createElement(l.gG,{className:"ms-header-btn",onClick:function(){return Z("expanded"===_?"collapsed":"expanded")},glyph:b.glyph[_][x]}),S&&p&&o().createElement(l.gG,{glyph:"1-close",className:"ms-header-btn",onClick:p,disabled:O}))),o().createElement("div",{role:"body",className:A},k),H&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},r?o().createElement(d.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},r?i:null),o().createElement(s.Z,{buttons:D})))):null;return G?o().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},X):X})},314068:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(124852),o=n.n(r),i=n(855033),a=n.n(i),l=n(532425),c=n(483139),s=n(80717);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const m=(0,r.forwardRef)(function(e,t){var n,i,d=e.className,m=void 0===d?"ms-thumbnail":d,b=e.label,g=e.loading,y=e.message,v=e.error,h=e.thumbnail,E=e.removeGlyph,S=void 0===E?"trash":E,P=e.removeTooltipId,O=void 0===P?"removeThumbnail":P,T=e.style,C=void 0===T?{}:T,w=e.maxFileSize,x=void 0===w?5e5:w,j=e.checkOriginalFileSize,D=void 0!==j&&j,N=e.supportedImageTypes,R=void 0===N?["image/png","image/jpeg","image/jpg"]:N,I=e.thumbnailOptions,A=e.dropZoneProps,k=void 0===A?{className:"ms-thumbnail-dropzone",activeClassName:"ms-thumbnail-dropzone-active",rejectClassName:"ms-thumbnail-dropzone-reject"}:A,F=e.onUpdate,U=void 0===F?function(){}:F,_=e.onError,Z=void 0===_?function(){}:_,M=e.onRemove,G=e.toolbarButtons,L=(0,r.useRef)(),B=(n=(0,r.useState)(),i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,i)||f(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),z=B[0],V=B[1];if((0,r.useEffect)(function(){return L.current=!0,function(){L.current=!1}},[]),g||z)return o().createElement("div",{className:"dropzone-thumbnail-container".concat(m?" ".concat(m):""," ms-loading")},o().createElement(l.Z,{size:70}));var $=o().createElement(s.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:G||[{glyph:S,visible:!(!M||!h),tooltipId:O,onClick:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),null==M||M()}}]});return o().createElement("div",{className:"dropzone-thumbnail-container".concat(m?" ".concat(m):""),style:C},b,o().createElement(a(),u({},k,{multiple:!1,onDrop:function(e){var t,n,r=null==e||null===(t=e[0])||void 0===t?void 0:t.type,o=null==e||null===(n=e[0])||void 0===n?void 0:n.size,i=-1!==R.indexOf(r);return D&&o>=x?Z(["SIZE"],e):(V(!0),function(e,t){return new Promise(function(n){var r=e;if(null!=r&&r[0]){var o=r[0],i=new FileReader;return i.onload=function(e){return n(t?(0,c.Xq)(e.target.result,t).then(function(e){return{data:e,size:e.length}}):{data:e.target.result,size:o.size})},i.readAsDataURL(o)}return n({data:null})})}(e,I).then(function(t){var n=t.data,r=t.size;return L.current?(V(!1),i&&n&&r<x?U(n,e):Z([].concat(p(i?[]:["FORMAT"]),p(n&&r>=x?["SIZE"]:[])),e)):null}).catch(function(e){return L.current?(V(!1),Z(e)):null}))}}),h?o().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},o().createElement("div",{ref:t,style:{position:"relative",width:"100%",height:"100%",backgroundImage:"url(".concat(h,")"),backgroundSize:null!=I&&I.contain?"contain":"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),o().createElement("div",{className:"dropzone-content-image-added"},y),$):o().createElement("div",{className:"dropzone-content-image"},y,$,v&&o().createElement("div",{className:"dropzone-errors"},v))))})},982030:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(124852),o=n.n(r),i=n(623560),a=n.n(i),l=n(867076),c=n(135400);const s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,l.branch)(e,function(){return function(e){return o().createElement(n,t&&a()(t)?t(e):t)}})}},145869:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=u(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&c(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);f(m,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),f(m,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const b=m},218291:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(124852),o=n.n(r);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,n=void 0===t?null:t;return function(t){return(0,r.forwardRef)(function(a,l){return void 0===e||e(a)?o().createElement(r.Suspense,{fallback:n},o().createElement(t,i({ref:l},a))):null})}}},962909:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(124852),o=n.n(r),i=n(843614),a=n(805346),l=n(624847);const c=function(e){var t=e.title,n=void 0===t?o().createElement(a.Z,{msgId:"warning"}):t,r=e.cancelText,c=void 0===r?o().createElement(a.Z,{msgId:"no"}):r,s=e.confirmText,u=void 0===s?o().createElement(a.Z,{msgId:"yes"}):s,p=e.onClose,f=void 0===p?function(){}:p,d=e.onConfirm,m=void 0===d?function(){}:d,b=e.show,g=e.children,y=e.className,v=void 0===y?"":y,h=e.buttonSize,E=e.running,S=void 0!==E&&E,P=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(l.Z,{disabled:S,className:v,key:"confirmButton",bsStyle:"primary",bsSize:h,onClick:function(){m()}},u),o().createElement(l.Z,{key:"cancelButton",bsSize:h,disabled:S,onClick:f},c));return o().createElement(i.Z,{show:b,onHide:f},o().createElement(i.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(i.Z.Title,null,n)),o().createElement(i.Z.Body,null,g),o().createElement(i.Z.Footer,null,P))}},507299:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(867076);const o=(0,r.compose)((0,r.withState)("showDetailsSheet","setShowDetailsSheet",!1),(0,r.withState)("editorState","setEditorState"),(0,r.withState)("detailsBackup","setDetailsBackup"),(0,r.withHandlers)({onShowDetailsSheet:function(e){var t=e.setShowDetailsSheet,n=void 0===t?function(){}:t;return function(){return n(!0)}},onHideDetailsSheet:function(e){var t=e.setShowDetailsSheet,n=void 0===t?function(){}:t;return function(){return n(!1)}}}),(0,r.withProps)(function(e){var t,n,r=e.linkedResources,o=void 0===r?{}:r;return{savedDetailsText:"NODATA"===(null==o||null===(t=o.details)||void 0===t?void 0:t.data)||null==o||null===(n=o.details)||void 0===n?void 0:n.data}}))},212961:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(271418),c=n(857037);function s(e){var t=e.color,n=e.format,r=e.line,i=e.onChangeColor,a=e.disableAlpha,s=e.containerNode,u=e.onOpen,p=e.disabled,f=e.presetColors,d=e.placement;return o().createElement("div",{className:"ms-color-selector"},o().createElement(c.Z,{text:o().createElement(l.gG,{glyph:"dropper"}),format:n,line:r,value:t,onChangeColor:i,pickerProps:{disableAlpha:a,presetColors:f},containerNode:s,disabled:p,onOpen:u,placement:d}))}s.propTypes={color:a().oneOfType([a().string,a().shape({r:a().number,g:a().number,b:a().number,a:a().number})]),format:a().string,line:a().bool,onChangeColor:a().func,disableAlpha:a().bool,containerNode:a().node,disabled:a().bool,onOpen:a().func,presetColors:a().array,placement:a().string},s.defaultProps={line:!1,onChangeColor:function(){},onOpen:function(){}};const u=s},202576:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(124852),o=n.n(r),i=n(180307),a=n.n(i),l=n(45697),c=n.n(l),s=n(271418),u=n(352595),p=n(950966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=b(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(r=[{key:"renderPopover",value:function(){return o().createElement(s.J2,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title,style:this.props.popoverStyle},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(s.gG,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(p.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(u.Z,{placement:this.props.placement,show:!0,target:function(){return a().findDOMNode(e.target)}},this.renderPopover())])}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);y(h,"propTypes",{id:c().string,title:c().string,text:c().string,glyph:c().string,bsStyle:c().string,placement:c().string,left:c().number,top:c().number,trigger:c().oneOfType([c().array,c().bool]),popoverStyle:c().object}),y(h,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const E=h},298854:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(124852);const o=(0,n(218291).Z)()((0,r.lazy)(function(){return Promise.all([n.e(39935),n.e(89782)]).then(n.bind(n,789782))}))},271609:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(375875),o=n.n(r),i=n(737275),a=n(984596),l=n.n(a),c=n(692957);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e||i.ZP.getConfigProp("contextPluginsConfiguration")||"configs/pluginsConfig.json",n=l()(t);return o().all(n.map(function(e){return o().get(e).then(function(e){return e.data}).catch(function(){return null})})).then(function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n.slice(1);if(!r)throw new Error("plugins configuration file is broken");return(0,c.ao)(r,o.filter(function(e){return e&&"object"===s(e)}))})}},589919:(e,t,n)=>{n.d(t,{hP:()=>s});var r=n(984596),o=n.n(r),i=n(49977),a=n.n(i);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return l(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},s=function(e,t,n){return function(r){return(n?c(r,o()(e)).catch(n):c(r,o()(e))).concat(a().Observable.from(o()(t)))}}},79041:(e,t,n)=>{n.r(t),n.d(t,{contextCreatorSelector:()=>Ei,default:()=>Si});var r={};n.r(r),n.d(r,{checkIfContextExists:()=>Le,contextCreatorLoadContext:()=>_e,contextCreatorShowTutorialEpic:()=>$e,deleteTemplateEpic:()=>ke,disablePluginsEpic:()=>Xe,editPluginEpic:()=>nt,editTemplateEpic:()=>Fe,enableInitialPlugins:()=>Be,enableMandatoryPluginsEpic:()=>Je,enablePluginsEpic:()=>Ye,exportContextEpic:()=>ot,handleUserExtensionsPlugin:()=>qe,importContextEpic:()=>it,invalidateContextName:()=>Ge,loadMapViewerOnStepChange:()=>ze,loadTemplateEpic:()=>Ae,loadTutorialOnStepChange:()=>Ve,mapViewerLoadEpic:()=>We,mapViewerReload:()=>He,resetConfigOnPluginKeyChange:()=>Ke,resetOnShowDialog:()=>Ue,saveContextResource:()=>Re,savePluginCfgEpic:()=>rt,saveTemplateEpic:()=>Ie,setValidationStatusOnEditedCfgUpdate:()=>Qe,uninstallPluginEpic:()=>Me,updateEditedCfgEpic:()=>et,uploadPluginEpic:()=>Ze,validateEditedCfgEpic:()=>tt});var o=n(171703),i=n(22222),a=n(737275),l=n(322843),c=n(12248),s=n(93152),u=n(323827),p=n(227361),f=n.n(p),d=n(957557),m=n.n(d),b=n(513218),g=n.n(b),y=n(91175),v=n.n(y),h=n(313311),E=n.n(h),S=n(478718),P=n.n(S),O=n(761868),T=["data"],C=["plugins","userPlugins","templates","theme","customVariablesEnabled"],w=["type"];function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){A(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e,t,n){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=[{name:"TOC",label:"List of layers",children:[{name:"TOCItemSettings",label:"Layer settings"},{name:"FeaturesGrid",label:"Attribute Table"}]},{name:"MapTemplates",label:"Map Templates"},{name:"MetadataExplorer",label:"MetadataExplorer"},{name:"Scale",label:"Scale"},{name:"ZoomIn",label:"Zoom In"},{name:"ZoomOut",label:"Zoom Out"}],F=function(e,t,n,r){return e&&e.map(function(e){return I(I({},t.reduce(function(t,n){return t||n===e.name},!1)?(0,O.t8)(n,r,e):e),{},{children:F(e.children,t,n,r)})})},U=function(e){return g()(e)?e.name:e},_=function(e,t){return e&&e.reduce(function(e,n){return e||t===U(n)&&n||_(n.children,t)},null)},Z=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{name:e.name,title:e.title,description:e.description,docUrl:e.docUrl,glyph:e.glyph,parent:n,mandatory:!!e.mandatory,forcedMandatory:!1,enabledDependentPlugins:[],hidden:!!e.hidden,dependencies:e.dependencies||[],enabled:!1,active:!1,denyUserSelection:e.denyUserSelection||!1,isUserPlugin:!1,isExtension:null!==(t=e.extension)&&void 0!==t&&t,pluginConfig:I(I({override:e.defaultOverride},m().apply(void 0,[v()(o.filter(function(t){return t.name===e.name}))||{},"cfg"].concat(D(e.defaultOverride?["override"]:[])))),{},{name:e.name,cfg:e.defaultConfig}),autoEnableChildren:e.autoEnableChildren||[],children:f()(e,"children",[]).map(function(e){return v()(r.filter(function(t){return t.name===e}))}).filter(function(e){return void 0!==e}).map(function(t){return Z(t,e.name,r,o)})}},M=n(49977),G=n.n(M),L=n(729592),B=n.n(L),z=n(944908),V=n.n(z),$=n(225325),W=n.n($),H=n(3674),J=n.n(H),Y=n(252628),X=n.n(Y),K=n(630998),q=n.n(K),Q=n(150361),ee=n.n(Q),te=n(747037),ne=n.n(te),re=n(441609),oe=n.n(re),ie=n(275982),ae=n(730429),le=n(589919),ce=n(274621),se=n(197395),ue=function(e,t,n){return{type:"CHANGE_PRESET",preset:e,presetGroup:t,ignoreDisabled:n}},pe=n(801550),fe=n(881808),de=n(727354),me=n(271609),be=n(375875),ge=n.n(be),ye=n(988753),ve=n(782904),he=n(998869),Ee=n(688182);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Pe(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return Te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach(function(t){xe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xe(e,t,n){return(t=function(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){return 409===e?"contextCreator.saveErrorNotification.conflict":"contextCreator.saveErrorNotification.defaultMessage"},De=function(e){return 403===e?"contextCreator.loadTemplateErrorNotification.forbidden":"contextCreator.loadTemplateErrorNotification.defaultMessage"},Ne=function(e,t){return e&&e.reduce(function(e,n){return e||t===n.name&&n||Ne(n.children,t)},null)},Re=function(e,t){return e.ofType(u.vt).exhaustMap(function(n){var r=n.destLocation,o=t.getState(),i=(0,c.rt)(o),a=(0,c.Gp)(o),l=(0,c.Kg)(o);return(i&&i.id?de.id:de.SN)(l).switchMap(function(t){return G().Observable.merge("/context-manager"===r?e.ofType("CONTEXTMANAGER:CONTEXTS_LIST_LOADED").take(1).switchMap(function(){return G().Observable.of((0,se.$Z)({title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"}))}):G().Observable.empty(),G().Observable.of((0,u.NG)(t),(0,ie.VF)(r||"/context/".concat(a.name)),(0,u.Qj)(),(0,u.V_)(!1,"contextSaving")))}).catch(function(e){var t=e.status,n=e.data;return G().Observable.of((0,se.vU)({title:"contextCreator.saveErrorNotification.titleContext",message:je(t),position:"tc",autoDismiss:5,values:{data:n}}),(0,u.V_)(!1,"contextSaving"))}).startWith((0,u.V_)(!0,"contextSaving"))})},Ie=function(e){return e.ofType(u.Zi).switchMap(function(e){var t=e.resource;return(t&&t.id?de.id:de.SN)(t).switchMap(function(e){return G().Observable.of((0,u.$k)(e),(0,u.vC)("uploadTemplate",!1),(0,se.$Z)({title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"}))}).let((0,le.hP)((0,u.V_)(!0,"templateSaving"),(0,u.V_)(!1,"templateSaving"),function(e,t){var n=e.status,r=e.data;return 404===n&&ne()(r)&&r.indexOf("Resource Category not found")>-1?(0,de.k4)("TEMPLATE").switchMap(function(){return t.skip(1)}).catch(function(){return G().Observable.of((0,se.vU)({title:"contextCreator.saveErrorNotification.titleTemplate",message:"contextCreator.saveErrorNotification.categoryError",position:"tc",autoDismiss:5,values:{categoryName:"TEMPLATE"}}))}):G().Observable.of((0,se.vU)({title:"contextCreator.saveErrorNotification.titleTemplate",message:je(n),position:"tc",autoDismiss:5,values:{data:r}}))}))})},Ae=function(e){return e.ofType(u.bC).switchMap(function(e){var t=e.id;return(0,de.RX)(t,{includeAttributes:!0,withData:!1,withPermissions:!1}).switchMap(function(e){var t=f()(e,"attributes.thumbnail"),n=f()(e,"attributes.format");return G().Observable.of((0,u.QB)(we(we(we({},e),{},{attributes:we(we({},t?{thumbnail:decodeURIComponent(t)}:{}),n?{format:n}:{})},t?{thumbnail:decodeURIComponent(t)}:{}),n?{format:n}:{})))}).let((0,le.hP)((0,u.V_)(!0,"templateLoading"),(0,u.V_)(!1,"templateLoading")))})},ke=function(e,t){return e.ofType(u.RW).switchMap(function(e){var n=e.resource;return(0,de.fg)(n).map(function(){var e=t.getState(),r=(0,c.zU)(e)||[];return(0,u.T3)(r.filter(function(e){return e.id!==n.id}))}).let((0,le.hP)((0,u.V_)(!0,"loading"),(0,u.V_)(!1,"loading"),function(){return G().Observable.of((0,se.vU)({title:"notification.error",message:"contextCreator.configureTemplates.deleteError",autoDismiss:6,position:"tc"}))}))})},Fe=function(e,t){return e.ofType(u.mE).switchMap(function(e){var n=e.id,r=t.getState(),o=E()((0,c.zU)(r),function(e){return e.id===n})||{};return(n?G().Observable.defer(function(){return ae.Z.getData(n)}):G().Observable.of(null)).switchMap(function(e){var t;return(t=G().Observable).of.apply(t,[(0,u.ur)(n)].concat(Pe(n?[(0,u.IB)("Template Data",e,o.format),(0,u.CB)("accepted")]:[]),[(0,u.vC)("uploadTemplate",!0)]))}).let((0,le.hP)((0,u.V_)(!0,"templateDataLoading"),(0,u.V_)(!1,"templateDataLoading"),function(e){var t=e.status;return G().Observable.of((0,se.vU)({title:"notification.error",message:De(t),position:"tc",autoDismiss:5}))}))})},Ue=function(e,t){return e.ofType(u.yT).flatMap(function(e){var n,r=e.dialogName,o=e.show,i=t.getState(),a=(0,c.T$)(i),l=(0,c.zU)(i)||[];return o?(n=G().Observable).of.apply(n,Pe("uploadTemplate"!==r||a?[]:[(0,u.CB)(),(0,u.IB)()]).concat(Pe("mapTemplatesConfig"===r?[(0,u.Fd)(l.map(function(e){return e.id}),"selected",!1)]:[]))):G().Observable.empty()})},_e=function(e,t){return e.ofType(u.JN).switchMap(function(e){var n=e.id,r=e.pluginsConfig;return G().Observable.of((0,u.sq)()).concat(G().Observable.forkJoin(G().Observable.defer(function(){return(0,me.Z)(r)}),G().Observable.defer(function(){return ae.Z.getResourcesByCategory("TEMPLATE","*",{params:{start:0,limit:1e4,includeAttributes:!0}})}).map(function(e){return 1===e.totalCount?[e.results]:X()(e.results)}),"new"===n?G().Observable.of(null):(0,de.RX)(n)).switchMap(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3),n=t[0],r=t[1],o=t[2];return G().Observable.of((0,u.DF)(o,n,r)).concat(G().Observable.of((0,u.Fl)(),(0,u.R5)(),(0,u.TX)("general-settings")))})).let((0,le.hP)((0,u.V_)(!0,"loading"),(0,u.V_)(!1,"loading"),function(e){var n="context.errors.context.unknownError";return 403===e.status&&(n="context.errors.context.pleaseLogin",(0,ce.jl)(t.getState())&&(n="context.errors.context.notAccessible")),404===e.status&&(n="context.errors.context.notFound"),G().Observable.of((0,u.DR)({error:we(we({},e.originalError),{},{message:n})}))}))})},Ze=function(e){return e.ofType(u.DI).switchMap(function(e){var t=e.files;return G().Observable.defer(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rest/config/uploadPlugin";return Promise.all(e.map(function(e){return(0,ye.xp)(e).then(function(e){return ge().post(t,e,{headers:{"Content-Type":"application/octet-stream"}})})})).then(function(e){return e.map(function(e){return e.data})})}(t.map(function(e){return e.file}))}).switchMap(function(e){return G().Observable.of((0,u.Hs)(e))}).let((0,le.hP)((0,u.$U)(!0,t.map(function(e){return e.name})),(0,u.$U)(!1,t.map(function(e){return e.name})),function(e){return G().Observable.of((0,u.Jx)(t,e))}))})},Me=function(e){return e.ofType(u.lx).switchMap(function(e){var t=e.plugin;return G().Observable.defer(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rest/config/uninstallPlugin";return ge().delete(t+"/"+e).then(function(e){return e.data})}(t)}).switchMap(function(e){return G().Observable.of((0,u.Zo)(t,e),(0,u.vC)("confirmRemovePlugin",!1))}).let((0,le.hP)((0,u.uc)(!0,t),(0,u.uc)(!1,t),function(){return G().Observable.of((0,se.vU)({title:"notification.error",message:"context.errors.plugins.uninstall",autoDismiss:6,position:"tc"}))}))})},Ge=function(e,t){return e.ofType(u.zM).filter(function(e){return"name"===e.key}).switchMap(function(){var e=t.getState(),n=(0,c.F)(e);return n||void 0===n?G().Observable.of((0,u.Eg)(!1)):G().Observable.empty()})},Le=function(e,t){return e.ofType(u.zM).filter(function(e){return"name"===e.key}).debounceTime(500).switchMap(function(){var e=t.getState(),n=(0,c.rt)(e),r=n&&n.name;return(r?G().Observable.defer(function(){return ae.Z.searchListByAttributes({AND:{FIELD:{field:["NAME"],operator:["EQUAL_TO"],value:[r]}}})}).switchMap(function(e){var t=e.ExtResourceList,r=t.Resource,o=t.ResourceCount;return f()(r,"id")!==f()(n,"id")&&o>0?G().Observable.of((0,se.vU)({title:"contextCreator.contextNameErrorNotification.title",message:"contextCreator.saveErrorNotification.conflict",position:"tc",autoDismiss:5}),(0,u.XT)(!1)):G().Observable.of((0,u.XT)(!0))}).let((0,le.hP)((0,u.V_)(!0,"contextNameCheck"),(0,u.V_)(!1,"contextNameCheck"),function(){return G().Observable.of((0,se.vU)({title:"contextCreator.contextNameErrorNotification.title",message:"contextCreator.contextNameErrorNotification.unknownError",position:"tc",autoDismiss:5}))})):G().Observable.empty()).concat(G().Observable.of((0,u.Eg)(!0)))})},Be=function(e,t){return e.ofType(u.Zf).switchMap(function(){var e=t.getState(),n=(0,c.u7)(e);return n&&n.length>0?G().Observable.of((0,u.iR)(n,!0)):G().Observable.empty()})},ze=function(e){return e.ofType(u.ve).filter(function(e){return"configure-map"===e.stepId}).switchMap(function(){return G().Observable.of((0,u.$E)())})},Ve=function(e,t){return e.ofType(u.ve).switchMap(function(e){var n=e.stepId,r=(0,c.K4)(t.getState())||{};return(0,c.xG)(n)(t.getState())?G().Observable.empty():G().Observable.of(ue(r[n],X()(r)),(0,u.xv)(n))})},$e=function(e,t){return e.ofType(u._o).switchMap(function(e){var n=e.stepId,r=(0,c.K4)(t.getState())||{};return G().Observable.of((0,u.$T)(),ue(r[n],X()(r),!0))})},We=function(e,t){return e.ofType(u.kC).switchMap(function(){var e=t.getState(),n=(0,c.d8)(e),r=(0,c.lY)(e),o=a.ZP.getConfigUrl({mapId:"new",config:null}).configUrl;return n?G().Observable.empty():G().Observable.merge(G().Observable.of((0,pe.y9)(!0),(0,fe.JZ)(o,null,ee()(r),void 0,{}),(0,u.pl)(!0)))})},He=function(e,t){return e.ofType(u.VD).switchMap(function(){var e=t.getState();return"configure-map"!==(0,c.F4)(e)?G().Observable.empty():G().Observable.of((0,u.pl)(!1),(0,u.$E)())})},Je=function(e,t){return e.ofType(u.m2).switchMap(function(){var e=t.getState(),n=(0,c.w7)(e);return G().Observable.of((0,u.iR)(n.filter(function(e){return e.mandatory}).map(function(e){return e.name})))})},Ye=function(e,t){return e.ofType(u.ro).switchMap(function(e){var n,r=e.plugins,o=e.isInitial,i=t.getState(),a=(0,c.w7)(i),l={},s=[],p=[],f=function(e){var t=function(e,t){t.children.forEach(function(e){e.mandatory&&f(e.name)}),o||t.mandatory||t.autoEnableChildren.forEach(function(t){e(null,Ne(a,t),!0)})},n=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r.mandatory){var i=r.enabled||s.reduce(function(e,t){return e||t===r.name},!1);e&&!o&&(l[r.name]||(l[r.name]=r.enabledDependentPlugins.slice()),l[r.name].push(e)),r.forcedMandatory||p.reduce(function(e,t){return e||t===r.name},!1)||(o||p.push(r.name),i||s.push(r.name),r.dependencies.forEach(function(e){n(r.name,Ne(a,e))}),i||t(n,r))}},r=Ne(a,e);!r.enabled&&s.reduce(function(t,n){return t&&n!==e},!0)&&(s.push(e),r.dependencies.forEach(function(t){n(e,Ne(a,t))}),t(n,r))};return r.forEach(function(e){f(e)}),(n=G().Observable).of.apply(n,[(0,u.dd)(s,"enabled",!0)].concat(Pe(o?[]:[(0,u.dd)(V()([].concat(s,p)),"isUserPlugin",!1)]),[(0,u.dd)(p,"forcedMandatory",!0)],Pe(J()(l).map(function(e){return(0,u.dd)([e],"enabledDependentPlugins",V()(l[e]))}))))})},Xe=function(e,t){return e.ofType(u.O_).switchMap(function(e){var n=e.plugins,r=t.getState(),o=(0,c.w7)(r),i=(0,Ee.r)(o).map(function(e){return e.name}),a=o.map(function(e){return e.name}),l=o.filter(function(e){return e.enabled&&!e.mandatory&&!e.forcedMandatory}).length;if(W()(n,a).length<l){var s,p={},f=[],d=[],m=function(e,t){var n=Ne(o,e);0!==(p[n.name]||n.enabledDependentPlugins.slice()).length||!f.reduce(function(e,t){return e&&t!==n.name},!0)||n.mandatory&&!t||(f.push(n.name),n.dependencies.forEach(function(t){!function(e,t){var n=p[t.name]||t.enabledDependentPlugins.slice(),r=q()(n,function(t){return t===e});r>-1&&(p[t.name]||(p[t.name]=n),p[t.name].splice(r,1)),p[t.name]&&0!==p[t.name].length||!f.reduce(function(e,n){return e&&n!==t.name},!0)||(d.push(t.name),t.mandatory||m(t.name))}(e,Ne(o,t))}),n.children.filter(function(e){return e.enabled}).forEach(function(e){m(e.name,!0)}))};return n.forEach(function(e){m(e)}),(s=G().Observable).of.apply(s,[(0,u.dd)(f,"enabled",!1)].concat(Pe(J()(p).map(function(e){return(0,u.dd)([e],"enabledDependentPlugins",p[e])})),[(0,u.dd)(V()(d),"forcedMandatory",!1)]))}return G().Observable.of((0,u.dd)(i,"enabled",!1),(0,u.dd)(i,"enabledDependentPlugins",[]),(0,u.dd)(i,"forcedMandatory",!1),(0,u.Fl)())})},Ke=function(e,t){return e.ofType(u.Gc).switchMap(function(e){var n=e.ids,r=e.key,o=e.value,i=t.getState(),a=(0,c.$R)(i),l=(0,c.w7)(i);if("enabled"===r&&!1===o){var s=function(e){return e.reduce(function(e,t){return e||a===t.name||s(t.children)},!1)};return s(n.map(function(e){return v()(l.filter(function(t){return t.name===e}))}).filter(function(e){return!!e}))?G().Observable.of((0,u.NP)(),(0,u.nv)()):G().Observable.empty()}return G().Observable.empty()})},qe=function(e,t){return e.ofType(u.Gc).filter(function(e){var t=e.key;return"enabled"===t||"isUserPlugin"===t}).mergeMap(function(){var e=t.getState(),n=(0,Ee.r)((0,c.w7)(e)),r=n.filter(function(e){var t=e.name,n=e.enabled,r=e.isUserPlugin;return"UserExtensions"!==t&&n&&r}).length,o=(E()(n,function(e){return"UserExtensions"===e.name})||{}).enabled,i=r>0&&!o?u.iR:0===r&&o?u.$c:null;return i?G().Observable.of(i(["UserExtensions"])):G().Observable.empty()})},Qe=function(e,t){return e.ofType(u.zr).mergeMap(function(){var e=t.getState();return(0,c.MC)(e)?G().Observable.of((0,u.iY)(!1)):G().Observable.empty()})},et=function(e){return e.ofType(u.zr).debounceTime(500).switchMap(function(){return G().Observable.of((0,u.YP)(),(0,u.YA)(),(0,u.iY)(!0))})},tt=function(e,t){return e.ofType(u.NS).switchMap(function(){var e=t.getState(),n=(0,c.gX)(e);if(n)try{var r=B().parse(n);return G().Observable.of((0,u.Qd)(r),(0,u.NP)())}catch(e){return G().Observable.of((0,u.NP)({message:e.message,lineNumber:function(e){var t=e.message.match(/line ([0-9]*)/);return t&&t.length>1?+t[1]:void 0}(e)}))}return G().Observable.empty()})},nt=function(e,t){return e.ofType(u.iU).switchMap(function(e){var n=e.pluginName,r=t.getState(),o=(0,c.$R)(r),i=(0,c.I1)(r),a=(0,c.MC)(r)||!1;return!i&&a?G().Observable.of((0,u.nv)(n),(0,u.gq)(n)):i?G().Observable.of((0,se.vU)({title:"contextCreator.configurePlugins.saveCfgErrorNotification.title",message:"contextCreator.configurePlugins.saveCfgErrorNotification.message",position:"tc",autoDismiss:5,values:{pluginName:o}})):G().Observable.empty()})},rt=function(e,t){return e.ofType(u.rx).switchMap(function(){var e=t.getState(),n=(0,c.$R)(e),r=(0,c.Jw)(e),o=(0,c.I1)(e);return n&&r&&!o?G().Observable.of((0,u.dd)([n],"pluginConfig.cfg",r.cfg),(0,u.dd)([n],"pluginConfig.override",r.override)):G().Observable.empty()})},ot=function(e,t){var n=t.getState;return e.ofType(u.c0).switchMap(function(e){var t=e.fileName,r=(0,c.ES)(n()),o=(0,c.Kg)(n()).data,i=we(we({},o),{},{mapConfig:oe()(null==o?void 0:o.mapConfig)?f()(r,"resource.data.mapConfig",{}):o.mapConfig});return G().Observable.of([JSON.stringify(we({},i)),t,"application/json"]).do(function(e){return ye.LR.apply(void 0,Pe(e))}).map(function(){return(0,ve.Xi)(he.k)}).catch(function(){return G().Observable.of((0,se.vU)({title:"contextCreator.errors.loading.title",message:"contextCreator.errors.loading.export"}))})})},it=function(e,t){return e.ofType(u.V2).switchMap(function(e){var n=e.file;return G().Observable.defer(function(){return(0,ye.zr)(n[0]).then(function(e){return e})}).switchMap(function(e){var n=(0,c.ES)(t.getState()),r=P()(n,["pluginsConfig","allTemplates"]),o=r.pluginsConfig,i=r.allTemplates,a=P()((0,c.rt)(t.getState()),["id","name"]),l=we({data:we({},e)},a);return G().Observable.of((0,u.DF)(l,o,i),(0,ve.Xi)("import")).concat(G().Observable.of((0,u.Fl)(),(0,u.R5)(),(0,u.pl)(!1)))}).catch(function(){return G().Observable.of((0,se.vU)({title:"contextCreator.errors.loading.title",message:"contextCreator.errors.loading.import"}))})})},at=n(124852),lt=n.n(at),ct=n(45697),st=n.n(ct),ut=n(271418),pt=n(624847),ft=n(805346),dt=n(965539),mt=n(501262),bt=n(399534);const gt=function(e){var t=e.style,n=e.showConfirm,r=void 0!==n&&n,o=e.onShowConfirm,i=void 0===o?function(){}:o,a=e.onConfirm,l=void 0===a?function(){}:a,c=e.onClose,s=void 0===c?function(){}:c,u=e.onClick,p=void 0===u?function(){}:u,f=e.className,d=void 0===f?"":f,m=e.title,b=e.confirmMessage,g=e.bsStyle,y=void 0===g?"default":g,v=e.bsSize,h=void 0===v?"sm":v;return lt().createElement(lt().Fragment,null,lt().createElement(pt.Z,{style:t,bsSize:h,bsStyle:y,className:d,onClick:p},m),b&&lt().createElement(bt.Z,null,lt().createElement(mt.Z,{modal:!0,show:r,onClose:function(){s(),i(!1)},onConfirm:function(){l(),i(!1)},confirmButtonBSStyle:"default",confirmButtonContent:lt().createElement(ft.Z,{msgId:"confirm"}),closeText:lt().createElement(ft.Z,{msgId:"cancel"}),closeGlyph:"1-close"},lt().createElement(ft.Z,{msgId:b}))))};var yt=n(532425);const vt=function(e){var t=e.loading,n=void 0!==t&&t,r=e.steps,o=void 0===r?[]:r,i=e.hideNamesExceptCurrent,a=void 0!==i&&i,l=e.currentStepId,c=e.onSetStep,s=void 0===c?function(){}:c,u=e.onSave,p=void 0===u?function(){}:u,f=e.onShowBackToPageConfirmation,d=void 0===f?function(){}:f,m=e.showBackToPageConfirmation,b=void 0!==m&&m,g=e.backToPageConfirmationMessage,y=void 0===g?"contextCreator.undo":g,v=e.onConfirmBackToPage,h=void 0===v?function(){}:v,E=e.enableClickOnStep,S=void 0!==E&&E,P=e.hideSaveButton,O=e.hideCloseButton,T=o.findIndex(function(e){return e.id===l}),C=P&&T===o.length-1,w=T>-1?lt().createElement("div",{className:"ms2-stepper"},lt().createElement("div",{className:"footer-button-toolbar-div"},lt().createElement(ut.Si,{className:"footer-button-toolbar-extra"},(o[T].extraToolbarButtons||[]).map(function(e,t){var n=e.component,r=e.onClick,o=void 0===r?function(){}:r,i=e.label,a=e.id;return n?lt().createElement(n,null):lt().createElement(pt.Z,{key:a||i||t,bsStyle:"primary",bsSize:"sm",onClick:o},lt().createElement(ft.Z,{msgId:i}))})),lt().createElement(ut.Si,{className:"footer-button-toolbar"},!C&&lt().createElement(pt.Z,{bsStyle:"primary",bsSize:"sm",disabled:o[T].disableNext||n,onClick:function(){return T<o.length-1?s(o[T+1].id):p()}},lt().createElement(ft.Z,{msgId:T<o.length-1?"stepper.next":"save"})),lt().createElement(pt.Z,{style:{height:"100%"},bsSize:"sm",className:"no-border",disabled:0===T||n,onClick:function(){return s(o[T-1].id)}},lt().createElement(ft.Z,{msgId:"stepper.back"})),!O&&lt().createElement(gt,{style:{height:"100%"},className:"no-border",title:n?lt().createElement(yt.Z,{size:14}):lt().createElement(ft.Z,{msgId:"close"}),showConfirm:b,onShowConfirm:d,onConfirm:h,onClick:function(){return d(!0)},confirmMessage:y}))),lt().createElement("div",{className:"footer-step-bar"},o.map(function(e,t){var n=lt().createElement(ft.Z,{msgId:e.label});return lt().createElement(lt().Fragment,null,t>0&&lt().createElement("div",{key:"line"+e.id,style:{flex:1,display:"flex",alignItems:"center"}},lt().createElement("div",{style:{backgroundColor:t<=T?"#777":"#ddd",height:1,width:"100%"}})),lt().createElement("div",{key:"label"+e.id,style:{padding:8,display:"flex",alignItems:"center",cursor:S?"pointer":"default"},onClick:function(){return S&&s(e.id)},role:"button",tabIndex:"0",onKeyDown:function(t){return(" "===t.key||"Enter"===t.key||"Spacebar"===t.key)&&S&&s(e.id)}},lt().createElement(ut.__,{bsStyle:t===T?"success":"primary",style:t<=T?{}:{backgroundColor:"#aaa"}},t+1),(!a||t===T)&&lt().createElement("span",{style:{padding:8}},t===T?lt().createElement("strong",null,n):n)))}))):null;return T>-1?lt().createElement(dt.Z,{className:"ms-stepper-container",footer:1===(null==o?void 0:o.length)?null:w},o[T].component):null};var ht=n(472986),Et=n.n(ht),St=n(86638);const Pt=function(e){var t=e.contextId,n=e.contextName,r=void 0===n?"":n,o=e.windowTitle,i=void 0===o?"":o,a=e.isValidContextName,l=void 0===a||a,c=e.contextNameChecked,s=void 0===c||c,u=e.loading,p=void 0!==u&&u,f=e.onChange,d=void 0===f?function(){}:f,m=e.context,b=void 0===m?{}:m;return lt().createElement("div",{className:"general-settings-step"},lt().createElement("div",{style:{margin:"auto"}},lt().createElement("div",{className:"text-center"},lt().createElement(ut.gG,{glyph:"wrench",style:{fontSize:128}})),lt().createElement("h1",{className:"text-center"},"new"===t?lt().createElement(ft.Z,{msgId:"contextCreator.generalSettings.title"}):lt().createElement(ft.Z,{msgId:"contextCreator.generalSettings.edit"})),lt().createElement(ut.cw,{validationState:r.length>0&&s?l?"success":"error":null},lt().createElement(ut.J$,null,lt().createElement(ft.Z,{msgId:"contextCreator.generalSettings.name"}),p?lt().createElement(Et(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null),lt().createElement(ut.NI,{type:"text",value:r,placeholder:(0,St.S$)(b.messages,"contextCreator.generalSettings.namePlaceholder"),onChange:function(e){return d("name",e.target.value&&e.target.value.replace(/[^a-zA-Z0-9\-_]/g,""))}})),lt().createElement(ut.cw,{validationState:i.length>0?"success":null},lt().createElement(ut.J$,null,lt().createElement(ft.Z,{msgId:"contextCreator.generalSettings.windowTitle"})),lt().createElement(ut.NI,{type:"text",value:i,placeholder:(0,St.S$)(b.messages,"contextCreator.generalSettings.windowTitlePlaceholder"),onChange:function(e){return d("windowTitle",e.target.value)}}))))};var Ot=n(867076),Tt=n(298854),Ct=n(592778),wt=n(80717),xt=n(876424),jt=n(982030),Dt=n(950966);function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(null,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach(function(t){kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ut=function(e){var t=e.items,n=void 0===t?[]:t,r=e.side,o=e.selectedItems,i=void 0===o?[]:o,a=e.selectedSide,l=e.allowCtrlMultiSelect,c=void 0!==l&&l,s=e.onSelect,u=void 0===s?function(){}:s,p=e.isRoot,f=void 0===p||p;return lt().createElement("div",{className:"ms2-transfer-sidegrid"},n.map(function(e,t){var o=e.id&&i.reduce(function(t,n){return t||n.id===e.id},!1);return lt().createElement(xt.Z,Rt({onClick:function(t,n){return f?u(o?i.filter(function(t){return t.id!==e.id}):c&&n.ctrlKey&&r===a?[].concat(function(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i),[e]):[e],r):{}}},e,{key:e.id||t,size:e.cardSize,className:(e.className?"".concat(e.className," "):" ")+(t===n.length-1?"ms2-transfer-lastcard":""),selected:null!=o?o:e.selected,tools:e.tools&&e.tools.length>0?lt().createElement(wt.Z,{buttons:e.tools.map(function(e){return At(At({},e),{},{className:"square-button-md no-border",onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick()}})})}):void 0,preview:e.preview,description:e.showDescriptionTooltip&&e.description?lt().createElement(Dt.Z,{delayShow:e.descriptionTooltipDelay,placement:"top",overlay:lt().createElement(ut.u,{id:e.id},e.description)},lt().createElement("span",null,e.description)):e.description,body:lt().createElement("div",{className:"ms2-transfer-body-container"},e.component&&lt().createElement("div",{className:"ms2-transfer-bodycomponent-container",onClick:function(e){return e.stopPropagation()}},e.component),e.children&&lt().createElement("div",{className:"ms2-transfer-children-container"},lt().createElement(Ut,{items:e.children,side:r,selectedItems:i,selectedSide:a,allowCtrlMultiSelect:c,onSelect:u,isRoot:!1})))}))}))};const _t=(0,jt.Z)(function(e){var t=e.items;return!(void 0===t?[]:t).length},function(e){return e.emptyStateProps})(Ut);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}var Mt=["title","description","children"];function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach(function(t){Bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bt(e,t,n){return(t=function(e){var t=function(e){if("object"!=Zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt=function(e,t){var n=t.title,r=t.description,o=t.children;return Lt(Lt({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Mt)),{},{title:n&&(0,St.S$)(e,n),description:r&&(0,St.S$)(e,r),children:o&&o.map(function(t){return zt(e,t)})})},Vt=function(e,t,n,r,o,i,a,l,c,s){var u=r.items,p=void 0===u?[]:u,f=r.title,d=void 0===f?"":f,m=r.filterText,b=void 0===m?"":m,g=r.filterPlaceholder,y=void 0===g?"":g,v=r.tools,h=void 0===v?[]:v,E=r.emptyStateProps,S=void 0===E?{}:E,P=r.emptyStateSearchProps,O=void 0===P?{}:P,T=r.onFilter,C=void 0===T?function(){}:T;return lt().createElement("div",{className:"ms2-transfer-subpanel ms2-transfer-".concat(n)},lt().createElement("div",{className:"ms2-transfer-header"},lt().createElement("div",{className:"ms2-transfer-title-area"},lt().createElement("h4",null,lt().createElement(ft.Z,{msgId:d}),function(e){return lt().createElement(wt.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:e})}(h))),lt().createElement(Ct.Z,{filterText:b,filterPlaceholder:(0,St.S$)(t,y),onFilter:C})),lt().createElement(_t,{items:c(s(b,p.map(function(n){return e?zt(t,n):n}))),emptyStateProps:zt(t,p.length>0&&b.length>0?O:S),side:n,selectedItems:i,selectedSide:a,allowCtrlMultiSelect:o,messages:t,onSelect:l}))},$t=function(e,t){var n=e.localizeItems,r=void 0!==n&&n,o=e.leftColumn,i=void 0===o?{}:o,a=e.rightColumn,l=void 0===a?{}:a,c=e.allowCtrlMultiSelect,s=void 0!==c&&c,u=e.selectedItems,p=void 0===u?[]:u,f=e.selectedSide,d=e.className,m=e.filter,b=void 0===m?function(e,t){return t}:m,g=e.sortStrategy,y=void 0===g?function(e){return e}:g,v=e.onSelect,h=void 0===v?function(){}:v,E=e.onTransfer,S=void 0===E?function(){}:E,P=e.moveButtons,O=void 0===P?[{id:"all-right",label:">>",disabled:!i.items||(i.emptyTest?i.emptyTest(i.items):!i.items.length),onClick:function(){S(i.items,"right"),h([])}},{id:"right",label:">",disabled:"left"!==f||!p||!p.length,onClick:function(){S(p,"right"),h([])}},{id:"left",label:"<",disabled:"right"!==f||!p||!p.length,onClick:function(){S(p,"left"),h([])}},{id:"all-left",label:"<<",disabled:!l.items||(l.emptyTest?l.emptyTest(l.items):!l.items.length),onClick:function(){S(l.items,"left"),h([])}}]:P;return lt().createElement("div",{className:"ms2-transfer".concat(d?" "+d:"")},Vt(r,t.messages,"left",i,s,p,f,h,y,b),function(e){return lt().createElement(ut.hE,{vertical:!0},e.map(function(e,t){var n=e.id,r=e.label,o=e.onClick,i=void 0===o?function(){}:o,a=e.disabled;return lt().createElement(pt.Z,{key:n||t,bsStyle:"primary",className:"square-button-md",disabled:a,onClick:i},r)}))}(O),Vt(r,t.messages,"right",l,s,p,f,h,y,b))};$t.contextTypes={messages:st().object};const Wt=$t;var Ht=n(694745),Jt=n(90085),Yt=n(559407),Xt=n(618446),Kt=n.n(Xt);const qt=(0,Ot.compose)((0,Ot.withState)("newGroup","onNewGroupChoose"),(0,Ot.withState)("newPermission","onNewPermissionChoose"));var Qt={FORMAT:"map.errorFormat",SIZE:"map.errorSize",409:"dashboard.errors.resourceAlreadyExists",403:"dashboard.errors.forbidden",405:"dashboard.errors.forbidden405"},en=function(e){return"string"==typeof e?e:e.statusText||e.message},tn=function(e){return"string"==typeof e?void 0:e};const nn=function(e){var t=e.errors,n=void 0===t?[]:t;return lt().createElement(ut.X2,null,n.length>0?lt().createElement("div",{className:"dropzone-errorBox alert-danger"},n.map(function(e){return lt().createElement("div",{key:"error"+en(e),className:"error"+en(e)},function(e){var t,n="string"==typeof(t=e)?t:t.status;return lt().createElement(ft.Z,{msgId:Qt[n]||en(e),msgParams:tn(e)})}(e))})):null)};var rn=n(423570),on=n.n(rn),an=n(855033),ln=n.n(an);const cn=function(e){var t=e.acceptedFileName,n=e.label,r=e.status,o=void 0===r?"clear":r,i=e.errorMessage,a=e.clearMessage,l=e.onDrop,c=void 0===l?function(){}:l,s=e.onClear,u=void 0===s?function(){}:s,p=e.onError,f=void 0===p?function(){}:p;return lt().createElement("div",{className:"dropzone-filedrop-container"},lt().createElement("label",{className:"control-label"},lt().createElement(ft.Z,{msgId:n})),lt().createElement(ln(),{multiple:!1,className:"dropzone alert alert-info".concat("accepted"===o?" filedrop-accepted":""),rejectClassName:"alert-danger",onDrop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,[f].concat(t))}},"accepted"===o&&lt().createElement("div",{className:"dropzone-filedrop-remove",onClick:function(e){e.stopPropagation(),u()}},lt().createElement(ut.gG,{glyph:"remove"})),lt().createElement("div",{className:"dropzone-content"},lt().createElement(ut.gG,{glyph:"clear"===o?"upload":"accepted"===o?"ok-circle":"remove-circle"}),"accepted"===o?lt().createElement("span",null,t):null,"rejected"===o?i:null,"clear"===o?a:null)))};var sn=n(730381),un=n.n(sn),pn=n(993451);function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vn(r.key),r)}}function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mn=function(){return!!e})()}function bn(e){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bn(e)}function gn(e,t){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gn(e,t)}function yn(e,t,n){return(t=vn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e){var t=function(e){if("object"!=fn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fn(t)?t:t+""}var hn=(0,pn.Z)("placeholder")(ut.NI),En=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return yn(e=function(e,t,n){return t=bn(t),function(e,t){if(t&&("object"==fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mn()?Reflect.construct(t,n||[],bn(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"renderDate",function(t){if(!t)return"";var n=a.ZP.getConfigProp("forceDateFormat"),r=a.ZP.getConfigProp("forceTimeFormat"),o=n?un()(t).format(n):e.context.intl?e.context.intl.formatDate(t):"",i=r?un()(t).format(r):e.context.intl?e.context.intl.formatTime(t):"";return"".concat(o," ").concat(i)||""}),yn(e,"changeName",function(t){e.props.onChange("metadata.name",e.props.nameFieldFilter(t.target.value)||t.target.value)}),yn(e,"changeDescription",function(t){e.props.onChange("metadata.description",t.target.value)}),yn(e,"changeTitle",function(t){e.props.onChange("attributes.title",t.target.value)}),yn(e,"changeAdvertised",function(t){e.props.onChange("metadata.advertised",!t.target.checked)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n=f()(this.props.resource,"attributes.title","");return lt().createElement("form",{ref:"metadataForm",onSubmit:this.handleSubmit},lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.nameFieldText),lt().createElement(hn,{key:"mapName",type:"text",onChange:this.changeName,disabled:this.props.resource.saving,placeholder:this.props.namePlaceholderText,defaultValue:this.props.resource?this.props.resource.name:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.name||""})),!!n&&lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.titleFieldText),lt().createElement(hn,{key:"mapTitle",type:"text",onChange:this.changeTitle,disabled:this.props.resource.saving,placeholder:this.props.titlePlaceholderText,defaultValue:n,value:n})),lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.descriptionFieldText),lt().createElement(hn,{key:"mapDescription",type:"text",onChange:this.changeDescription,disabled:this.props.resource.saving,placeholder:this.props.descriptionPlaceholderText,defaultValue:this.props.resource?this.props.resource.description:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.description||""})),this.props.resource&&this.props.resource.creator&&lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.creatorFieldText),lt().createElement(ut.J$,null,this.props.resource.creator)),this.props.resource&&this.props.resource.createdAt&&lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.createdAtFieldText),lt().createElement(ut.J$,null,this.props.resource&&this.renderDate(this.props.resource.createdAt)||"")),this.props.resource&&this.props.resource.editor&&lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.editorFieldText),lt().createElement(ut.J$,null,this.props.resource.editor)),this.props.resource&&this.props.resource.createdAt&&lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.modifiedAtFieldText),lt().createElement(ut.J$,null,this.props.resource&&this.renderDate(this.props.resource.modifiedAt||this.props.resource.createdAt)||"")),lt().createElement(ut.cw,null,lt().createElement(ut.J$,null,this.props.unadvertisedText),lt().createElement(ut.XZ,{checked:!(null!==(e=this.props.resource)&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.advertised),onChange:this.changeAdvertised,"aria-label":"advertisedResource"})))}}])&&dn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt().Component);yn(En,"propTypes",{resource:st().object,onChange:st().func,nameFieldText:st().node,titleFieldText:st().node,descriptionFieldText:st().node,nameFieldFilter:st().func,namePlaceholderText:st().string,descriptionPlaceholderText:st().string,titlePlaceholderText:st().string,createdAtFieldText:st().string,modifiedAtFieldText:st().string,unadvertisedText:st().string,creatorFieldText:st().string,editorFieldText:st().string}),yn(En,"contextTypes",{intl:st().object}),yn(En,"defaultProps",{onChange:function(){},resource:{},nameFieldText:"Name",descriptionFieldText:"Description",nameFieldFilter:function(){},namePlaceholderText:"Map Name",descriptionPlaceholderText:"Map Description",unadvertisedText:"Unadvertised",creatorFieldText:"Creator",editorFieldText:"Editor"});const Sn=En;var Pn=n(314068);function On(e){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dn(r.key),r)}}function Cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Cn=function(){return!!e})()}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wn(e)}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function jn(e,t,n){return(t=Dn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e){var t=function(e){if("object"!=On(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=On(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==On(t)?t:t+""}var Nn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return jn(e=function(e,t,n){return t=wn(t),function(e,t){if(t&&("object"==On(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cn()?Reflect.construct(t,n||[],wn(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"state",{}),jn(e,"getThumbnailUrl",function(){return e.props.thumbnail&&"NODATA"!==e.props.thumbnail?decodeURIComponent(e.props.thumbnail):null}),jn(e,"getDataUri",function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result)},o.readAsDataURL(r)}return t(null)}),jn(e,"getThumbnailDataUri",function(t){e.getDataUri(e.files,t)}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return lt().createElement(Pn.Z,{thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,message:lt().createElement(lt().Fragment,null,this.props.message,lt().createElement("br",null),this.props.suggestion),maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.resource.saving?"none":"auto"},label:lt().createElement("label",{className:"control-label"},lt().createElement(ft.Z,{msgId:"map.thumbnail"})),onUpdate:function(t,n){var r;e.props.onError([],e.props.resource.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.resource.id),e.files=n},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemove(),e.props.onError([],e.props.resource.id)}})}}])&&Tn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt().Component);jn(Nn,"propTypes",{glyphiconRemove:st().string,style:st().object,loading:st().bool,resource:st().object,thumbnail:st().string,onError:st().func,onUpdate:st().func,onRemove:st().func,maxFileSize:st().number,message:st().oneOfType([st().string,st().element]),suggestion:st().oneOfType([st().string,st().element])}),jn(Nn,"contextTypes",{messages:st().object}),jn(Nn,"defaultProps",{loading:!1,glyphiconRemove:"trash",resource:{},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemove:function(){},message:lt().createElement(ft.Z,{msgId:"map.message"}),suggestion:lt().createElement(ft.Z,{msgId:"map.suggestion"}),maxFileSize:5e5});const Rn=Nn;function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kn(r.key),r)}}function kn(e){var t=function(e){if("object"!=In(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==In(t)?t:t+""}function Fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fn=function(){return!!e})()}function Un(e){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Un(e)}function _n(e,t){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_n(e,t)}var Zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=Un(t),function(e,t){if(t&&("object"==In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fn()?Reflect.construct(t,n||[],Un(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_n(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.resource,n=e.linkedResources,r=void 0===n?{}:n,o=e.enableFileDrop,i=void 0!==o&&o,a=e.acceptedDropFileName,l=e.fileDropLabel,c=e.fileDropStatus,s=e.fileDropErrorMessage,u=e.fileDropClearMessage,p=e.onFileDrop,f=void 0===p?function(){}:p,d=e.onFileDropClear,m=void 0===d?function(){}:d,b=e.onError,g=void 0===b?function(){}:b,y=e.onUpdate,v=void 0===y?function(){}:y,h=e.nameFieldFilter,E=void 0===h?function(){}:h,S=e.onUpdateLinkedResource,P=void 0===S?function(){}:S;return lt().createElement(ut.X2,null,i&&lt().createElement(ut.JX,{xs:12},lt().createElement(cn,{acceptedFileName:a,label:l,status:c,errorMessage:s,clearMessage:u,onDrop:f,onClear:m,onError:g})),lt().createElement(ut.JX,{xs:12},lt().createElement(Rn,{resource:t,thumbnail:r&&r.thumbnail&&r.thumbnail.data||t&&t.attributes&&t.attributes.thumbnail,onError:g,onRemove:function(){return P("thumbnail","NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(on()())})},onUpdate:function(e){return P("thumbnail",e||"NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(on()())})}})),lt().createElement(ut.JX,{xs:12},lt().createElement(Sn,{role:"body",ref:"mapMetadataForm",onChange:v,resource:t,nameFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.name"}),titleFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.titleInput"}),descriptionFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.description"}),nameFieldFilter:E,createdAtFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.createdAt"}),modifiedAtFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.modifiedAt"}),namePlaceholderText:"saveDialog.namePlaceholder",descriptionPlaceholderText:"saveDialog.descriptionPlaceholder",titlePlaceholderText:"saveDialog.titlePlaceholder",unadvertisedText:lt().createElement(ft.Z,{msgId:"saveDialog.unadvertised"}),creatorFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.creator"}),editorFieldText:lt().createElement(ft.Z,{msgId:"saveDialog.editor"})})))}}])&&An(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt().Component);const Mn=Zn;var Gn=n(727418),Ln=n.n(Gn),Bn=n(743129),zn=n(233044);function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xn(r.key),r)}}function Wn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Wn=function(){return!!e})()}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}function Jn(e,t){return Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jn(e,t)}function Yn(e,t,n){return(t=Xn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xn(e){var t=function(e){if("object"!=Vn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Vn(t)?t:t+""}var Kn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Yn(e=function(e,t,n){return t=Hn(t),function(e,t){if(t&&("object"==Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wn()?Reflect.construct(t,n||[],Hn(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"onGroupChange",function(t){e.props.onNewGroupChoose(E()(e.props.availableGroups,function(e){return e.id===t.value}))}),Yn(e,"onAddPermission",function(){e.isPermissionPresent(e.props.newGroup.groupName)?e.props.onUpdateRules(e.props.rules.map(function(t){return t.group&&t.group.groupName===e.props.newGroup.groupName?"canWrite"===e.props.newPermission?Ln()({},t,{canRead:!0,canWrite:!0}):Ln()({},t,{canRead:!0,canWrite:!1}):t},e).filter(function(e){return e.canRead||e.canWrite})):e.props.onUpdateRules(e.props.rules.concat([{canRead:!0,canWrite:"canWrite"===e.props.newPermission,group:e.props.newGroup}]))}),Yn(e,"onChangePermission",function(t,n){e.props.onUpdateRules(e.props.rules.filter(function(e){return!("delete"===n&&e.group&&e.group.groupName===t)}).map(function(e){return e.group&&e.group.groupName===t?"canWrite"===n?Ln()({},e,{canRead:!0,canWrite:!0}):"canRead"===n?Ln()({},e,{canRead:!0,canWrite:!1}):Ln()({},e,{canRead:!1,canWrite:!1}):e}).filter(function(e){return e.canRead||e.canWrite}))}),Yn(e,"getCurrentPermission",function(){return e.props.newPermission||v()(e.props.availablePermissions)}),Yn(e,"getSelectableGroups",function(){return e.props.availableGroups&&e.props.availableGroups.filter(function(t){return!e.isPermissionPresent(t.groupName)}).filter(function(t){return"canWrite"!==e.getCurrentPermission()||t.groupName!==zn.default.USER_GROUP_ALL}).map(function(e){return{label:e.groupName,value:e.id}})}),Yn(e,"getPermissionLabel",function(t){switch(t){case"canRead":return(0,St.S$)(e.context.messages,"map.permissions.canView");case"canWrite":return(0,St.S$)(e.context.messages,"map.permissions.canWrite");default:return t}}),Yn(e,"getAvailablePermissions",function(t){return e.props.availablePermissions.map(function(t){return{value:t,label:e.getPermissionLabel(t)}}).filter(function(n){var r;return(null!=t?t:null===(r=e.props.newGroup)||void 0===r?void 0:r.groupName)!==zn.default.USER_GROUP_ALL||"canWrite"!==n.value})}),Yn(e,"renderPermissionRows",function(){var t=e.props.rules.filter(function(e){return e.group});return 0===t.length?lt().createElement("tr",null,lt().createElement("td",{colSpan:"3"},lt().createElement(ft.Z,{msgId:"map.permissions.noRules"}))):t.map(function(t,n){var r=t.canWrite,o=t.group;return lt().createElement("tr",{key:n,className:n/2==0?"even":"odd"},lt().createElement("td",null,o.groupName),lt().createElement("td",{style:{width:"150px"}},lt().createElement(Bn.ZP,{ref:"permChoice"+n,onChange:function(t){e.onChangePermission.call(e,o.groupName,t.value)},clearable:!1,options:e.getAvailablePermissions(o.groupName),value:r?"canWrite":"canRead"})),lt().createElement("td",{style:{width:"50px"}},lt().createElement(pt.Z,{key:"deleteButton"+n,ref:"deleteButton",bsStyle:"danger",disabled:e.props.disabled,onClick:e.onChangePermission.bind(e,o.groupName,"delete")},lt().createElement(ut.gG,{glyph:"1-close"}))))})}),Yn(e,"isPermissionPresent",function(t){return e.props.rules&&q()(e.props.rules,function(e){return e.group&&e.group.groupName===t})>=0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return lt().createElement("div",null,lt().createElement(ut.iA,{className:"permissions-table",stripped:!0,condensed:!0,hover:!0},lt().createElement("thead",null,lt().createElement("tr",null,lt().createElement("th",{colSpan:"3"},lt().createElement(ft.Z,{msgId:"map.permissions.title"})))),lt().createElement("tbody",null,this.props.loading?lt().createElement("tr",null,lt().createElement("td",{colSpan:"3"},lt().createElement("div",null,lt().createElement(Et(),{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:"circle"})))):this.renderPermissionRows(),lt().createElement("tr",null,lt().createElement("th",{colSpan:"3"},lt().createElement(ft.Z,{msgId:"map.permissions.addRule"}))),lt().createElement("tr",{key:"addRowKey",className:"insert-row"},lt().createElement("td",null,lt().createElement(Bn.ZP,{noResultsText:(0,St.S$)(this.context.messages,"map.permissions.noResult"),ref:"newGroup",isLoading:!this.getSelectableGroups(),clearable:!1,placeholder:(0,St.S$)(this.context.messages,"map.permissions.selectGroup"),options:this.getSelectableGroups(),value:this.props.newGroup&&this.props.newGroup.id,onChange:this.onGroupChange})),lt().createElement("td",{style:{width:"150px"}},lt().createElement(Bn.ZP,{ref:"newChoice",clearable:!1,options:this.getAvailablePermissions(),value:this.getCurrentPermission(),onChange:function(t){e.props.onNewPermissionChoose(t&&t.value)}})),lt().createElement("td",{style:{width:"50px"}},lt().createElement(pt.Z,{ref:"buttonAdd",disabled:this.props.disabled||!this.props.newGroup||this.isPermissionPresent(this.props.newGroup&&this.props.newGroup.groupName),bsSize:"small",bsStyle:"success",onClick:this.onAddPermission},lt().createElement(ut.gG,{style:{fontSize:"22px"},glyph:"plus"})))))))}},{key:"disablePermission",value:function(e,t){return e||!t}}])&&$n(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt().Component);Yn(Kn,"propTypes",{id:st().string,user:st().object,loading:st().bool,onUpdateRules:st().func,buttonSize:st().string,disabled:st().bool,style:st().object,fluid:st().bool,onErrorCurrentMap:st().func,onUpdateCurrentMap:st().func,onNewGroupChoose:st().func,onNewPermissionChoose:st().func,availablePermissions:st().arrayOf(st().string),availableGroups:st().arrayOf(st().object),updatePermissions:st().func,rules:st().arrayOf(st().object),newGroup:st().object,newPermission:st().string}),Yn(Kn,"contextTypes",{messages:st().object}),Yn(Kn,"defaultProps",{disabled:!1,id:"PermissionEditor",onUpdateRules:function(){},onNewGroupChoose:function(){},onNewPermissionChoose:function(){},user:{name:"Guest"},style:{},buttonSize:"small",onErrorCurrentMap:function(){},onUpdateCurrentMap:function(){},availablePermissions:["canRead","canWrite"],availableGroups:[],updatePermissions:function(){},rules:[]});const qn=Kn;function Qn(e){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qn(e)}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){ar(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lr(r.key),r)}}function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rr=function(){return!!e})()}function or(e){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},or(e)}function ir(e,t){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ir(e,t)}function ar(e,t,n){return(t=lr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e){var t=function(e){if("object"!=Qn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qn(t)?t:t+""}var cr=(0,n(218291).Z)()((0,at.lazy)(function(){return Promise.all([n.e(82515),n.e(17671),n.e(84592)]).then(n.bind(n,684592))})),sr=qt(qn),ur=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ar(e=function(e,t,n){return t=or(t),function(e,t){if(t&&("object"==Qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rr()?Reflect.construct(t,n||[],or(e).constructor):t.apply(e,n))}(this,t,[].concat(r)),"onCloseMapPropertiesModal",function(){e.props.onClose()}),ar(e,"onSave",function(){e.setState({loading:!0}),e.props.onSave(tr(tr({},e.props.resource),{},{permission:e.props.rules}))}),ar(e,"isValidForm",function(){return f()(e.props.resource,"metadata.name")&&(!e.props.enableFileDrop||"accepted"===e.props.fileDropStatus)}),ar(e,"isLoading",function(){var t,n;return e.props.loading||(null===(t=e.props.resource)||void 0===t?void 0:t.loading)||(null===(n=e.state)||void 0===n?void 0:n.loading)}),ar(e,"isSaveDisabled",function(){return!e.isValidForm()||e.isLoading()||!e.props.canSave}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(t,e),n=t,r=[{key:"componentDidUpdate",value:function(e){var t;this.props.errors&&this.props.errors.length>0&&!Kt()(this.props.errors,e.errors)&&null!==(t=this.state)&&void 0!==t&&t.loading&&this.setState({loading:!1})}},{key:"render",value:function(){var e,t=this,n=!this.props.disablePermission&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var n=e.role,r=e.name;if("ADMIN"===n)return!0;var o=t&&t.attributes&&t.attributes.owner;return!o||o===r}(this.props.user,this.props.resource),r=this.props.detailsComponent;return lt().createElement(bt.Z,{key:"saveDialog"},lt().createElement(Ht.Z,{loading:this.props.loading||(null===(e=this.state)||void 0===e?void 0:e.loading),title:lt().createElement(ft.Z,{msgId:this.props.title}),show:this.props.show,clickOutEnabled:this.props.clickOutEnabled,bodyClassName:"ms-flex modal-properties-container",fitContent:this.props.disablePermission,dialogClassName:this.props.dialogClassName,buttons:[{text:lt().createElement(ft.Z,{msgId:"close"}),onClick:this.onCloseMapPropertiesModal,disabled:this.isLoading()},{text:lt().createElement("span",null,lt().createElement(ft.Z,{msgId:this.props.saveButtonLabel})),onClick:function(){t.onSave()},disabled:this.isSaveDisabled()}],showClose:!this.isLoading(),onClose:this.onCloseMapPropertiesModal},lt().createElement(ut.rj,{fluid:!0},lt().createElement("div",{className:"ms-map-properties"},lt().createElement(nn,{errors:this.props.errors}),lt().createElement(Mn,{resource:this.props.resource,onUpdateLinkedResource:this.props.onUpdateLinkedResource,linkedResources:this.props.linkedResources,enableFileDrop:this.props.enableFileDrop,acceptedDropFileName:this.props.acceptedDropFileName,fileDropLabel:this.props.fileDropLabel,fileDropStatus:this.props.fileDropStatus,fileDropErrorMessage:this.props.fileDropErrorMessage,fileDropClearMessage:this.props.fileDropClearMessage,onMetadataChanged:this.props.metadataChanged,onFileDrop:this.props.onFileDrop,onFileDropClear:this.props.onFileDropClear,onError:this.props.onError,nameFieldFilter:this.props.nameFieldFilter,onUpdate:this.props.onUpdate}),this.props.enableDetails&&lt().createElement(r,{editor:this.props.detailsEditor,editorProps:this.props.detailsEditorProps,loading:this.props.loading,resource:this.props.resource,linkedResources:this.props.linkedResources,onUpdateResource:this.props.onUpdate,onUpdateLinkedResource:this.props.onUpdateLinkedResource}),!!n&&lt().createElement(sr,{rules:this.props.rules,onUpdateRules:this.props.onUpdateRules,availableGroups:this.props.availableGroups})))))}}],r&&nr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt().Component);ar(ur,"propTypes",{show:st().bool,loading:st().bool,title:st().string,clickOutEnabled:st().bool,canSave:st().bool,errors:st().array,rules:st().array,enableFileDrop:st().bool,saveButtonLabel:st().string,onSave:st().func,acceptedDropFileName:st().string,fileDropLabel:st().string,fileDropStatus:st().string,fileDropErrorMessage:st().element,fileDropClearMessage:st().element,onUpdateRules:st().func,nameFieldFilter:st().func,resource:st().object,linkedResources:st().object,style:st().object,modalSize:st().string,enableDetails:st().bool,detailsComponent:st().func,detailsEditor:st().string,detailsEditorProps:st().object,onError:st().func,onUpdate:st().func,onUpdateLinkedResource:st().func,onClose:st().func,onFileDrop:st().func,onFileDropClear:st().func,metadataChanged:st().func,disablePermission:st().bool,availablePermissions:st().arrayOf(st().string),availableGroups:st().arrayOf(st().object),user:st().object,dialogClassName:st().string}),ar(ur,"contextTypes",{messages:st().object}),ar(ur,"defaultProps",{id:"MetadataModal",title:"saveDialog.title",saveButtonLabel:"save",modalSize:"",resource:{},linkedResources:{},onUpdateRules:function(){},nameFieldFilter:function(){},metadataChanged:function(){},metadata:{name:"",description:""},options:{},style:{},onClose:function(){},onError:function(){},onUpdate:function(){},onUpdateLinkedResource:function(){},onDeleteLinkedResource:function(){},onSave:function(){},disablePermission:!1,availablePermissions:["canRead","canWrite"],availableGroups:[],canSave:!0,user:{},dialogClassName:"",detailsComponent:n(507299).Z(cr)});const pr=ur;var fr=n(352353),dr=n.n(fr),mr=n(962909);function br(e){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach(function(t){vr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vr(e,t,n){return(t=function(e){var t=function(e){if("object"!=br(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==br(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hr=(0,Ot.compose)((0,Ot.withStateHandlers)(function(e){var t,n=e.resource,r=void 0===n?{}:n,o=e.linkedResources,i=void 0===o?{}:o,a=e.user,l=void 0===a?{}:a,c=r.detailsSettings||(null===(t=r.attributes)||void 0===t?void 0:t.detailsSettings),s={};if(ne()(c))try{s=JSON.parse(c)}catch(e){s={}}else s=c||{};return{originalData:r,metadata:{name:r.name,description:r.description},attributes:yr(yr({},r.attributes),{},{context:r.context||r.attributes&&r.attributes.context,detailsSettings:s}),resource:{id:r.id,attributes:yr(yr({},r.attributes),{},{context:r.context||r.attributes&&r.attributes.context,detailsSettings:s}),metadata:{name:r.name,description:r.description,advertised:!!dr()(r.advertised)||r.advertised},createdAt:r.creation,modifiedAt:r.lastUpdate,creator:"ADMIN"===(null==l?void 0:l.role)?r.creator:"",editor:"ADMIN"===(null==l?void 0:l.role)?r.editor:""},linkedResources:i}},{onUpdate:function(e){var t=e.resource;return function(e,n){return{hasChanges:!0,resource:(0,O.t8)(e,n,t)}}},onUpdateLinkedResource:function(e){var t=e.linkedResources,n=void 0===t?{}:t;return function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{linkedResources:(0,O.t8)(e,yr({category:r,data:t},o),n)}}}}),(0,Ot.withState)("confirmClose","onCloseConfirm",!1),(0,Ot.branch)(function(e){return e.confirmClose},(0,Ot.renderComponent)(function(e){var t=e.onCloseConfirm,n=e.onClose;return lt().createElement(mr.Z,{show:!0,confirmText:lt().createElement(ft.Z,{msgId:"saveDialog.close"}),cancelText:lt().createElement(ft.Z,{msgId:"saveDialog.cancel"}),onConfirm:function(){return n()},onClose:function(){return t(!1)}},lt().createElement(ft.Z,{msgId:"map.details.fieldsChanged"}),lt().createElement("br",null),lt().createElement(ft.Z,{msgId:"map.details.sureToClose"}))})),(0,Ot.withHandlers)({onClose:function(e){var t=e.hasChanges,n=e.onClose,r=void 0===n?function(){}:n,o=e.onCloseConfirm,i=void 0===o?function(){}:o;return function(){return t?i(!0):r()}}}),(0,Ot.withHandlers)({onSave:function(e){var t=e.onSave,n=void 0===t?function(){}:t,r=e.category,o=void 0===r?"DASHBOARD":r,i=e.data,a=e.additionalAttributes,l=void 0===a?{}:a,c=e.linkedResources;return function(e){return n(yr(yr({category:o,linkedResources:c,data:i},e),{},{attributes:yr(yr({},e.attributes),l)}))}}}));function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach(function(t){Or(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Or(e,t,n){return(t=function(e){var t=function(e){if("object"!=Er(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Er(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tr=(0,Ot.withStateHandlers)(function(){return{}},{onUpdateRules:function(){return function(e){return{rules:e}}}});function Cr(e){return function(e){if(Array.isArray(e))return wr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const xr=(0,Ot.compose)((0,Ot.withStateHandlers)(function(){return{}},{onError:function(){return function(e){return{formErrors:e}}}}),(0,Ot.withProps)(function(e){var t=e.errors,n=void 0===t?[]:t,r=e.formErrors,o=void 0===r?[]:r;return{errors:[].concat(Cr(n),Cr(o))}}));var jr=n(552259);function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach(function(t){Ir(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ir(e,t,n){return(t=function(e){var t=function(e){if("object"!=Dr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ar=(0,Ot.mapPropsStream)(function(e){return e.combineLatest(e.filter(function(e){var t=e.resource;return t&&t.id}).distinctUntilChanged(function(e,t){var n=e.resource,r=t.resource;return n.id===r.id}).switchMap(function(e){var t,n,r;return(n=null===(t=e.resource.attributes)||void 0===t?void 0:t.details,r=jr.ZP.getIdFromUri(n),G().Observable.defer(function(){return r?ae.Z.getData(r):Promise.resolve()})).map(function(t){var n=Rr(Rr({},e.linkedResources||{}),{},{details:{category:"DETAILS",data:t||"NODATA"}});return e.onResourceLoad&&e.onResourceLoad(e.resource,n),{loading:!1,resource:e.resource,linkedResources:n}}).catch(function(e){return G().Observable.of({loading:!1,errors:[e]})}).startWith({loading:!0,resource:!1})}).startWith({}),function(e,t){return Rr(Rr({},e),t)})});var kr=(0,Ot.compose)(hr,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae.Z;return(0,Ot.branch)(function(e){return!e.disablePermission},(0,Ot.compose)(function(e){return(0,Ot.mapPropsStream)(function(t){return t.combineLatest(t.take(1).switchMap(function(t){var n=t.user;return G().Observable.defer(function(){return e.getAvailableGroups(n)}).map(function(e){return{availableGroups:e}}).startWith({loading:!0})}).startWith({}).catch(function(){return G().Observable.of({})}),function(e,t){return Pr(Pr({},e),t)})})}(e),function(e){return(0,Ot.mapPropsStream)(function(t){return t.combineLatest(t.distinctUntilKeyChanged("resource").pluck("resource").filter(function(e){return e.id}).pluck("id").distinctUntilChanged().switchMap(function(t){return G().Observable.defer(function(){return e.getResourcePermissions(t)}).map(function(e){return{rules:e}}).startWith({loading:!0})}).startWith({}).catch(function(){return G().Observable.of({})}),function(e,t){return Pr(Pr({},e),t)})})}(e),Tr))}(),xr);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach(function(t){Zr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Zr(e,t,n){return(t=function(e){var t=function(e){if("object"!=Fr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Lr=(0,Ot.compose)((0,Ot.branch)(function(e){return!e.show},Ot.renderNothing),(0,Ot.branch)(function(e){return!e.isNewResource},(0,Ot.compose)(Ar,(0,Ot.branch)(function(e){var t=e.resource;return t&&t.id},kr)),kr))(pr),Br=function(e,t,n){return{id:n.id,title:n.name||n.id.toString(),description:n.description,tools:[{glyph:"pencil",tooltipId:"contextCreator.configureTemplates.tooltips.editTemplate",onClick:function(){return e(n.id)}},{glyph:"trash",tooltipId:"contextCreator.configureTemplates.tooltips.deleteTemplate",onClick:function(){return t(n)}}],preview:lt().createElement("div",{className:"configure-map-templates-preview"},n.thumbnail&&"NODATA"!==n.thumbnail?lt().createElement("img",{src:n.thumbnail}):lt().createElement(ut.gG,{glyph:"1-map"})),infoExtra:n.format&&lt().createElement("div",{className:"configure-map-templates-formaticon"},lt().createElement(ut.gG,{glyph:Yt.Th[n.format]}),lt().createElement("span",null,Yt.Nk[n.format]))}},zr=function(e){return e&&e.map(function(e){return e.id})},Vr=function(e,t,n,r,o,i){ne()(r)&&ne()(i)&&(r.indexOf("application/xml")>-1||r.indexOf("text/xml")>-1||0===i.indexOf("<?xml")?(e(o,i,"wmc"),t("accepted"),n([])):function(){try{var r=B().parse(i);e(o,r,"json"),t("accepted"),n([])}catch(e){t("clear"),n([{statusText:"contextCreator.configureTemplates.uploadDialog.jsonParsingError",error:e.message}])}}())},$r=function(e,t,n,r){if(r&&r.length>0){var o=new FileReader;o.onload=function(o){return Vr(e,t,n,r[0].type,r[0].name,o.target.result)},o.onerror=function(){o.abort(),t("clear"),n(["contextCreator.configureTemplates.uploadDialog.fileReadError"])},o.readAsText(r[0])}};const Wr=function(e){var t=e.user,n=e.loading,r=e.loadFlags,o=e.mapTemplates,i=void 0===o?[]:o,a=e.availableTemplatesFilterText,l=void 0===a?"":a,c=e.enabledTemplatesFilterText,s=void 0===c?"":c,u=e.availableTemplatesFilterPlaceholder,p=void 0===u?"contextCreator.configureTemplates.templatesFilterPlaceholder":u,d=e.enabledTemplatesFilterPlaceholder,m=void 0===d?"contextCreator.configureTemplates.templatesFilterPlaceholder":d,b=e.showUploadDialog,y=void 0!==b&&b,v=e.parsedTemplate,h=void 0===v?{}:v,E=e.editedTemplate,S=e.fileDropStatus,P=e.changeTemplatesKey,O=void 0===P?function(){}:P,T=e.setSelectedTemplates,C=void 0===T?function(){}:T,w=e.setParsedTemplate,x=void 0===w?function(){}:w,j=e.setFileDropStatus,D=void 0===j?function(){}:j,N=e.onSave,R=void 0===N?function(){}:N,I=e.onDelete,A=void 0===I?function(){}:I,k=e.onEditTemplate,F=void 0===k?function(){}:k,U=e.onFilterAvailableTemplates,_=void 0===U?function(){}:U,Z=e.onFilterEnabledTemplates,M=void 0===Z?function(){}:Z,G=e.onShowUploadDialog,L=void 0===G?function(){}:G,B=Mr(lt().useState(!1),2),z=B[0],V=B[1],$=Mr(lt().useState(),2),W=$[0],H=$[1],J=Br.bind(null,F,function(e){H(e),V(!0)});return lt().createElement(lt().Fragment,null,lt().createElement(Wt,{className:"configure-map-templates-transfer",leftColumn:{items:i.filter(function(e){return!e.enabled}).map(J),title:"contextCreator.configureTemplates.availableTemplates",tools:[{id:"upload-tool",glyph:"upload",tooltipId:"contextCreator.configureTemplates.tooltips.uploadTool",onClick:function(){return F()}}],filterText:l,filterPlaceholder:p,emptyStateProps:{glyph:"1-map",title:"contextCreator.configureTemplates.availableTemplatesEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configureTemplates.searchResultsEmpty"},onFilter:_},rightColumn:{items:i.filter(function(e){return e.enabled}).map(J),title:"contextCreator.configureTemplates.enabledTemplates",filterText:s,filterPlaceholder:m,emptyStateProps:{glyph:"1-map",title:"contextCreator.configureTemplates.enabledTemplatesEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configureTemplates.searchResultsEmpty"},onFilter:M},allowCtrlMultiSelect:!0,selectedItems:i.filter(function(e){return e.selected}).map(J),selectedSide:i.reduce(function(e,t){return t.selected&&t.enabled||e},!1)?"right":"left",sortStrategy:function(e){return e.slice().sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})},filter:function(e,t){return t.filter(function(t){return t.title.toLowerCase().indexOf(e.toLowerCase())>-1})},onSelect:function(e){return C(zr(e))},onTransfer:function(e,t){return O(zr(e),"enabled","right"===t)}}),lt().createElement(Lr,{user:t,loading:n&&(r.templateSaving||r.templateLoading),resource:E,isNewResource:!E,clickOutEnabled:!1,category:"TEMPLATE",show:y,title:E?void 0:"contextCreator.configureTemplates.uploadDialog.title",data:h.data,additionalAttributes:{format:h.format},enableFileDrop:!0,acceptedDropFileName:h.fileName,fileDropStatus:S,fileDropLabel:"contextCreator.configureTemplates.fileDrop.label",fileDropClearMessage:lt().createElement(ft.Z,{msgId:"contextCreator.configureTemplates.fileDrop.clear"}),dialogClassName:" modal-higher",onFileDrop:$r.bind(null,x,D),onFileDropClear:function(){x(),D()},onSave:function(e){var t=e.attributes.format;return t||(ne()(e.data)?Vr(function(e,n,r){t=r},function(){},function(){},"application/text",h.fileName,e.data):g()(e.data)&&(t="json")),R(_r(_r({},e),{},{metadata:_r(_r({},e.metadata),{},{attributes:_r(_r({},e.attributes.thumbnail?{thumbnail:encodeURIComponent(e.attributes.thumbnail)}:{}),t?{format:t}:{})})}))},onClose:function(){return L(!1)}}),lt().createElement(mt.Z,{draggable:!1,modal:!0,show:z,onClose:function(){H(),V(!1)},onConfirm:function(){A(W),H(),V(!1)},confirmButtonBSStyle:"default",confirmButtonContent:lt().createElement(ft.Z,{msgId:"confirm"}),closeText:lt().createElement(ft.Z,{msgId:"cancel"}),closeGlyph:"1-close"},lt().createElement(ft.Z,{msgId:"contextCreator.configureTemplates.deleteConfirm",msgParams:{templateName:f()(W,"name")}})))};var Hr=["tutorialMode","tutorialStep"];function Jr(){return Jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jr.apply(null,arguments)}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xr,Kr=[{name:"TestPlugin1",title:"contextCreator.configurePlugins.tutorialPlugins.enabledTitle",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!0,active:!1},{name:"TestPlugin2",title:"contextCreator.configurePlugins.tutorialPlugins.availableTitle",description:"contextCreator.configurePlugins.tutorialPlugins.availableDescription",isExtension:!1,enabled:!1},{name:"TestPlugin3",title:"contextCreator.configurePlugins.tutorialPlugins.availableTitle",description:"contextCreator.configurePlugins.tutorialPlugins.availableDescription",isExtension:!0,enabled:!1},{name:"MapTemplates",title:"Map Templates",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!1}],qr={"configureplugins-initial":{disablePluginSort:!0,allPlugins:Kr},"configureplugins-cfgeditor":{disablePluginSort:!0,allPlugins:[{name:"TestPlugin1",title:"contextCreator.configurePlugins.tutorialPlugins.enabledTitle",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!0,active:!1}].concat((Xr=Kr.slice(1),function(e){if(Array.isArray(e))return Yr(e)}(Xr)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Xr)||function(e,t){if(e){if("string"==typeof e)return Yr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yr(e,t):void 0}}(Xr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),editedPlugin:"TestPlugin1",editedCfg:'{\n    "cfg": {\n        "exampleProp": 8\n    },\n    "override": {}\n}'}},Qr=n(966085),eo=n.n(Qr);function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach(function(t){oo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oo(e,t,n){return(t=function(e){var t=function(e){if("object"!=to(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==to(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var io={WRONG_FORMAT:"WRONG_FORMAT",MISSING_INDEX:"MISSING_INDEX",MALFORMED_INDEX:"MALFORMED_INDEX",MISSING_PLUGIN:"MISSING_PLUGIN",MISSING_BUNDLE:"MISSING_BUNDLE",TOO_MANY_PLUGINS:"TOO_MANY_BUNDLES",ALREADY_INSTALLED:"ALREADY_INSTALLED"},ao=n(843614);function lo(e){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(e)}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach(function(t){uo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uo(e,t,n){return(t=function(e){var t=function(e){if("object"!=lo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var po=function(e,t,n,r,o,i,a){return[{visible:"MapTemplates"===e.name,glyph:"1-map",tooltipId:"contextCreator.configurePlugins.tooltips.mapTemplatesConfig",onClick:function(){return i("mapTemplatesConfig",!0)}},{visible:!t&&!e.denyUserSelection,glyph:"1-user-mod",tooltipId:e.isUserPlugin?"contextCreator.configurePlugins.tooltips.disableUserPlugin":"contextCreator.configurePlugins.tooltips.enableUserPlugin",bsStyle:e.isUserPlugin?"success":void 0,onClick:function(){return a([e.name],"isUserPlugin",!e.isUserPlugin)}},{visible:e.isUserPlugin&&!e.denyUserSelection,glyph:e.active?"check":"unchecked",tooltipId:e.active?"contextCreator.configurePlugins.tooltips.deactivatePlugin":"contextCreator.configurePlugins.tooltips.activatePlugin",onClick:function(){return a([e.name],"active",!e.active)}},{glyph:"wrench",tooltipId:"contextCreator.configurePlugins.tooltips.editConfiguration",active:e.name===n,onClick:function(){return o(e.name===n?void 0:e.name)}},{visible:!(!e.docUrl&&!r),glyph:"question-sign",tooltipId:"contextCreator.configurePlugins.tooltips.pluginDocumentation",Element:function(t){return lt().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.docUrl||r&&r+"#plugins."+(e.docName||e.name)},lt().createElement(Jt.Z,t))}},{visible:e.isExtension,glyph:"trash",tooltipId:"contextCreator.configurePlugins.tooltips.removePlugin",onClick:function(){return i("confirmRemovePlugin",!0,e.name)}}]},fo=function(e,t){return[{visible:e.isExtension,glyph:"trash",tooltipId:"contextCreator.configurePlugins.tooltips.removePlugin",onClick:function(){return t("confirmRemovePlugin",!0,e.name)}}]},mo=function(e,t,n,r,o,i,a,l,c,s,u,p,f,d){var m=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0;return(arguments.length>14&&void 0!==arguments[14]?arguments[14]:[]).filter(function(e){return!e.hidden}).map(function(g){var y=d||b,v=g.forcedMandatory||g.mandatory;return{id:g.name,title:g.title||g.label||g.name,cardSize:"sm",description:g.description||"plugin name: "+g.name,showDescriptionTooltip:i,descriptionTooltipDelay:a,mandatory:v,className:d||!b||g.enabled?"":"plugin-card-disabled",tools:y?g.enabled?po(g,v,e,o,l,p,f):fo(g,p):[],component:y&&g.enabled&&g.name===e?lt().createElement("div",{className:"plugin-configuration-editor"},lt().createElement(Tt.Z,{value:t,editorDidMount:function(e){return r(e)},onBeforeChange:function(e,t,n){return u(n)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),n&&lt().createElement("div",{className:"plugin-configuration-errorarea"},lt().createElement("div",{className:"plugin-configuration-errorarea-header"},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),lt().createElement("div",{className:"plugin-configuration-errorarea-body"},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:n.message}},function(e){return lt().createElement("pre",{className:"plugin-configuration-errormsg"},e)})))):null,preview:lt().createElement(lt().Fragment,null,!d&&b&&!v&&lt().createElement(pt.Z,{style:{left:"-4px",position:"relative"},key:"checkbox",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),v||(g.enabled?s:c)([g.name])}},lt().createElement(ut.gG,{glyph:g.enabled?"check":"unchecked"})),g.glyph?lt().createElement(ut.gG,{key:"icon",glyph:g.glyph}):lt().createElement(ut.gG,{key:"icon",glyph:"plug"})),children:m&&mo(e,t,n,r,o,i,a,l,c,s,u,p,f,!1,g.children,!0,g.enabled)||[]}})},bo=function(e){return e&&e.map(function(e){return e.id})},go=function(e){return e&&e.filter(function(e){return!e.mandatory})};const yo=(0,Ot.compose)((0,Ot.withState)("errorLineNumber","setErrorLineNumber"),(0,Ot.withState)("editor","setEditor"),(0,Ot.getContext)({messages:st().object}),(0,Ot.lifecycle)({componentDidUpdate:function(){var e=this.props,t=e.cfgError,n=e.editor,r=e.errorLineNumber,o=e.setErrorLineNumber,i=f()(t,"lineNumber");n&&i!==r&&(r&&n.removeLineClass(r-1,"background","plugin-configuration-line-error"),o(i),i&&n.addLineClass(i-1,"background","plugin-configuration-line-error"))}}),function(e){return function(t){var n=t.tutorialMode,r=void 0!==n&&n,o=t.tutorialStep,i=void 0===o?"configureplugins-initial":o,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Hr);return lt().createElement(e,Jr({},a,r?qr[i]:{}))}})(function(e){var t=e.user,n=e.loading,r=e.loadFlags,o=e.allPlugins,i=void 0===o?[]:o,a=e.editedPlugin,l=e.editedCfg,c=e.cfgError,s=e.parsedTemplate,u=e.editedTemplate,p=e.fileDropStatus,f=e.availablePluginsFilterText,d=void 0===f?"":f,m=e.enabledPluginsFilterText,b=void 0===m?"":m,g=e.availablePluginsFilterPlaceholder,y=void 0===g?"contextCreator.configurePlugins.pluginsFilterPlaceholder":g,v=e.enabledPluginsFilterPlaceholder,h=void 0===v?"contextCreator.configurePlugins.pluginsFilterPlaceholder":v,E=e.documentationBaseURL,S=e.showDescriptionTooltip,P=void 0===S||S,O=e.descriptionTooltipDelay,T=void 0===O?600:O,C=e.uploadEnabled,w=void 0!==C&&C,x=e.pluginsToUpload,j=void 0===x?[]:x,D=e.uploading,N=void 0===D?[]:D,R=e.uploadResult,I=e.showDialog,A=void 0===I?{}:I,k=e.mapTemplates,F=e.availableTemplatesFilterText,U=e.enabledTemplatesFilterText,_=e.availableTemplatesFilterPlaceholder,Z=e.enabledTemplatesFilterPlaceholder,M=e.disablePluginSort,G=void 0!==M&&M,L=e.onFilterAvailablePlugins,B=void 0===L?function(){}:L,z=e.onFilterEnabledPlugins,V=void 0===z?function(){}:z,$=e.onEditPlugin,W=void 0===$?function(){}:$,H=e.onEnablePlugins,J=void 0===H?function(){}:H,Y=e.onDisablePlugins,X=void 0===Y?function(){}:Y,K=e.onUpdateCfg,q=void 0===K?function(){}:K,Q=e.setSelectedPlugins,ee=void 0===Q?function(){}:Q,te=e.changePluginsKey,ne=void 0===te?function(){}:te,re=e.setEditor,oe=void 0===re?function(){}:re,ie=e.onEnableUpload,ae=void 0===ie?function(){}:ie,le=e.onUpload,ce=void 0===le?function(){}:le,se=e.onAddUpload,ue=void 0===se?function(){}:se,pe=e.onRemoveUpload,fe=void 0===pe?function(){}:pe,de=e.onShowDialog,me=void 0===de?function(){}:de,be=e.onRemovePlugin,ge=void 0===be?function(){}:be,ve=e.onSaveTemplate,he=e.onDeleteTemplate,Ee=e.onEditTemplate,Se=e.onFilterAvailableTemplates,Pe=e.onFilterEnabledTemplates,Oe=e.changeTemplatesKey,Te=e.setSelectedTemplates,Ce=e.setParsedTemplate,we=e.setFileDropStatus,xe=e.messages,je=void 0===xe?{}:xe,De=e.hideUploadExtension,Ne=uo(uo(uo(uo(uo(uo(uo({},io.WRONG_FORMAT,"contextCreator.configurePlugins.uploadWrongFileFormatError"),io.MISSING_INDEX,"contextCreator.configurePlugins.uploadMissingIndexError"),io.MALFORMED_INDEX,"contextCreator.configurePlugins.uploadParseError"),io.MISSING_PLUGIN,"contextCreator.configurePlugins.uploadMissingPluginError"),io.MISSING_BUNDLE,"contextCreator.configurePlugins.uploadMissingBundleError"),io.TOO_MANY_BUNDLES,"contextCreator.configurePlugins.uploadTooManyBundlesError"),io.ALREADY_INSTALLED,"contextCreator.configurePlugins.uploadAlreadyInstalledError"),Re=i.filter(function(e){return e.selected}),Ie=i.filter(function(e){return!e.enabled}),Ae=i.filter(function(e){return e.enabled}),ke=mo.bind(null,a,l,c,oe,E,P,T,W,J,X,q,me,ne,!0),Fe=ke(Re,!1),Ue=ke(Ie,!0),_e=ke(Ae,!0);return lt().createElement("div",{className:"configure-plugins-step"},lt().createElement(Wt,{localizeItems:!0,leftColumn:{items:Ue,title:"contextCreator.configurePlugins.availablePlugins",filterText:d,filterPlaceholder:y,emptyStateProps:{glyph:"wrench",title:"contextCreator.configurePlugins.availablePluginsEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configurePlugins.searchResultsEmpty"},onFilter:B,tools:De?[]:[{id:"upload",glyph:"upload",onClick:function(){return ae(!0)},tooltipId:"contextCreator.configurePlugins.tooltips.uploadPlugin"}]},rightColumn:{items:_e,title:"contextCreator.configurePlugins.enabledPlugins",filterText:b,filterPlaceholder:h,emptyStateProps:{glyph:"wrench",title:"contextCreator.configurePlugins.enabledPluginsEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configurePlugins.searchResultsEmpty"},emptyTest:function(e){return!e.filter(function(e){return!e.mandatory}).length},onFilter:V},allowCtrlMultiSelect:!0,selectedItems:Fe,selectedSide:i.reduce(function(e,t){return t.selected&&t.enabled||e},!1)?"right":"left",sortStrategy:function(e){if(G)return e;var t=function(e){return e&&e.map(function(e){return so(so({},e),{},{children:t(e.children)})}).sort(function(e,t){return e.title<t.title?-1:1})};return t(e)},filter:function(e,t){var n=e.toLowerCase(),r=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return so(so({},e),{},{children:r(e.children)})}).filter(function(e){return e.children.length>0||e.title.toLowerCase().indexOf(n)>-1})};return r(t)},onSelect:function(e){return ee(bo(go(e)))},onTransfer:function(e,t){return("right"===t?J:X)(bo(go(e)))}}),lt().createElement(Ht.Z,{loading:n&&r.templateDataLoading,showFullscreen:!0,title:lt().createElement(ft.Z,{msgId:"contextCreator.configureTemplates.title"}),show:A.mapTemplatesConfig,fullscreenType:"vertical",clickOutEnabled:!1,size:"lg",onClose:function(){return me("mapTemplatesConfig",!1)}},lt().createElement(Wr,{user:t,loading:n,loadFlags:r,mapTemplates:k,parsedTemplate:s,editedTemplate:u,fileDropStatus:p,availableTemplatesFilterText:F,enabledTemplatesFilterText:U,availableTemplatesFilterPlaceholder:_,enabledTemplatesFilterPlaceholder:Z,showUploadDialog:A.uploadTemplate,changeTemplatesKey:Oe,setSelectedTemplates:Te,setParsedTemplate:Ce,setFileDropStatus:we,onSave:ve,onDelete:he,onEditTemplate:Ee,onFilterAvailableTemplates:Se,onFilterEnabledTemplates:Pe,onShowUploadDialog:me.bind(null,"uploadTemplate")})),lt().createElement(mr.Z,{onClose:me.bind(null,"confirmRemovePlugin",!1),onConfirm:ge.bind(null,A.confirmRemovePluginPayload),show:A.confirmRemovePlugin,buttonSize:"large"},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.confirmRemovePlugin"})),w&&function(e){var t=e.toUpload,n=e.onClose,r=e.onUpload,o=e.onInstall,i=e.onRemove,a=e.isUploading,l=e.uploadStatus;return lt().createElement(ao.Z,{show:!0},lt().createElement(ao.Z.Header,{key:"dialogHeader"},lt().createElement(ao.Z.Title,null,lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.uploadTitle"}))),lt().createElement(ao.Z.Body,null,a?lt().createElement(Et(),null):lt().createElement("div",{className:"configure-plugins-step-upload"},lt().createElement(ln(),{key:"dropzone",rejectClassName:"dropzone-danger",className:"dropzone",activeClassName:"active",onDrop:r},lt().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%",justifyContent:"center"}},lt().createElement("span",{style:{textAlign:"center"}},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.uploadLabel"})))),lt().createElement("div",{className:"uploads-list"},t.map(function(e,t){return function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=e.error?lt().createElement(ut.gG,{glyph:"remove"}):lt().createElement(ut.gG,{glyph:"ok"});return lt().createElement("div",{key:e.name,className:"uploading-file"},o,lt().createElement("span",{className:"plugin-name"},e.name),lt().createElement("span",{className:"upload-remove",onClick:r},lt().createElement(ut.gG,{glyph:"trash"})),lt().createElement("span",{className:"upload-error"},e.error&&(t=e.error,n=lt().createElement(ut.u,null,t.message),lt().createElement(ut.Ox,{placement:"top",overlay:n},lt().createElement(ut.gG,{glyph:"warning-sign"})))))}(e,function(){return i(t)})})),l&&"error"===l.result&&lt().createElement(ut.bZ,{bsStyle:"danger"},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.uploadError"}),l.error.message),l&&"ok"===l.result&&lt().createElement(ut.bZ,{bsStyle:"info"},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.uploadOk"})))),lt().createElement(ao.Z.Footer,null,lt().createElement(pt.Z,{onClick:n},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.cancelUpload"})),lt().createElement(pt.Z,{bsStyle:"primary",onClick:o,disabled:0===t.filter(function(e){return!e.error}).length},lt().createElement(ft.Z,{msgId:"contextCreator.configurePlugins.install"}))))}({toUpload:j,onClose:function(){return ae(!1)},onUpload:function(e){Promise.all(e.map(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,ye.xp)(e).then(function(e){return(new(eo())).loadAsync(e).catch(function(){throw io.WRONG_FORMAT})}).then(function(n){if(!n.files["index.json"])throw io.MISSING_INDEX;if(0===n.file(/index\.js$/).length)throw io.MISSING_BUNDLE;return n.files["index.json"].async("text").then(function(n){var r=function(e,t){try{var n=JSON.parse(e);if(n.plugins&&n.plugins.length&&n.plugins[0].name){var r=n.plugins[0].name;return-1!==t.indexOf(r)?{error:io.ALREADY_INSTALLED}:{name:r}}return{error:io.MISSING_PLUGIN}}catch(e){return{error:io.MALFORMED_INDEX}}}(n,t);if(r.error)throw r.error;return ro(ro({},r),{},{file:e})})})}(e,i.map(function(e){return e.name})).catch(function(e){throw new Error((0,St.S$)(je,Ne[e]))})})).then(function(e){ue(e)}).catch(function(t){ue(e.map(function(e){return{name:e.name,file:e,error:t}}))})},onInstall:function(){var e=j.filter(function(e){return!e.error});ce(e)},onRemove:fe,isUploading:N.filter(function(e){return e.uploading}).length>0,uploadStatus:R}))});var vo=n(472500),ho=n.n(vo),Eo=n(491046),So=n(564140),Po=n(668740);function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}var To=["onLoaded","pluginsConfig","plugins","loaderComponent"];function Co(){return Co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Co.apply(null,arguments)}function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach(function(t){jo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jo(e,t,n){return(t=function(e){var t=function(e){if("object"!=Oo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Do=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.xc;return function(t){return function(n){var r=n.onLoaded,o=void 0===r?function(){}:r,i=n.pluginsConfig,a=n.plugins,l=void 0===a?{}:a,c=n.loaderComponent,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,To),u=e(xo({pluginsConfig:i},s)),p=(0,So.Z)({pluginsEntries:(0,Po.u)(l,"module"),pluginsConfig:u}),f=p.plugins,d=p.pending,m=(0,at.useMemo)(function(){return xo(xo({},f),(0,Po.u)(l))},[f]),b=d,g=c;return(0,at.useEffect)(function(){b||o(!0)},[b]),b&&c?lt().createElement(g,null):lt().createElement(t,Co({},s,{pluginsConfig:i,plugins:m,allPlugins:l}))}}}()(Eo.Z);var No=n(784715);function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_o(r.key),r)}}function Ao(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ao=function(){return!!e})()}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}function Fo(e,t){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fo(e,t)}function Uo(e,t,n){return(t=_o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _o(e){var t=function(e){if("object"!=Ro(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ro(t)?t:t+""}var Zo=ho().parse(window.location.href,!0).query,Mo=(0,o.connect)((0,No.oz)(Kt())(function(e){return e.plugins},function(e){return e.mode},function(e){var t;return null==e||null===(t=e.browser)||void 0===t?void 0:t.mobile},function(e){return e.controls},function(e){return(0,l.bh)(e,a.ZP.getConfigProp("monitorState"))},function(e,t,n,r,o){return{statePluginsConfig:e,mode:Zo.mode||t||(n?"mobile":"desktop"),pluginsState:r,monitoredState:o}}))(Do),Go=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=arguments,n=ko(n=t),function(e,t){if(t&&("object"==Ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ao()?Reflect.construct(n,r||[],ko(e).constructor):n.apply(e,r));var e,n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fo(e,t)}(t,e),function(e,t){return t&&Io(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.loadMapConfig()}},{key:"render",value:function(){return lt().createElement(Mo,{key:"viewer",id:"viewer",className:this.props.className,pluginsConfig:this.props.pluginsConfig||this.props.statePluginsConfig||a.ZP.getConfigProp("plugins"),plugins:this.props.plugins,params:this.props.params,loaderComponent:this.props.loaderComponent,onLoaded:this.props.onLoaded})}}])}(lt().Component);Uo(Go,"propTypes",{className:st().string,params:st().object,statePluginsConfig:st().object,pluginsConfig:st().object,loadMapConfig:st().func,plugins:st().object,loaderComponent:st().func,onLoaded:st().func}),Uo(Go,"defaultProps",{mode:"desktop",className:"viewer",loadMapConfig:function(){},onLoaded:function(){}});const Lo=Go;var Bo=n(898631);const zo=function(e){var t=e.pluginsConfig,n=void 0===t?{}:t,r=e.plugins,o=void 0===r?{}:r,i=e.mapType,a=void 0===i?Bo.Bk.OPENLAYERS:i,l=e.className,c=void 0===l?"viewer context-creator-viewer":l,s=e.showConfirm,u=void 0!==s&&s,p=e.confirmMessage,f=void 0===p?"contextCreator.configureMap.confirm":p,d=e.onReloadConfirm,m=void 0===d?function(){}:d,b=e.onMapViewerReload,g=void 0===b?function(){}:b;return lt().createElement(lt().Fragment,null,lt().createElement(mt.Z,{draggable:!1,modal:!0,show:u,onClose:function(){m(!1)},onConfirm:function(){m(!1),g()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:lt().createElement(ft.Z,{msgId:"confirm"}),closeText:lt().createElement(ft.Z,{msgId:"cancel"})},lt().createElement(ft.Z,{msgId:f})),lt().createElement(Lo,{className:c,pluginsConfig:n,plugins:o,params:{mapType:a,mapId:"new"}}))};var Vo=n(717621),$o=n.n(Vo),Wo=n(615402),Ho=n(212961),Jo=n(725288),Yo=n(202576),Xo=n(145869);function Ko(e){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ko(e)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach(function(t){ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ei(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ko(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ko(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ti=(0,pn.Z)("noResultsText")(Bn.ZP),ni="ms-main-color",ri="ms-main-bg",oi="ms-primary-contrast",ii="ms-primary",ai="ms-success-contrast",li="ms-success",ci=function(e,t,n,r){return!$o().equals(null==e?void 0:e[r],(null==t?void 0:t[r])||n[r])};const si=function(e){var t=e.themes,n=void 0===t?[]:t,r=e.setSelectedTheme,o=void 0===r?function(){}:r,i=e.onToggleCustomVariables,a=void 0===i?function(){}:i,l=e.selectedTheme,c=void 0===l?{}:l,s=e.customVariablesEnabled,u=void 0!==s&&s,p=e.context,f=void 0===p?{}:p,d=e.basicVariables,m=void 0===d?ei(ei(ei(ei(ei(ei({},ni,"#000000"),ri,"#FFFFFF"),oi,"#FFFFFF"),ii,"#0D7185"),ai,"#FFFFFF"),li,"#398439"):d,b=(0,at.useRef)(),g=(0,at.useRef)(),y=(0,at.useRef)(),v=(E()(n,{id:c.id})||{}).defaultVariables,h=Qo(Qo(Qo({},m),v),null==c?void 0:c.variables),S=h[ni]&&h[ri]&&!$o().isReadable(h[ni],h[ri])?$o().mostReadable(h[ri],[h[ni],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,P=h[ii]&&h[oi]&&!$o().isReadable(h[ii],h[oi])?$o().mostReadable(h[oi],[h[ii],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,O=h[li]&&h[ai]&&!$o().isReadable(h[li],h[ai])?$o().mostReadable(h[ai],[h[li],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,T=h[li]&&h[ii]&&!$o().isReadable(h[li],h[ii])?$o().mostReadable(h[ii],[h[li],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,C=ci(h,v,m,ni),w=ci(h,v,m,ri),x=ci(h,v,m,oi),j=ci(h,v,m,ii),D=ci(h,v,m,ai),N=ci(h,v,m,li);return lt().createElement("div",{className:"configure-themes-step"},lt().createElement("div",{className:"choose-theme"},lt().createElement("div",{className:"text-center"},lt().createElement(ut.gG,{glyph:"dropper",style:{fontSize:128}})),lt().createElement("h1",{className:"text-center"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.title"})),lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.themes"})),lt().createElement(ti,{clearable:!0,onChange:function(e){var t=null==e?void 0:e.theme;o(u?t?Qo(Qo({},t),{},{variables:Qo(Qo({},m),t.defaultVariables)}):{variables:m}:t)},value:null==c?void 0:c.id,options:n.map(function(e){return{value:e.id,label:(null==e?void 0:e.label)&&(0,St.S$)(f,null==e?void 0:e.label)||(null==e?void 0:e.id),theme:e}}),noResultsText:"contextCreator.configureThemes.noThemes"}),lt().createElement("div",{className:"custom-variables"},lt().createElement(ut.J$,null,lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.customVariables"})),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.customColorsDescription"})}),lt().createElement(pt.Z,{key:"clear-all",onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},m),v)}))},className:"clear-all no-border"},"clear all"),lt().createElement(Xo.Z,{onChange:function(e){a(),e&&o(Qo(Qo({},c),{},{variables:h}))},className:"ms-geostory-settings-switch",checked:u})),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.main"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.main"})}),S?lt().createElement(Jo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(b.current=e.trigger)},placement:"top",content:lt().createElement("div",null,lt().createElement(Wo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:S}}),lt().createElement(pt.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ni,S))})),null===(e=b.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},lt().createElement(ft.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},lt().createElement(pt.Z,{disabled:!u,className:"square-button-md no-border",style:{display:S?"block":"none"}},lt().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[ni],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ni,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!C||!u,key:ni,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ni,(null==v?void 0:v[ni])||m[ni]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.background"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.background"})})),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[ri],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ri,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!w||!u,key:ri,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ri,(null==v?void 0:v[ri])||m[ri]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.primaryContrast"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.primaryContrast"})}),P?lt().createElement(Jo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(g.current=e.trigger)},placement:"top",content:lt().createElement("div",null,lt().createElement(Wo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:P}}),lt().createElement(pt.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},oi,P))})),null===(e=g.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},lt().createElement(ft.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},lt().createElement(pt.Z,{disabled:!u,className:"square-button-md no-border",style:{display:P?"block":"none"}},lt().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[oi],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},oi,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!x||!u,key:oi,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},oi,(null==v?void 0:v[oi])||m[oi]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.primary"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.primary"})})),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[ii],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ii,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!j||!u,key:ii,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ii,(null==v?void 0:v[ii])||m[ii]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.successContrast"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.successContrast"})}),O?lt().createElement(Jo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(y.current=e.trigger)},placement:"top",content:lt().createElement("div",null,lt().createElement(Wo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:O}}),lt().createElement(pt.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ai,O))})),null===(e=y.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},lt().createElement(ft.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},lt().createElement(pt.Z,{disabled:!u,className:"square-button-md no-border",style:{display:O?"block":"none"}},lt().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[ai],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ai,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!D||!u,key:ai,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},ai,(null==v?void 0:v[ai])||m[ai]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("div",{className:"color-item"},lt().createElement(ut.J$,{className:"label-theme"},lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.success"}),lt().createElement(Yo.Z,{bsStyle:"link",text:lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.tooltips.success"})}),T?lt().createElement(Jo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(y.current=e.trigger)},placement:"top",content:lt().createElement("div",null,lt().createElement(Wo.Z,{msgId:"contextCreator.configureThemes.alternativeTextPrimarySecondary",msgParams:{color:T}}),lt().createElement(pt.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},li,T))})),null===(e=y.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},lt().createElement(ft.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},lt().createElement(pt.Z,{disabled:!u,className:"square-button-md no-border",style:{display:T?"block":"none"}},lt().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),lt().createElement("div",{className:"color-choice"},lt().createElement(Ho.Z,{disabled:!u,onOpen:function(){return{}},color:h[li],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},li,$o()(e).toHexString()))}))}}),lt().createElement(pt.Z,{disabled:!N||!u,key:li,onClick:function(){o(Qo(Qo({},c),{},{variables:Qo(Qo({},h),{},ei({},li,(null==v?void 0:v[li])||m[li]))}))},className:"no-border"},lt().createElement(ut.gG,{glyph:"repeat"})))),lt().createElement("p",null,lt().createElement(ft.Z,{msgId:"contextCreator.configureThemes.guidelines"}))))};function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vi(r.key),r)}}function fi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fi=function(){return!!e})()}function di(e){return di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},di(e)}function mi(e,t){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mi(e,t)}function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach(function(t){yi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yi(e,t,n){return(t=vi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vi(e){var t=function(e){if("object"!=ui(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ui(t)?t:t+""}var hi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=arguments,n=di(n=t),function(e,t){if(t&&("object"==ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fi()?Reflect.construct(n,r||[],di(e).constructor):n.apply(e,r));var e,n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(t,e),function(e,t){return t&&pi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.onInit({tutorials:this.props.tutorials})}},{key:"componentDidUpdate",value:function(){this.props.tutorialsList||this.props.onInit({tutorials:this.props.tutorials})}},{key:"render",value:function(){var e=this,t=function(t){var n,r,o=e.props.tutorials[t]?[{id:"show-tutorial",onClick:function(){return e.props.onShowTutorial(t)},label:"contextCreator.showTutorial"}]:[],i=null!==(n=null===(r=e.props.items)||void 0===r?void 0:r.map(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toolbarBtn}))&&void 0!==n?n:[];return o=o.concat(i),"configure-map"===t&&(o=o.concat({id:"map-reload",onClick:function(){return e.props.onReloadConfirm(!0)},label:"contextCreator.configureMap.reload"})),o},n=[{id:"general-settings",label:"contextCreator.generalSettings.label",extraToolbarButtons:t("general-settings"),disableNext:!this.props.resource.name||!this.props.newContext.windowTitle||!this.props.newContext.windowTitle.length||this.props.loading||!this.props.isValidContextName||!this.props.contextNameChecked,component:lt().createElement(Pt,{contextId:this.props.contextId,contextName:this.props.resource.name,windowTitle:this.props.newContext.windowTitle,isValidContextName:this.props.isValidContextName,contextNameChecked:this.props.contextNameChecked,loading:this.props.loading&&this.props.loadFlags.contextNameCheck,context:this.context,onChange:this.props.onChangeAttribute})},{id:"configure-map",label:"contextCreator.configureMap.label",extraToolbarButtons:t("configure-map"),component:lt().createElement(zo,{pluginsConfig:this.props.ignoreViewerPlugins?this.props.pluginsConfig:J()(this.props.pluginsConfig).reduce(function(t,n){return gi(gi({},t),{},yi({},n,(r=e.props.pluginsConfig[n],e.props.viewerPlugins.map(function(e){var t=g()(e)?e.name:e,n=E()(r,function(e){return t===(g()(e)?e.name:e)});if(n){if(g()(e)&&e.overrides){var o=g()(n)?n:{name:n},i=gi(gi({},n.cfg||{}),e.overrides&&e.overrides.cfg||{});return gi(gi({},o),{},{cfg:i})}return n}return e}))));var r},{}),plugins:this.context.plugins,mapType:this.props.mapType,showConfirm:this.props.showReloadConfirm,onReloadConfirm:this.props.onReloadConfirm,onMapViewerReload:this.props.onMapViewerReload})},{id:"configure-plugins",label:"contextCreator.configurePlugins.label",extraToolbarButtons:t("configure-plugins"),disableNext:!this.props.allAvailablePlugins.filter(function(e){return e.enabled&&void 0===f()(e,"pluginConfig.cfg.containerPosition")}).length||!!this.props.cfgError||!this.props.isCfgValidated,component:lt().createElement(yo,{user:this.props.user,loading:this.props.loading,loadFlags:this.props.loadFlags,tutorialMode:"run"===this.props.tutorialStatus,tutorialStep:this.props.tutorialStep,allPlugins:this.props.allAvailablePlugins,editedPlugin:this.props.editedPlugin,editedCfg:this.props.editedCfg,cfgError:this.props.cfgError,availablePluginsFilterText:this.props.availablePluginsFilterText,enabledPluginsFilterText:this.props.enabledPluginsFilterText,documentationBaseURL:this.props.documentationBaseURL,showDescriptionTooltip:this.props.showPluginDescriptionTooltip,descriptionTooltipDelay:this.props.pluginDescriptionTooltipDelay,showDialog:this.props.showDialog,mapTemplates:this.props.mapTemplates,parsedTemplate:this.props.parsedTemplate,editedTemplate:this.props.editedTemplate,fileDropStatus:this.props.fileDropStatus,availableTemplatesFilterText:this.props.availableTemplatesFilterText,enabledTemplatesFilterText:this.props.enabledTemplatesFilterText,onFilterAvailablePlugins:this.props.onFilterAvailablePlugins,onFilterEnabledPlugins:this.props.onFilterEnabledPlugins,onEditPlugin:this.props.onEditPlugin,onEnablePlugins:this.props.onEnablePlugins,onDisablePlugins:this.props.onDisablePlugins,onUpdateCfg:this.props.onUpdateCfg,setSelectedPlugins:this.props.setSelectedPlugins,changePluginsKey:this.props.changePluginsKey,uploading:this.props.uploading,uploadResult:this.props.uploadResult,onEnableUpload:this.props.onEnableUploadPlugin,uploadEnabled:this.props.uploadEnabled,pluginsToUpload:this.props.pluginsToUpload,onUpload:this.props.onUploadPlugin,onAddUpload:this.props.onAddUploadPlugin,onRemoveUpload:this.props.onRemoveUploadPlugin,changeTemplatesKey:this.props.changeTemplatesKey,setSelectedTemplates:this.props.setSelectedTemplates,setParsedTemplate:this.props.setParsedTemplate,setFileDropStatus:this.props.setFileDropStatus,onShowDialog:this.props.onShowDialog,onRemovePlugin:this.props.onRemovePlugin,onSaveTemplate:this.props.onSaveTemplate,onDeleteTemplate:this.props.onDeleteTemplate,onEditTemplate:this.props.onEditTemplate,onFilterAvailableTemplates:this.props.onFilterAvailableTemplates,onFilterEnabledTemplates:this.props.onFilterEnabledTemplates,hideUploadExtension:this.props.hideUploadExtension})},{id:"configure-themes",label:"contextCreator.configureThemes.label",extraToolbarButtons:t("configure-themes"),disableNext:!1,component:lt().createElement(si,{themes:this.props.themes,customVariablesEnabled:this.props.customVariablesEnabled,basicVariables:this.props.basicVariables,setSelectedTheme:this.props.setSelectedTheme,onToggleCustomVariables:this.props.onToggleCustomVariables,selectedTheme:this.props.selectedTheme})}];return lt().createElement(vt,{enableClickOnStep:this.props.enableClickOnStep,loading:this.props.loading&&this.props.loadFlags.contextSaving,currentStepId:this.props.curStepId,onSetStep:this.props.onSetStep,onSave:function(){return e.props.onSave(e.props.saveDestLocation)},onShowBackToPageConfirmation:this.props.onShowBackToPageConfirmation,showBackToPageConfirmation:this.props.showBackToPageConfirmation,backToPageConfirmationMessage:this.props.backToPageConfirmationMessage,onConfirmBackToPage:function(){return e.context.router.history.push(e.props.backToPageDestRoute)},steps:this.props.stepIds.map(function(e){return n.find(function(t){return t.id===e})}),hideSaveButton:this.props.hideSaveButton,hideCloseButton:this.props.hideCloseButton})}}])}(lt().Component);yi(hi,"propTypes",{user:ct.object,loading:ct.bool,loadFlags:ct.object,contextId:ct.object,isValidContextName:ct.bool,contextNameChecked:ct.bool,curStepId:ct.string,tutorialStatus:ct.string,tutorialStep:ct.string,newContext:ct.object,resource:ct.object,pluginsConfig:ct.object,pluginsToUpload:ct.array,viewerPlugins:ct.array,ignoreViewerPlugins:ct.bool,allAvailablePlugins:ct.array,editedPlugin:ct.string,editedCfg:ct.string,isCfgValidated:ct.bool,cfgError:ct.object,mapTemplates:ct.array,parsedTemplate:ct.object,editedTemplate:ct.object,fileDropStatus:ct.string,availablePluginsFilterText:ct.string,enabledPluginsFilterText:ct.string,availableTemplatesFilterText:ct.string,enabledTemplatesFilterText:ct.string,documentationBaseURL:ct.string,showPluginDescriptionTooltip:ct.bool,pluginDescriptionTooltipDelay:ct.number,onFilterAvailablePlugins:ct.func,onFilterEnabledPlugins:ct.func,onFilterAvailableTemplates:ct.func,onFilterEnabledTemplates:ct.func,setSelectedPlugins:ct.func,setSelectedTemplates:ct.func,setParsedTemplate:ct.func,setFileDropStatus:ct.func,changePluginsKey:ct.func,changeTemplatesKey:ct.func,mapType:ct.string,showReloadConfirm:ct.bool,showDialog:ct.object,onInit:ct.func,onSetStep:ct.func,onShowTutorial:ct.func,onChangeAttribute:ct.func,onSave:ct.func,onSaveTemplate:ct.func,onDeleteTemplate:ct.func,onEditTemplate:ct.func,onEditPlugin:ct.func,onEnablePlugins:ct.func,onDisablePlugins:ct.func,onUpdateCfg:ct.func,onEnableUploadPlugin:ct.func,onUploadPlugin:ct.func,onAddUploadPlugin:ct.func,onRemoveUploadPlugin:ct.func,uploadEnabled:ct.bool,onMapViewerReload:ct.func,onReloadConfirm:ct.func,saveDestLocation:ct.string,uploading:ct.array,uploadResult:ct.object,onShowDialog:ct.func,onRemovePlugin:ct.func,onShowBackToPageConfirmation:ct.func,showBackToPageConfirmation:ct.bool,backToPageDestRoute:ct.string,backToPageConfirmationMessage:ct.string,tutorials:ct.object,tutorialsList:ct.oneOfType([ct.bool,ct.object]),themes:ct.array,setSelectedTheme:ct.func,selectedTheme:ct.string,basicVariables:ct.object,customVariablesEnabled:ct.bool,onToggleCustomVariables:ct.func,enableClickOnStep:ct.bool,items:ct.array,stepIds:ct.array,hideUploadExtension:ct.bool,hideSaveButton:ct.bool,hideCloseButton:ct.bool}),yi(hi,"contextTypes",{messages:ct.object,plugins:ct.object,router:ct.object}),yi(hi,"defaultProps",{loading:!1,loadFlags:{},isValidContextName:!0,contextNameChecked:!0,newContext:{},resource:{},themes:[{id:"dark",label:"Dark",type:"link",href:"/static/mapstore/dist/themes/dark.css",defaultVariables:{"ms-main-color":"#eeeeee","ms-main-bg":"#333333","ms-primary-contrast":"#111111","ms-primary":"#43a4ff","ms-success-contrast":"#111111","ms-success":"#398439"}}],viewerPlugins:["Map","BackgroundSelector","MetadataExplorer",{name:"TOC",overrides:{cfg:{activateQueryTool:!0}}},"TOCItemsSettings","DrawerMenu","OmniBar","Search","BurgerMenu","AddGroup","Notifications","QueryPanel","MapFooter","CRSSelector","MousePosition","ScaleBox","Toolbar","MapLoading","StyleEditor",{name:"Identify",overrides:{cfg:{showEdit:!1}}},"Locate","ZoomIn","ZoomOut","ZoomAll","Annotations","MapImport","MapExport","Undo","Redo","Expander","FilterLayer","GlobeViewSwitcher",{name:"FeatureEditor",overrides:{cfg:{editingAllowedRoles:[]}}}],ignoreViewerPlugins:!1,allAvailablePlugins:[],isCfgValidated:!1,curStepId:"general-settings",saveDestLocation:"/context-manager",onInit:function(){},onSetStep:function(){},onShowTutorial:function(){},onChangeAttribute:function(){},onToggleCustomVariables:function(){},onReloadConfirm:function(){},uploadEnabled:!1,pluginsToUpload:[],onShowBackToPageConfirmation:function(){},showBackToPageConfirmation:!1,backToPageDestRoute:"/context-manager",backToPageConfirmationMessage:"contextCreator.undo",tutorials:u.TH,tutorialsList:!1,stepIds:["general-settings","configure-map","configure-plugins","configure-themes"]});var Ei=(0,i.zB)({user:ce.np,curStepId:c.F4,tutorialStatus:function(e){var t;return null===(t=function(e){return e&&e.tutorial}(e))||void 0===t?void 0:t.status},tutorialsList:c.K4,tutorialStep:c.tU,newContext:c.Gp,resource:c.rt,allAvailablePlugins:c.w7,editedPlugin:c.$R,editedCfg:c.gX,isCfgValidated:c.MC,cfgError:c.I1,mapTemplates:c.zU,parsedTemplate:c.CH,editedTemplate:c.T$,fileDropStatus:c.YB,availablePluginsFilterText:c.d,enabledPluginsFilterText:c.S2,availableTemplatesFilterText:c.DO,enabledTemplatesFilterText:c.kG,mapType:s.$v,showReloadConfirm:c.C0,showDialog:c.oJ,loading:c.VO,loadFlags:c.E4,isValidContextName:c.We,contextNameChecked:c.F,uploadEnabled:function(e){return e.contextcreator&&e.contextcreator.uploadPluginEnabled},uploading:function(e){return e.contextcreator&&e.contextcreator.uploadingPlugin},uploadResult:function(e){return e.contextcreator&&e.contextcreator.uploadResult},pluginsToUpload:function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.pluginsToUpload},pluginsConfig:function(){return a.ZP.getConfigProp("plugins")},showBackToPageConfirmation:c.Xe,selectedTheme:c.NM,customVariablesEnabled:c.S$,enableClickOnStep:function(e){return!(0,c.Nc)(e)}});const Si=(0,l.rx)("ContextCreator",{component:(0,o.connect)(Ei,{onFilterAvailablePlugins:u.$Q.bind(null,"availablePlugins"),onFilterEnabledPlugins:u.$Q.bind(null,"enabledPlugins"),onFilterAvailableTemplates:u.$Q.bind(null,"availableTemplates"),onFilterEnabledTemplates:u.$Q.bind(null,"enabledTemplates"),setSelectedPlugins:u.BD,setSelectedTemplates:u.yG,setSelectedTheme:u.R8,setParsedTemplate:u.IB,setFileDropStatus:u.CB,onEditPlugin:u.hJ,onEditTemplate:u.Gi,onUpdateCfg:u.wG,changePluginsKey:u.dd,changeTemplatesKey:u.Fd,onEnablePlugins:u.iR,onDisablePlugins:u.$c,onInit:u.S1,onSetStep:u.TX,onShowTutorial:u.Sg,onChangeAttribute:u.wE,onSave:u.tk,onSaveTemplate:u.Xu,onDeleteTemplate:u.Xc,onMapViewerReload:u.Q9,onReloadConfirm:u.WR,onEnableUploadPlugin:u.Ek,onUploadPlugin:u.GH,onAddUploadPlugin:u.DQ,onRemoveUploadPlugin:u.kZ,onShowDialog:u.vC,onRemovePlugin:u.GP,onShowBackToPageConfirmation:u.w6,onToggleCustomVariables:u.i9})(hi),reducers:{contextcreator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.qg:return I(I({},e),t.initState||{});case u.ve:return(0,O.t8)("stepId",t.stepId,e);case u.Te:return(0,O.t8)("wasTutorialShown[".concat(t.stepId,"]"),!0,e);case u.xE:return(0,O.t8)("tutorialStep",t.stepId,e);case u.PJ:return(0,O.t8)("selectedTheme",t.theme,e);case u.L4:return(0,O.t8)("mapViewerLoaded",t.status,e);case u.vl:return(0,O.t8)("showReloadConfirm",t.show,e);case u.v7:return I(I({},e),{},{uploadPluginEnabled:t.enable,uploadingPlugin:[],pluginsToUpload:[],uploadResult:null});case u.Cq:return I(I({},e),{},{uploadResult:null,pluginsToUpload:[].concat(D(e.pluginsToUpload||[]),D(t.files))});case u.ZL:return I(I({},e),{},{pluginsToUpload:e.pluginsToUpload.filter(function(e,n){return n!==t.index})});case u._:var n=t.plugins.map(function(e){return{name:e,uploading:t.status}});return(0,O.t8)("uploadingPlugin",[].concat(D((e.uploadingPlugin||[]).filter(function(e){return 0===n.filter(function(t){return t.name===e.name}).length})),D(n)),e);case u.bs:return(0,O.t8)("uploadResult",{result:"error",files:t.files,error:t.error},e);case u.G7:var r=t.plugins.map(Z);return I(I({},e),{},{pluginsToUpload:[],uploadResult:{result:"ok"},plugins:[].concat(D((e.plugins||[]).filter(function(e){return 0===r.filter(function(t){return t.name===e.name}).length})),D(r))});case u.Pm:return t.status?(0,O.t8)("uninstallingPlugin",{name:t.plugin,uninstalling:!0},e):(0,O.t8)("uninstallingPlugin",void 0,e);case u.u8:return(0,O.t8)("uninstallingPlugin",{name:t.plugin,uninstalling:!1,error:t.error},e);case u.W7:return I(I({},e),{},{plugins:e.plugins.filter(function(e){return e.name!==t.plugin})});case u.Zf:var o,i,l,c=t.resource||{},s=c.data,p=void 0===s?{plugins:{desktop:[]}}:s,d=j(c,T),b=p.plugins,y=void 0===b?{desktop:[]}:b,h=p.userPlugins,S=void 0===h?[]:h,x=p.templates,N=void 0===x?[]:x,R=p.theme,M=p.customVariablesEnabled,G=j(p,C),L=f()(y,"desktop",[]),B=function(e,t){var n=f()(t,"desktop",[]).map(function(e){return g()(e)?e:{name:e}});return e?e.reduce(function(e,t){return f()(t,"children",[]).reduce(function(e,t){return e.filter(function(e){return e.name!==t})},e)},e).map(function(t){return Z(t,null,e,n)}):k}(f()(t.pluginsConfig,"plugins"),a.ZP.getConfigProp("plugins")),z=[],V=function(e){return e.map(function(e){var t=function(t){return v()(t.filter(function(t){return U(t)===e.name}))},n=t(L),r=t(S),o=n||r;return o?(z.push(o.name),I(I({},e),{},{pluginConfig:I(I({},f()(e,"pluginConfig",{})),{},{cfg:f()(o,"cfg"),override:f()(o,"override")}),isUserPlugin:!!r,active:o.active||!1,children:V(e.children)})):e})},$=V(B),W=null===(o=_($,"MapTemplates"))||void 0===o||null===(i=o.pluginConfig)||void 0===i||null===(l=i.cfg)||void 0===l?void 0:l.allowedTemplates,H=(t.type,j(t,w));return(0,O.t8)("initialEnabledPlugins",z,(0,O.t8)("templates",(t.allTemplates||[]).map(function(e){return I(I(I({},e),e.thumbnail?{thumbnail:decodeURIComponent(e.thumbnail)}:{}),{},{attributes:I(I({},e.thumbnail?{thumbnail:decodeURIComponent(e.thumbnail)}:{}),e.format?{format:e.format}:{}),enabled:(W||N||[]).reduce(function(t,n){return t||n.id===e.id},!1),selected:!1})}),(0,O.t8)("newContext",G,(0,O.t8)("plugins",$,(0,O.t8)("resource",d,(0,O.t8)("selectedTheme",R,(0,O.t8)("customVariablesEnabled",M,(0,O.t8)("prefetchedData",H,e))))))));case u.HE:var J=t.resource||{},Y=f()(e,"templates",[]),X=E()(Y,function(e){return e.id===J.id});return t.resource?(0,O.t8)("templates",[].concat(D(Y.filter(function(e){return e.id!==J.id})),[I(I({},J),P()(X,"enabled","selected"))]),e):e;case u.PB:return(0,O.t8)("isValidContextName",t.valid,e);case u.if:return(0,O.t8)("contextNameChecked",t.checked,e);case u.NU:return{};case u.JN:return I(I({},e),{},{contextId:t.id});case u.u:return(0,O.t8)("filterText.".concat(t.propName),t.text,e);case u.JK:var K=t.ids||[];return(0,O.t8)("plugins",f()(e,"plugins",[]).map(function(e){return I(I({},e),{},{selected:K.reduce(function(t,n){return t||n===e.name},!1)})}),e);case u.kk:var q=t.ids||[];return(0,O.t8)("templates",f()(e,"templates",[]).map(function(e){return I(I({},e),{},{selected:q.reduce(function(t,n){return t||n===e.id},!1)})}),e);case u.M6:return(0,O.t8)("parsedTemplate",{fileName:t.fileName,data:t.data,format:t.format},e);case u.rO:return(0,O.t8)("fileDropStatus",t.status,e);case u.eP:return(0,O.t8)("editedTemplate",E()(f()(e,"templates",[]),function(e){return e.id===t.id}),e);case u.N_:return(0,O.t8)("templates",t.templates,e);case u.Nk:return(0,O.t8)("editedPlugin",t.pluginName,e);case u.Gc:return(0,O.t8)("plugins",F(f()(e,"plugins",[]),t.ids||[],t.key,t.value),e);case u.WA:return(0,O.t8)("templates",f()(e,"templates",[]).map(function(e){return I(I({},e),{},A({},t.key,(t.ids||[]).reduce(function(t,n){return t||n===e.id},!1)?t.value:e[t.key]))}),e);case u.xr:var Q=_(f()(e,"plugins",[]),t.pluginName);return t.pluginName?(0,O.t8)("editedCfg",JSON.stringify({cfg:m().apply(void 0,[f()(Q,"pluginConfig.cfg",{})].concat(D("MapTemplates"===t.pluginName?["allowedTemplates"]:[]))),override:f()(Q,"pluginConfig.override",{})},null,2),e):e;case u.zr:return(0,O.t8)("editedCfg",t.cfg,e);case u.mG:return(0,O.t8)("validationStatus",t.status,e);case u.Uq:return(0,O.t8)("parsedCfg",t.parsedCfg,e);case u.VE:return(0,O.t8)("cfgError",t.error,e);case u.zM:return"name"===t.key?(0,O.t8)("resource.name",t.value,e):(0,O.t8)("newContext.".concat(t.key),t.value,e);case u.yT:return(0,O.t8)("showDialog.".concat(t.dialogName),t.show,(0,O.t8)("showDialog.".concat(t.dialogName,"Payload"),t.payload,e));case u.br:return(0,O.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,O.t8)("loading",t.value,e));case u.s4:return(0,O.t8)("showBackToPageConfirmation",t.show,e);case u.Le:return(0,O.t8)("customVariablesEnabled",!e.customVariablesEnabled,e);default:return e}}},epics:r})},998869:(e,t,n)=>{n.d(t,{k:()=>u,U:()=>p});var r=n(782904),o=n(49977),i=n.n(o),a=n(607147),l=n(604206),c=n(801550),s=n(433528),u="export-context",p=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,r.Xg)(t,"enabled",null)])},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,a.Yq)(t)(e)};return e.ofType(l.hZ,c.YD,s.$O).filter(function(e){var r=e.type,o=e.status,i=e.owner,a=e.eventName,p=e.toolName,f=u(t.getState(),n);switch(r){case s.$O:return"featureGrid"!==n;case c.YD:return f&&"click"===a&&p!==n;case l.hZ:return f&&("drawOrEdit"===o||"start"===o)&&i!==n;default:return f&&"annotations"!==n}}).switchMap(function(e){return u(t.getState(),n)?o(t.getState(),n,e):i().Observable.empty()})}},559407:(e,t,n)=>{n.d(t,{Th:()=>i,Nk:()=>a,y7:()=>c});var r=n(91175),o=n.n(r),i={json:"ext-json",wmc:"ext-wmc"},a={json:"JSON",wmc:"WMC"},l=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}],c=function(e){return o()(l.filter(function(t){return t.outputFormat===e}))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(e)}},483139:(e,t,n)=>{n.d(t,{Xq:()=>r,v9:()=>o});var r=function(e,t){return new Promise(function(n,r){var o=t||{},i=o.width,a=void 0===i?64:i,l=o.height,c=void 0===l?64:l,s=o.contain,u=o.type,p=void 0===u?"image/jpeg":u,f=o.quality,d=void 0===f?.5:f,m=new Image;m.crossOrigin="anonymous",m.onload=function(){var e=m.naturalWidth/m.naturalHeight,t=a,r=c,o=a/c,i=document.createElement("canvas");i.setAttribute("width",a),i.setAttribute("height",c),i.style.width=a+"px",i.style.height=c+"px";var l=i.getContext("2d"),u=!s&&e<o||s&&e>o?[t,t/e]:[r*e,r];l.save(),l.translate(t/2,r/2),l.drawImage(m,-u[0]/2,-u[1]/2,u[0],u[1]),l.restore();var f=i.toDataURL(p,d);n(f)},m.onerror=function(e){r(e)},m.src=e})},o=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,o=null===(e=t.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=/))||void 0===e?void 0:e[1];return o?new Promise(function(e){return e("http://img.youtube.com/vi/".concat(o,"/sddefault.jpg"))}):t.match(/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i)?function(e){return new Promise(function(t,n){var r={},o=r.type,i=void 0===o?"image/jpeg":o,a=r.quality,l=void 0===a?.5:a,c=document.createElement("video");c.crossOrigin="anonymous";var s=document.createElement("source"),u=document.createElement("canvas");c.addEventListener("loadedmetadata",function(){var e=c.videoWidth,t=c.videoHeight;u.setAttribute("width",e),u.setAttribute("height",t),u.style.width=e+"px",u.style.height=t+"px"},!0),c.addEventListener("loadeddata",function(){c.currentTime=1},!0),c.addEventListener("seeked",function(){u.getContext("2d").drawImage(c,0,0);try{var e=u.toDataURL(i,l);t(e)}catch(e){n(e)}},!0),c.addEventListener("error",function(e){n(e)},!0),c.appendChild(s),c.setAttribute("src",e)})}(t).then(function(e){return r(e,n)}):new Promise(function(e,t){return t("Cannot create a thumbnail from the provided source")})}},172704:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=o}}]);