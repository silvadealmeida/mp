/*! For license information please see 31273.13d3628cf907a5a8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[31273],{931273:(e,r,t)=>{t.d(r,{WX:()=>c,r7:()=>l,V3:()=>s,HR:()=>f,xi:()=>d,ur:()=>p,vK:()=>v,nm:()=>m,QF:()=>y,zZ:()=>b,uN:()=>O,Bz:()=>S,im:()=>h,CO:()=>w,$X:()=>A,Mt:()=>T,Oq:()=>C,YO:()=>E,PR:()=>R,wI:()=>x,bv:()=>P,mh:()=>G,$Y:()=>L,eA:()=>_,UT:()=>D,cS:()=>I,l7:()=>M,l3:()=>j,Kz:()=>N,vg:()=>F,xM:()=>k,do:()=>W,lb:()=>B,yu:()=>V,Xp:()=>U,c$:()=>H,tt:()=>q,nX:()=>X,BG:()=>$,Rc:()=>Z,K4:()=>z,Dw:()=>Y,dL:()=>Q,In:()=>K,r1:()=>J,XW:()=>ee,L8:()=>re,i3:()=>te,XM:()=>ne,X7:()=>oe,M3:()=>ie,N3:()=>ue,SU:()=>ae,wo:()=>ce,ye:()=>le,m:()=>se,wl:()=>fe,bu:()=>de,A4:()=>pe,vG:()=>ve,Wf:()=>me,Ts:()=>ye,IT:()=>ge,XS:()=>be,tx:()=>Oe,We:()=>Se,nx:()=>he,kC:()=>we,E9:()=>Ae,zX:()=>Te,QT:()=>Ce});var n=t(659551),o=t(501157),i=t(603475),u=t(932354),a=t(197395),c=(n.ZP,o.ZP,i.ZP,u.Z,"CATALOG:ADD_LAYERS_FROM_CATALOGS"),l="CATALOG:ADD_LAYER_AND_DESCRIBE",s="CATALOG:TEXT_SEARCH",f="CATALOG:RECORD_LIST_LOADED",d="CATALOG:RESET_CATALOG",p="CATALOG:CATALOG_CLOSE",v="CATALOG:RECORD_LIST_LOAD_ERROR",m="CATALOG:CHANGE_CATALOG_FORMAT",y="CATALOG:ADD_LAYER_ERROR",g="CATALOG:DESCRIBE_ERROR",b="CATALOG:CHANGE_SELECTED_SERVICE",O="CATALOG:CHANGE_CATALOG_MODE",S="CATALOG:CHANGE_METADATA_TEMPLATE",h="CATALOG:CHANGE_TITLE",w="CATALOG:CHANGE_TEXT",A="CATALOG:CHANGE_TYPE",T="CATALOG:CHANGE_SERVICE_PROPERTY",C="CATALOG:CHANGE_SERVICE_FORMAT",E="CATALOG:FOCUS_SERVICES_LIST",R="CATALOG:CHANGE_URL",x="CATALOG:ADD_CATALOG_SERVICE",P="CATALOG:DELETE_CATALOG_SERVICE",G="CATALOG:ADD_SERVICE",L="CATALOG:DELETE_SERVICE",_="CATALOG:SAVING_SERVICE",D="CATALOG:GET_METADATA_RECORD_BY_ID",I="CATALOG:SET_LOADING",M="CATALOG:SHOW_FORMAT_ERROR",j="CATALOG:TOGGLE_TEMPLATE",N="CATALOG:TOGGLE_THUMBNAIL",F="CATALOG:TOGGLE_ADVANCED_SETTINGS",k="CATALOG:FORMAT_OPTIONS_FETCH",W="CATALOG:FORMAT_OPTIONS_LOADING",B="CATALOG:SET_FORMAT_OPTIONS",V="CATALOG:NEW_SERVICE_STATUS",U="CATALOG:INIT_PLUGIN";function H(){return{type:c,layers:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],sources:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.format,t=e.url,n=e.startPosition,o=e.maxRecords,i=e.text,u=e.options;return{type:s,format:r,url:t,startPosition:n,maxRecords:o,text:i,options:void 0===u?{}:u}}function X(e,r){return{type:f,searchOptions:e,result:r}}function $(e){return{type:m,format:e}}function Z(e){return{type:_,status:e}}function z(){return{type:I,loading:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}function Y(e){return{type:b,service:e}}function Q(e){return{type:E,status:e}}function K(e,r){return{type:O,mode:e,isNew:r}}function J(e){return{type:h,title:e}}function ee(e){return{type:w,text:e}}function re(e,r){return{type:T,property:e,value:r}}function te(e){return{type:C,format:e}}function ne(e){return{type:A,newType:e}}function oe(e){return{type:R,url:e}}function ie(e){return{type:G,options:e}}function ue(e){return{type:x,service:e}}function ae(e){return{type:P,service:e}}function ce(){return{type:L}}function le(){return{type:d}}function se(e){return{type:v,error:e}}function fe(){return{type:p}}function de(e,r){return{type:g,layer:e,error:r}}var pe=function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).zoomToLayer;return{type:l,layer:e,zoomToLayer:void 0!==r&&r}};function ve(e){return{type:y,error:e}}var me=function(e){return{type:S,metadataTemplate:e}},ye=function(){return{type:F}},ge=function(){return{type:j}},be=function(){return{type:N}},Oe=function(e,r){return{type:k,url:e,force:r}},Se=function(e){return{type:W,loading:e}},he=function(e,r){return{type:B,formats:e,url:r}},we=function(e){return{type:M,status:e}};function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,a.vU)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}var Te=function(e){return{type:V,status:e}},Ce=function(e){return{type:U,options:e}}},659551:(e,r,t)=>{t.d(r,{_b:()=>W,kv:()=>z,ZP:()=>J});var n=t(472500),o=t.n(n),i=t(227361),u=t.n(i),a=t(91175),c=t.n(a),l=t(610928),s=t.n(l),f=t(941106),d=t.n(f),p=t(414293),v=t.n(p),m=t(984596),y=t.n(m),g=t(441609),b=t.n(g),O=t(727418),S=t.n(O),h=t(505055),w=t.n(h),A=t(375875),T=t.n(A),C=t(737275),E=t(307887),R=t(501157),x=t(658918),P=t(611847);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function L(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,n,o,i){var c=n&&n.prototype instanceof a?n:a,l=Object.create(c.prototype);return _(l,"_invoke",function(t,n,o){var i,a,c,l=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(r,t){return i=r,a=0,c=e,d.n=t,u}};function p(t,n){for(a=t,c=n,r=0;!f&&l&&!o&&r<s.length;r++){var o,i=s[r],p=d.p,v=i[2];t>3?(o=v===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(a=0,d.v=n,d.n=i[1]):p<v&&(o=t<3||i[0]>n||n>v)&&(i[4]=t,i[5]=n,d.n=v,a=0))}if(o||t>1)return u;throw f=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),a=s,c=v;(r=a<2?e:c)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,c)):d.n=c:d.v=c);try{if(l=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((r=(f=d.n<0)?c:t.call(n,d))!==u)break}catch(r){i=e,a=1,c=r}finally{l=1}}return{value:r,done:f}}}(t,o,i),!0),l}var u={};function a(){}function c(){}function l(){}r=Object.getPrototypeOf;var s=[][n]?r(r([][n]())):(_(r={},n,function(){return this}),r),f=l.prototype=a.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=l,_(f,"constructor",l),_(l,"constructor",c),c.displayName="GeneratorFunction",_(l,o,"GeneratorFunction"),_(f),_(f,o,"Generator"),_(f,n,function(){return this}),_(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:i,m:d}})()}function _(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_=function(e,r,t,n){function i(r,t){_(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},_(e,r,t,n)}function D(e,r,t,n,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void t(e)}a.done?r(c):Promise.resolve(c).then(n,o)}function I(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return M(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(r){F(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function F(e,r,t){return(r=function(e){var r=function(e){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=G(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k=function(e){var r=o().parse((0,P.eW)(e),!0);return o().format(S()({},r,{search:null},{query:S()({service:"CSW",version:"2.0.2"},r.query,{request:void 0})}))},W=function(e){return'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="http://purl.org/dc/terms/" xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmi="http://www.isotc211.org/2005/gmi" '+'xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e.startPosition,'" maxRecords="').concat(e.maxRecords,'">')+'<csw:Query typeNames="csw:Record"><csw:ElementSetName>full</csw:ElementSetName><csw:Constraint version="1.1.0"><ogc:Filter>'+(e.filterXml||"")+"</ogc:Filter></csw:Constraint>"+(e.sortBy||"")+"</csw:Query></csw:GetRecords>"},B=function(e){var r=Object.keys(e||{}).reduce(function(r,t){var n=0===t.indexOf("dc:"),o=0===t.indexOf("dct:");if(n||o){var i=n?t.replace("dc:",""):t.replace("dct:",""),u=e[t];return"references"===i&&(u=y()(e[t]).map(function(e){var r;return{value:(0,C.$F)(null==e?void 0:e._),scheme:null==e||null===(r=e.$)||void 0===r?void 0:r.scheme}})),"URI"===i&&(u=y()(e[t]).map(function(e){var r,t,n;return{description:null==e||null===(r=e.$)||void 0===r?void 0:r.description,name:null==e||null===(t=e.$)||void 0===t?void 0:t.name,protocol:null==e||null===(n=e.$)||void 0===n?void 0:n.protocol,value:null==e?void 0:e._}})),N(N({},r),{},F({},i,u))}return r},{});return b()(r)?null:r},V=function(e){var r,t=null==e?void 0:e["ows:ExceptionReport"];return t?(null==t||null===(r=t["ows:Exception"])||void 0===r?void 0:r["ows:ExceptionText"])||"GenericError":""},U=function(e,r,t){if(!r.name)return null;switch(e){case"wms":case"wfs":var n=0!==r.value.indexOf("http")?(t&&t.catalogURL||"")+"/"+r.value:r.value;return{type:r.protocol||r.scheme,url:n,SRS:[],params:{name:r.name}};case"arcgis":return{type:"arcgis",url:r.value,SRS:[],params:{name:r.name}};default:return null}},H=[/^OGC:WMS-(.*)-http-get-map/g,/^OGC:WMS/g],q=[/^OGC:WFS-(.*)-http-get-(capabilities|feature)/g,/^OGC:WFS/g],X=/serviceType\/ogc\/wms/g,$=/serviceType\/ogc\/wfs/g,Z=H.concat(X),z=function(e,r){var t,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(null==e?void 0:e.URI)&&y()(e.URI),u=v()(null==r?void 0:r.type)||"wms"===(null==r?void 0:r.type),a="wfs"===(null==r?void 0:r.type);if(i){if(u){var l=c()(i.map(function(e){if(e.protocol){if(H.some(function(r){return e.protocol.match(r)}))return e;if(e.protocol.match(X))return function(e){var r=new Map(Array.from(new URLSearchParams(e.value)).map(function(e){var r=I(e,2),t=r[0],n=r[1];return[t.toLowerCase(),n]})),t=r.get("layers"),n=r.get("version");return!!t&&N(N({},e),{},{protocol:"OGC:WMS",name:t,value:"".concat(e.value.match(/[^\?]+[\?]+/g),"SERVICE=WMS").concat(n&&"&VERSION=".concat(n))})}(e)}return!1}).filter(function(e){return e}));if(l)return U("wms",l,r)}if(a){var s=c()(i.map(function(e){if(e.protocol){if(q.some(function(r){return e.protocol.match(r)}))return e;if(e.protocol.match($))return function(e){var r=new Map(Array.from(new URLSearchParams(e.value)).map(function(e){var r=I(e,2),t=r[0],n=r[1];return[t.toLowerCase(),n]})).get("typename");return!!r&&N(N({},e),{},{protocol:"OGC:WFS",name:r,value:"".concat(e.value.match(/[^\?]+[\?]+/g),"service=WFS")})}(e)}return!1}).filter(function(e){return e}));if(s)return U("wfs",s,r)}}if(null!=e&&null!==(t=e.references)&&void 0!==t&&t.length){var f=y()(e.references),d=c()(f.filter(function(e){return e.scheme&&H.some(function(r){return e.scheme.match(r)})})),p=c()(f.filter(function(e){return e.scheme&&q.some(function(r){return e.scheme.match(r)})}));if(u&&d){var m=o().parse((0,P.eW)(d.value),!0),g=m.query&&m.query.layers||e.alternative;return U("wms",N(N({},d),{},{value:o().format(m),name:g}),r)}if(a&&p){var b=o().parse((0,P.eW)(p.value),!0),O=b.query&&b.query.layers||e.alternative;return U("wfs",N(N({},p),{},{value:o().format(b),name:O}),r)}if(n){var S=c()(f.filter(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme}));if(S)return U("arcgis",N(N({},S),{},{name:e.alternative}),r)}}return null},Y={},Q=function(){var e,r=(e=L().m(function e(r){var t,n,o,i;return L().w(function(e){for(;;)switch(e.n){case 0:if(r){e.n=1;break}return e.a(2,r);case 1:if(null==(t=r.records)||!t.length){e.n=3;break}return n=t.map(function(e){var r;if((null==e||null===(r=e.dc)||void 0===r?void 0:r.format)===x.X){var t,n,o=null===(t=e.dc)||void 0===t||null===(n=t.URI)||void 0===n?void 0:n.value;return(0,x.F)(o)}return Promise.resolve(null)}),e.n=2,Promise.all(n);case 2:return o=e.v,i=t.map(function(e,r){var t,n,i=o[r];if(!i||null==i||null===(t=i.bbox)||void 0===t||!t.bounds||null==i||null===(n=i.bbox)||void 0===n||!n.crs)return e;var u=(0,E.getExtentFromNormalized)(i.bbox.bounds,i.bbox.crs);return N(N({},e),{},{boundingBox:{extent:u.extent,crs:i.bbox.crs}})}),e.a(2,N(N({},r),{},{records:i}));case 3:return e.a(2,r)}},e)}),function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function u(e){D(i,n,o,u,a,"next",e)}function a(e){D(i,n,o,u,a,"throw",e)}u(void 0)})});return function(e){return r.apply(this,arguments)}}(),K={parseUrl:k,getRecordById:function(e){return T().get(e).then(function(e){if(e){var r,t,n;w().parseString(e.data,{explicitArray:!1},function(e,r){n=r});var o=null===(r=n)||void 0===r||null===(t=r["csw:GetRecordByIdResponse"])||void 0===t?void 0:t["csw:Record"],i=B(o);if(i)return{dc:i};var u=V(n);if(u)return{error:u}}return null})},getRecords:function(e,r,t,n,o){var i=function(e,r,t){var n,o,i,u=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).options,a=(void 0===u?{}:u).service,c=null!=a?a:{},l=c.filter,s=c.sortBy,f=(null==l?void 0:l.staticFilter)||"<ogc:Or>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n       </ogc:Or>",p="<ogc:And>\n        ".concat(d()((null==l?void 0:l.dynamicFilter)||"<ogc:PropertyIsLike wildCard='%' singleChar='_' escapeChar='\\'><ogc:PropertyName>csw:AnyText</ogc:PropertyName> <ogc:Literal>%${searchText}%</ogc:Literal> </ogc:PropertyIsLike> ")({searchText:t}),"\n        ").concat(f,"\n    </ogc:And>"),v=null!=s&&s.name?(i=(o={name:null==s?void 0:s.name,order:null!==(n=null==s?void 0:s.order)&&void 0!==n?n:"ASC"}).order,"<ogc:SortBy><ogc:SortProperty>"+"<ogc:PropertyName>".concat(o.name,"</ogc:PropertyName>")+"<ogc:SortOrder>".concat(i,"</ogc:SortOrder>")+"</ogc:SortProperty></ogc:SortBy>"):"";return W({filterXml:t?p:f,startPosition:e,maxRecords:r,sortBy:v})}(r,t,n,o);return T().post(k(e),i,{headers:{"Content-Type":"application/xml"}}).then(function(e){var r=function(e){var r,t,n;if(!e)return null;w().parseString(e.data,{explicitArray:!1},function(e,r){n=r});var o=null===(r=n)||void 0===r||null===(t=r["csw:GetRecordsResponse"])||void 0===t?void 0:t["csw:SearchResults"];if(o){var i,u,a,c=(null==o?void 0:o["csw:Record"])||(null==o?void 0:o["gmd:MD_Metadata"]),l=c?y()(c).map(function(e){var r,t,n,o=function(e){if(null!=e&&e["ows:BoundingBox"]){var r=y()(e["ows:BoundingBox"])[0],t=function(e){var r,t,n,o,i=null!==(r=null==e||null===(t=e.$)||void 0===t?void 0:t.crs)&&void 0!==r?r:"",u=null===(n=i.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===n?void 0:n[0],a=(0,E.makeNumericEPSG)(null===(o=i.match(/EPSG:[0-9]+/))||void 0===o?void 0:o[0])||(0,E.extractCrsFromURN)(u)||s()(i.split(":"));return a?"EPSG:"===a.slice(0,5)?{crs:(0,E.makeNumericEPSG)(a),extractedCrs:a}:{crs:(0,E.makeNumericEPSG)("EPSG:".concat(a)),extractedCrs:a}:{crs:"EPSG:4326",extractedCrs:a}}(r),n=t.crs,o=t.extractedCrs,i=((null==r?void 0:r["ows:LowerCorner"])||"-180 -90").split(" ").map(parseFloat),u=((null==r?void 0:r["ows:UpperCorner"])||"180 90").split(" ").map(parseFloat);return"EPSG:4326"===n&&"CRS84"!==o&&"OGC:CRS84"!==o&&(i=[i[1],i[0]],u=[u[1],u[0]]),{extent:(0,E.makeBboxFromOWS)(i,u),crs:"EPSG:4326"}}return null}(e),i=B(e);return N(N({dateStamp:null==e||null===(r=e["gmd:dateStamp"])||void 0===r?void 0:r["gco:Date"],fileIdentifier:null==e||null===(t=e["gmd:fileIdentifier"])||void 0===t?void 0:t["gco:CharacterString"],identificationInfo:null==e||null===(n=e["gmd:identificationInfo"])||void 0===n?void 0:n["gmd:AbstractMD_Identification"]},o&&{boundingBox:o}),i&&{dc:i})}):null,f=l?l.map(function(e){var r,t=e.dc,n=void 0===t?{}:t;return y()((null==n||null===(r=n.references)||void 0===r?void 0:r.length)>0?n.references:n.URI)}).flat():void 0;return{result:N({numberOfRecordsMatched:parseFloat(null==o||null===(i=o.$)||void 0===i?void 0:i.numberOfRecordsMatched),numberOfRecordsReturned:parseFloat(null==o||null===(u=o.$)||void 0===u?void 0:u.numberOfRecordsReturned),nextRecord:parseFloat(null==o||null===(a=o.$)||void 0===a?void 0:a.nextRecord)},l&&{records:l}),_dcRef:f}}var d=V(n);return d?{error:d}:null}(e)||{},t=r.error,n=r._dcRef,i=r.result;return i?function(e,r,t){if(!u()(t,"options.service.autoSetVisibilityLimits",!1))return r;var n=((null==e?void 0:e.find(function(e){return Z.some(function(r){var t,n;return(null==e||null===(t=e.scheme)||void 0===t?void 0:t.match(r))||(null==e||null===(n=e.protocol)||void 0===n?void 0:n.match(r))})}))||{}).value,o=I(n&&n.split("?")||[],1)[0];if(!o)return N({},r);var i=Y[o],a=!b()(i);return Promise.resolve(a?i:R.ZP.getCapabilities(o+"?version=").then(function(e){return R.ZP.flatLayers(e.Capability)}).catch(function(){return[]})).then(function(e){var t;return a||(Y[o]=e),N(N({},r),{},{records:null==r||null===(t=r.records)||void 0===t?void 0:t.map(function(r){var t=u()(z(null==r?void 0:r.dc,null,!1),"params.name",""),n=e.find(function(e){return e.Name===t})||{},o=n.MinScaleDenominator,i=n.MaxScaleDenominator;return N(N({},r),(!v()(o)||!v()(i))&&{capabilities:{MaxScaleDenominator:i,MinScaleDenominator:o}})})})})}(n,i,o):t?{error:t}:null}).then(function(e){return Q(e)})},textSearch:function(e,r,t,n,o){return new Promise(function(i){i(K.getRecords(e,r,t,n,o))})},workspaceSearch:function(e,r,t,n,o){var i=o||"%",u=n&&"%"+n+"%"||"%";return K.getRecords(e,r,t,"",{options:{service:{filter:{staticFilter:'<ogc:PropertyIsLike wildCard="%" singleChar="_" escapeChar="\\\\"><ogc:PropertyName>dc:identifier</ogc:PropertyName>'+"<ogc:Literal>".concat(i+":"+u,"</ogc:Literal>")+"</ogc:PropertyIsLike>"}}}})},reset:function(){}};const J=K},658918:(e,r,t)=>{t.d(r,{F:()=>v,X:()=>m});var n=t(375875),o=t.n(n),i=t(307887),u=t(552259),a=t(598223);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){f(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function f(e,r,t){return(r=function(e){var r=function(e){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return p(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var v=function(e){return o().get(e).then(function(e){var r,n=e.data;return(r=n,Promise.all([t.e(86103),t.e(77458),t.e(45110),t.e(39512),t.e(49246),t.e(82582)]).then(t.bind(t,149246)).then(function(e){var t,n,o,a,c=e,l=void 0!==(null==r||null===(t=r.asset)||void 0===t?void 0:t.version)?r.asset.version:"1.0",f=function(e,r){var t,n,o,a,c,l;if(null!=r&&null!==(t=r.root)&&void 0!==t&&null!==(n=t.boundingVolume)&&void 0!==n&&n.region){var s=d(r.root.boundingVolume.region,4),f=s[0],p=s[1],v=s[2],m=s[3];return{bounds:{minx:(0,i.convertRadianToDegrees)(f),miny:(0,i.convertRadianToDegrees)(p),maxx:(0,i.convertRadianToDegrees)(v),maxy:(0,i.convertRadianToDegrees)(m)},crs:"EPSG:4326"}}var y=e.Matrix4.fromArray(r.root.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(null!=r&&null!==(o=r.root)&&void 0!==o&&null!==(a=o.boundingVolume)&&void 0!==a&&a.box){var g=d(r.root.boundingVolume.box,3),b=g[0],O=g[1],S=g[2],h=e.Matrix4.multiplyByPoint(y,new e.Cartesian3(b,O,S),new e.Cartesian3),w=e.Matrix4.getMatrix3(y,new e.Matrix4),A=e.Matrix3.multiply(w,e.Matrix3.fromArray(r.root.boundingVolume.box,3,new e.Matrix3),new e.Matrix3),T=e.BoundingSphere.fromOrientedBoundingBox(new e.OrientedBoundingBox(h,A)),C=e.Cartographic.fromCartesian(T.center);if(!C)return null;var E=(0,i.convertRadianToDegrees)(C.longitude),R=(0,i.convertRadianToDegrees)(C.latitude),x=T.radius/u.Wm.degrees;return{bounds:{minx:E-x,miny:R-x,maxx:E+x,maxy:R+x},crs:"EPSG:4326"}}if(null!=r&&null!==(c=r.root)&&void 0!==c&&null!==(l=c.boundingVolume)&&void 0!==l&&l.sphere){var P=d(r.root.boundingVolume.sphere,4),G=P[0],L=P[1],_=P[2],D=P[3],I=e.Matrix4.multiplyByPoint(y,new e.Cartesian3(G,L,_),new e.Cartesian3),M=e.Matrix4.getScale(y,new e.Matrix4),j=D*e.Cartesian3.maximumComponent(M)/u.Wm.degrees,N=e.Cartographic.fromCartesian(I);if(!N)return null;var F=(0,i.convertRadianToDegrees)(N.longitude),k=(0,i.convertRadianToDegrees)(N.latitude);return{bounds:{minx:F-j,miny:k-j,maxx:F+j,maxy:k+j},crs:"EPSG:4326"}}return null}(c,r),p=(a=((null==r||null===(n=r.root)||void 0===n||null===(o=n.content)||void 0===o?void 0:o.uri)||"").split(/\./g))[a.length-1],v=null==r?void 0:r.properties;return s(s({version:l},f&&{bbox:f}),{},{format:p,properties:v})})).then(function(e){return s({tileset:n},e)})}).catch(function(e){return(0,a.H)(e),{tileset:{}}})},m="3D Tiles"},603475:(e,r,t)=>{t.d(r,{hn:()=>C,ZP:()=>E});var n=t(375875),o=t.n(n),i=t(737275),u=t(472500),a=t.n(u),c=t(727418),l=t.n(c),s=t(505055),f=t.n(s),d=t(984596),p=t.n(d),v=t(307887),m=t(611847),y=t(707294);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){S(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function S(e,r,t){return(r=function(e){var r=function(e){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=g(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var h={},w=function(e){var r=a().parse((0,m.eW)(e),!0);return a().format(l()({},r,{search:null},{query:l()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},r.query)}))},A=function(e,r,t,n,o){for(var i=e.Capabilities.Contents,u=(0,y.G6)(e),a=(0,y.s5)(e),c=i.TileMatrixSet&&p()(i.TileMatrixSet)||[],s=[],f=c.length,d=0;d<f;d++)s.push((0,v.getEPSGCode)(c[d]["ows:SupportedCRS"]));var m=i.Layer,g=p()(m).filter(function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())});return{numberOfRecordsMatched:g.length,numberOfRecordsReturned:Math.min(t,g.length),nextRecord:r+Math.min(t,g.length)+1,records:g.filter(function(e,n){return n>=r-1&&n<r-1+t}).map(function(e){return l()({},e,{SRS:s,TileMatrixSet:c,queryable:!!(0,y.b4)(u,"GetFeatureInfo","KVP"),requestEncoding:a,style:(0,y.EN)(e),format:(0,y.JY)(e),formats:p()(e.Format),GetTileURL:(0,y.b4)(u,"GetTile",a),capabilitiesURL:o})})}},T={parseUrl:w,getRecords:function(e,r,t,n){var u=h[e];return u&&(new Date).getTime()<u.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise(function(o){o(A(u.data,r,t,n,e))}):o().get(w(e)).then(function(o){var i;return f().parseString(o.data,{explicitArray:!1},function(e,r){i=r}),h[e]={timestamp:(new Date).getTime(),data:i},A(i,r,t,n,e)})},getCapabilities:function(e,r){null!=r&&r.force&&h[e]&&delete h[e];var t=h[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise(function(e){e(t.data)}):o().get(w(e)).then(function(r){var t;return f().parseString(r.data,{explicitArray:!1},function(e,r){t=r}),h[e]={timestamp:(new Date).getTime(),data:t},t})},textSearch:function(e,r,t,n){return T.getRecords(e,r,t,n)},reset:function(){Object.keys(h).forEach(function(e){delete h[e]})}},C=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return T.getCapabilities(e,{force:null==t?void 0:t.force}).then(function(e){var t,n,o,i,u=r.split(":"),a=p()((null==e||null===(t=e.Capabilities)||void 0===t||null===(n=t.Contents)||void 0===n?void 0:n.Layer)||[]).find(function(e){return e["ows:Identifier"]===u[1]||e["ows:Identifier"]===r}),c=p()((null==a?void 0:a.TileMatrixSetLink)||[]).map(function(e){return e.TileMatrixSet}),l=p()((null==e||null===(o=e.Capabilities)||void 0===o||null===(i=o.Contents)||void 0===i?void 0:i.TileMatrixSet)||[]).filter(function(e){return c.includes(e["ows:Identifier"])}),s=l.map(function(e){var r=e.TileMatrix.map(function(e){return e.TopLeftCorner.split(" ").map(parseFloat)}),t=e.TileMatrix.map(function(e){return[parseFloat(e.TileWidth),parseFloat(e.TileHeight)]}),n=r[0],o=t[0],i=r.every(function(e){return n[0]===e[0]&&n[1]===e[1]}),u=t.every(function(e){return o[0]===e[0]&&o[1]===e[1]});return O(O({id:e["ows:Identifier"],crs:(0,v.getEPSGCode)(e["ows:SupportedCRS"]),scales:e.TileMatrix.map(function(e){return parseFloat(e.ScaleDenominator)})},i?{origin:n}:{origins:r}),u?{tileSize:o}:{tileSizes:t})});return{tileMatrixSets:l,tileMatrixSetLinks:c,tileGrids:s,styles:p()((null==a?void 0:a.Style)||[]).map(function(e){return e["ows:Identifier"]}),formats:p()((null==a?void 0:a.Format)||[])}})};const E=T},932354:(e,r,t)=>{t.d(r,{Z:()=>a});var n=t(227361),o=t.n(n),i=t(737275),u=function(e,r,t,n){var u=o()(i.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter(function(e){return!n||e.title.indexOf(n)>-1}),a=u.filter(function(e,n){return n>=r-1&&n<t+r-1});return new Promise(function(e){return e({numberOfRecordsMatched:u.length,numberOfRecordsReturned:a.length,records:a,service:{Name:"Background Provider"}})})};const a={getRecords:u,reset:function(){},textSearch:function(e,r,t,n){return u(0,r,t,n)}}}}]);