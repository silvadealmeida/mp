(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[28353],{798143:function(t,e,i){var r,n;void 0===(n="function"==typeof(r=function(){function t(t,e){return function(i,r,n,s){i[t]?i[t](r,n,s):i[e]&&i[e]("on"+r,n)}}return{add:t("addEventListener","attachEvent"),remove:t("removeEventListener","detachEvent")}})?r.call(e,i,e,t):r)||(t.exports=n)},581399:function(t,e){var i,r,n;!function(s,o){"use strict";"object"==typeof t.exports?t.exports=o():(r=[],void 0===(n="function"==typeof(i=o)?i.apply(e,r):i)||(t.exports=n))}("object"==typeof window&&window,function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this._LRUCacheState=new i(e)}var e=t.prototype;function i(t){this.capacity=t>0?+t:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,this.data=Object.create?Object.create(null):{},this.hash=Object.create?Object.create(null):{},this.linkedList=new r}function r(){this.length=0,this.head=null,this.end=null}function n(t){this.key=t,this.p=null,this.n=null}function s(t,e){e!==t.head&&(t.end?t.end===e&&(t.end=e.n):t.end=e,o(e.n,e.p),o(e,t.head),t.head=e,t.head.n=null)}function o(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}return e.get=function(t){var e=this._LRUCacheState,i=e.hash[t];if(i)return s(e.linkedList,i),e.data[t]},e.set=function(t,e){var i=this._LRUCacheState,r=i.hash[t];return void 0===e||(r||(i.hash[t]=new n(t),i.linkedList.length+=1,r=i.hash[t]),s(i.linkedList,r),i.data[t]=e,i.linkedList.length>i.capacity&&this.remove(i.linkedList.end.key)),this},e.update=function(t,e){return this.has(t)&&this.set(t,e(this.get(t))),this},e.remove=function(t){var e=this._LRUCacheState,i=e.hash[t];return i?(i===e.linkedList.head&&(e.linkedList.head=i.p),i===e.linkedList.end&&(e.linkedList.end=i.n),o(i.n,i.p),delete e.hash[t],delete e.data[t],e.linkedList.length-=1,this):this},e.removeAll=function(){return this._LRUCacheState=new i(this._LRUCacheState.capacity),this},e.info=function(){var t=this._LRUCacheState;return{capacity:t.capacity,length:t.linkedList.length}},e.keys=function(){for(var t=[],e=this._LRUCacheState.linkedList.head;e;)t.push(e.key),e=e.p;return t},e.has=function(t){return!!this._LRUCacheState.hash[t]},e.staleKey=function(){return this._LRUCacheState.linkedList.end&&this._LRUCacheState.linkedList.end.key},e.popStale=function(){var t=this.staleKey();if(!t)return null;var e=[t,this._LRUCacheState.data[t]];return this.remove(t),e},t})},839646:(t,e,i)=>{"use strict";t.exports=n;var r=i(680645);function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var s=4294967296,o=1/s,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function u(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function T(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function E(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=7&r,t(n,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+y(this.buf,this.pos+4)*s;return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+v(this.buf,this.pos+4)*s;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,s=i.buf;if(r=(112&(n=s[i.pos++]))>>4,n<128)return h(t,r,e);if(r|=(127&(n=s[i.pos++]))<<3,n<128)return h(t,r,e);if(r|=(127&(n=s[i.pos++]))<<10,n<128)return h(t,r,e);if(r|=(127&(n=s[i.pos++]))<<17,n<128)return h(t,r,e);if(r|=(127&(n=s[i.pos++]))<<24,n<128)return h(t,r,e);if(r|=(1&(n=s[i.pos++]))<<31,n<128)return h(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&a?function(t,e,i){return a.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var s,o,a,l=t[n],h=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>i)break;1===c?l<128&&(h=l):2===c?128==(192&(s=t[n+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(s=t[n+1],o=t[n+2],128==(192&s)&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(s=t[n+1],o=t[n+2],a=t[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var i=l(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==n.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,s=0;s<e.length;s++){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){r>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&c(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&c(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,T,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,E,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},80349:(t,e,i)=>{"use strict";i.d(e,{G0:()=>o,px:()=>a,qo:()=>h,ZP:()=>d});var r=i(394806),n=i(637195),s=i(968326);function o(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let l=null;function h(t){l||(l=(0,s.E4)(t.width,t.height,void 0,{willReadFrequently:!0}));const e=l.canvas,i=t.width;e.width!==i&&(e.width=i);const r=t.height;return e.height!==r&&(e.height=r),l.clearRect(0,0,i,r),l.drawImage(t,0,0),l.getImageData(0,0,i,r).data}const c=[256,256];class u extends r.Z{constructor(t){const e=n.Z.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;const t=o(this.data_);return t?[t.width,t.height]:c}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==n.Z.IDLE&&this.state!==n.Z.ERROR)return;this.state=n.Z.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=n.Z.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=n.Z.ERROR,t.changed()})}}const d=u},132126:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},843223:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var r=i(372971),n=i(132126),s=i(810245),o=i(928641),a=i(465818),l=i(968326);const h="element",c="map",u="offset",d="position",g="positioning";class f extends r.Z{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+s.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener(c,this.handleMapChanged),this.addChangeListener(u,this.handleOffsetChanged),this.addChangeListener(d,this.handlePositionChanged),this.addChangeListener(g,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get(c)||null}getOffset(){return this.get(u)}getPosition(){return this.get(d)}getPositioning(){return this.get(g)}handleElementChanged(){(0,l.ep)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,a.oL)(t,n.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(h,t)}setMap(t){this.set(c,t)}setOffset(t){this.set(u,t)}setPosition(t){this.set(d,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(d))return;const i=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),n=this.getRect(r,[(0,l.iO)(r),(0,l.Pb)(r)]),s=void 0===(t=t||{}).margin?20:t.margin;if(!(0,o.r4)(i,n)){const r=n[0]-i[0],o=i[2]-n[2],a=n[1]-i[1],l=i[3]-n[3],h=[0,0];if(r<0?h[0]=r-s:o<0&&(h[0]=Math.abs(o)+s),a<0?h[1]=a-s:l<0&&(h[1]=Math.abs(l)+s),0!==h[0]||0!==h[1]){const i=e.getView().getCenterInternal(),r=e.getPixelFromCoordinateInternal(i);if(!r)return;const n=[r[0]+h[0],r[1]+h[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(n),duration:s.duration,easing:s.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[r,n,r+e[0],n+e[1]]}setPositioning(t){this.set(g,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,e){const i=this.element.style,r=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let s="0%",o="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?s="-100%":"bottom-center"!=n&&"center-center"!=n&&"top-center"!=n||(s="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?o="-100%":"center-left"!=n&&"center-center"!=n&&"center-right"!=n||(o="-50%");const a=`translate(${s}, ${o}) translate(${Math.round(t[0]+r[0])+"px"}, ${Math.round(t[1]+r[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}}const p=f},211702:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var r=i(946131),n=i(98634);class s extends r.Z{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,n.Ul)(t)[0];this.forEach(t=>{t.tileCoord[0]!==e&&(this.remove((0,n.km)(t.tileCoord)),t.release())})}}const o=s},559011:(t,e,i)=>{"use strict";i.d(e,{Z:()=>A});var r=i(729646),n=i(492083),s=i(907403),o=i(236259),a=i(125063),l=i(839646),h=i(960188),c=i(302033),u=i(429619),d=i(506101),g=i(928641),f=i(465537),p=i(173448),_=i(31660),m=i(249405),T=i(941071),E=i(676442);const y=(0,d.Ue)();class x{constructor(t,e,i,r,n){this.styleFunction,this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,g.HK)(this.flatCoordinates_):(0,g.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,g.qg)(this.getExtent());this.flatInteriorPoints_=(0,p.X)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,T.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,p.U)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,m.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let r=0,n=i.length;r<n;++r){const n=i[r],s=(0,m.WW)(t,e,n,2,.5);(0,f.l7)(this.flatMidpoints_,s),e=n}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,_.U2)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const t=(0,g.Cr)(i)/(0,g.Cr)(e);(0,d.qC)(y,i[0],i[3],t,-t,0,0,0),(0,E.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,y,this.flatCoordinates_)}}getEnds(){return this.ends_}}x.prototype.getEndss=x.prototype.getEnds,x.prototype.getFlatCoordinates=x.prototype.getOrientedFlatCoordinates;const v=x;var R=i(199515),S=i(74772);class C extends r.ZP{constructor(t){super(),t=t||{},this.dataProjection=new u.Z({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:v,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,r){t.pos=e.geometry;const n=t.readVarint()+t.pos;let s=1,o=0,a=0,l=0,h=0,c=0;for(;t.pos<n;){if(!o){const e=t.readVarint();s=7&e,o=e>>3}o--,1===s||2===s?(a+=t.readSVarint(),l+=t.readSVarint(),1===s&&h>c&&(r.push(h),c=h),i.push(a,l),h+=2):7===s?h>c&&(i.push(i[c],i[c+1]),h+=2):(0,R.h)(!1,59)}h>c&&(r.push(h),c=h)}createFeature_(t,e,i){const l=e.type;if(0===l)return null;let u;const d=e.properties;let g;this.idProperty_?(g=d[this.idProperty_],delete d[this.idProperty_]):g=e.id,d[this.layerName_]=e.layer.name;const f=[],p=[];this.readRawGeometry_(t,e,f,p);const _=function(t,e){let i;return 1===t?i=1===e?"Point":"MultiPoint":2===t?i=1===e?"LineString":"MultiLineString":3===t&&(i="Polygon"),i}(l,p.length);if(this.featureClass_===v)u=new this.featureClass_(_,f,p,d,g),u.transform(i.dataProjection);else{let t;if("Polygon"==_){const e=(0,S.Q3)(f,p);t=e.length>1?new a.Z(f,"XY",e):new c.ZP(f,"XY",p)}else t="Point"===_?new h.Z(f,"XY"):"LineString"===_?new n.Z(f,"XY"):"MultiPoint"===_?new o.Z(f,"XY"):"MultiLineString"===_?new s.Z(f,"XY",p):null;u=new(0,this.featureClass_),this.geometryName_&&u.setGeometryName(this.geometryName_);const e=(0,r.fI)(t,!1,i);u.setGeometry(e),void 0!==g&&u.setId(g),u.setProperties(d,!0)}return u}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_;e=this.adaptOptions(e);const r=(0,_.U2)(e.dataProjection);r.setWorldExtent(e.extent),e.dataProjection=r;const n=new l(t),s=n.readFields(w,{}),o=[];for(const t in s){if(i&&!i.includes(t))continue;const a=s[t],l=a?[0,0,a.extent,a.extent]:null;r.setExtent(l);for(let t=0,i=a.length;t<i;++t){const i=F(n,a,t),r=this.createFeature_(n,i,e);null!==r&&o.push(r)}}return o}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function w(t,e,i){if(3===t){const t={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(P,t,r),t.length=t.features.length,t.length&&(e[t.name]=t)}}function P(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let r=null;const n=i.readVarint()+i.pos;for(;i.pos<n;)r=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function b(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){const t=i.readVarint()+i.pos;for(;i.pos<t;){const t=e.layer.keys[i.readVarint()],r=e.layer.values[i.readVarint()];e.properties[t]=r}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function F(t,e,i){t.pos=e.features[i];const r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(b,n,r),n}const A=C},944906:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var r=i(81090),n=i(836515),s=i(492083),o=i(907403),a=i(236259),l=i(125063),h=i(960188),c=i(302033),u=i(31660),d=i(729646);class g extends n.Z{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=(0,u.U2)(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if("Topology"==t.type){const i=t;let r,n=null,s=null;i.transform&&(r=i.transform,n=r.scale,s=r.translate);const o=i.arcs;r&&function(t,e,i){for(let r=0,n=t.length;r<n;++r)T(t[r],e,i)}(o,n,s);const a=[],l=i.objects,h=this.layerName_;let c;for(const t in l)this.layers_&&!this.layers_.includes(t)||("GeometryCollection"===l[t].type?(c=l[t],a.push.apply(a,_(c,o,n,s,h,t,e))):(c=l[t],a.push(m(c,o,n,s,h,t,e))));return a}return[]}readProjectionFromObject(t){return this.dataProjection}}const f={Point:function(t,e,i){const r=t.coordinates;return e&&i&&E(r,e,i),new h.Z(r)},LineString:function(t,e){const i=p(t.arcs,e);return new s.Z(i)},Polygon:function(t,e){const i=[];for(let r=0,n=t.arcs.length;r<n;++r)i[r]=p(t.arcs[r],e);return new c.ZP(i)},MultiPoint:function(t,e,i){const r=t.coordinates;if(e&&i)for(let t=0,n=r.length;t<n;++t)E(r[t],e,i);return new a.Z(r)},MultiLineString:function(t,e){const i=[];for(let r=0,n=t.arcs.length;r<n;++r)i[r]=p(t.arcs[r],e);return new o.Z(i)},MultiPolygon:function(t,e){const i=[];for(let r=0,n=t.arcs.length;r<n;++r){const n=t.arcs[r],s=[];for(let t=0,i=n.length;t<i;++t)s[t]=p(n[t],e);i[r]=s}return new l.Z(i)}};function p(t,e){const i=[];let r;for(let n=0,s=t.length;n<s;++n)if(r=t[n],n>0&&i.pop(),r>=0){const t=e[r];for(let e=0,r=t.length;e<r;++e)i.push(t[e].slice(0))}else{const t=e[~r];for(let e=t.length-1;e>=0;--e)i.push(t[e].slice(0))}return i}function _(t,e,i,r,n,s,o){const a=t.geometries,l=[];for(let t=0,h=a.length;t<h;++t)l[t]=m(a[t],e,i,r,n,s,o);return l}function m(t,e,i,n,s,o,a){let l=null;const h=t.type;if(h){const r=f[h];l="Point"===h||"MultiPoint"===h?r(t,i,n):r(t,e),l=(0,d.fI)(l,!1,a)}const c=new r.Z({geometry:l});void 0!==t.id&&c.setId(t.id);let u=t.properties;return s&&(u||(u={}),u[s]=o),u&&c.setProperties(u,!0),c}function T(t,e,i){let r=0,n=0;for(let s=0,o=t.length;s<o;++s){const o=t[s];r+=o[0],n+=o[1],o[0]=r,o[1]=n,E(o,e,i)}}function E(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}const y=g},698712:(t,e,i)=>{"use strict";i.d(e,{Z:()=>R});var r=i(602989),n=i(135570),s=i(354890),o=i(708845),a=i(637195),l=i(737755),h=i(329272),c=i(506101),u=i(928641),d=i(276234),g=i(974187),f=i(904307),p=i(391900);const _={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},m={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class T extends o.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=(0,c.Ue)()}prepareTile(t,e,i){let r;const n=t.getState();return n!==a.Z.LOADED&&n!==a.Z.ERROR||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(r=!0)),r}getTile(t,e,i,r){const n=r.pixelRatio,s=r.viewState,o=s.resolution,a=s.projection,h=this.getLayer(),c=h.getSource().getTile(t,e,i,n,a),u=r.viewHints,d=!(u[l.Z.ANIMATING]||u[l.Z.INTERACTING]);return!d&&c.wantedResolution||(c.wantedResolution=o),this.prepareTile(c,n,a)&&(d||Date.now()-r.time<8)&&"vector"!==h.getRenderMode()&&this.renderTileImage_(c,r),super.getTile(t,e,i,r)}isDrawableTile(t){const e=this.getLayer();return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?(0,g.sq)(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const r=this.getLayer(),o=r.getRevision(),l=r.getRenderOrder()||null,h=t.wantedResolution,c=t.getReplayState(r);if(!c.dirty&&c.renderedResolution===h&&c.renderedRevision==o&&c.renderedRenderOrder==l)return;const f=r.getSource(),p=r.getDeclutter(),_=f.getTileGrid(),m=f.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),T=f.getSourceTiles(e,i,t),E=(0,g.sq)(r);delete t.hitDetectionImageData[E],t.executorGroups[E]=[],p&&(t.declutterExecutorGroups[E]=[]),c.dirty=!1;for(let i=0,o=T.length;i<o;++i){const o=T[i];if(o.getState()!=a.Z.LOADED)continue;const g=o.tileCoord,y=_.getTileCoordExtent(g),x=(0,u.Ed)(m,y),v=(0,u.f3)(x,r.getRenderBuffer()*h,this.tmpExtent),R=(0,u.fS)(y,x)?null:v,S=new n.Z(0,v,h,e),C=p?new n.Z(0,x,h,e):void 0,w=(0,d.se)(h,e),P=function(t){let e;const i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,h)),e){const i=this.renderFeature(t,w,e,S,C);c.dirty=c.dirty||i}},b=o.getFeatures();l&&l!==c.renderedRenderOrder&&b.sort(l);for(let t=0,e=b.length;t<e;++t){const e=b[t];R&&!(0,u.kK)(R,e.getGeometry().getExtent())||P.call(this,e)}const F=S.finish(),A="vector"!==r.getRenderMode()&&p&&1===T.length?null:x,L=new s.Z(A,h,e,f.getOverlaps(),F,r.getRenderBuffer());if(t.executorGroups[E].push(L),C){const i=new s.Z(null,h,e,f.getOverlaps(),C.finish(),r.getRenderBuffer());t.declutterExecutorGroups[E].push(i)}}c.renderedRevision=o,c.renderedRenderOrder=l,c.renderedResolution=h}forEachFeatureAtCoordinate(t,e,i,r,n){const s=e.viewState.resolution,o=e.viewState.rotation;i=null==i?0:i;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(e.viewState.projection),h=(0,u.hI)([t]);(0,u.f3)(h,s*i,h);const c={},d=function(t,e,i){let s=t.getId();void 0===s&&(s=(0,g.sq)(t));const o=c[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return c[s]=!0,n.splice(n.lastIndexOf(o),1),r(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return c[s]=!0,r(t,a,e);n.push(c[s]={feature:t,layer:a,geometry:e,distanceSq:i,callback:r})}},f=this.renderedTiles;let p;for(let r=0,n=f.length;!p&&r<n;++r){const n=f[r],c=l.getTileCoordExtent(n.wrappedTileCoord);if(!(0,u.kK)(c,h))continue;const _=(0,g.sq)(a),m=[n.executorGroups[_]],T=n.declutterExecutorGroups[_];T&&m.push(T),m.some(r=>{const n=r===T?e.declutterTree.all().map(t=>t.value):null;for(let e=0,a=r.length;e<a;++e){const a=r[e];if(p=a.forEachFeatureAtCoordinate(t,s,o,i,d,n),p)return!0}})}return p}getFeatures(t){return new Promise((e,i)=>{const r=this.getLayer(),n=(0,g.sq)(r),s=r.getSource(),o=this.renderedProjection,l=o.getExtent(),d=this.renderedResolution,_=s.getTileGridForProjection(o),m=(0,c.nn)(this.renderedPixelToCoordinateTransform_,t.slice()),T=_.getTileCoordForCoordAndResolution(m,d);let E;for(let t=0,e=this.renderedTiles.length;t<e;++t)if(T.toString()===this.renderedTiles[t].tileCoord.toString()){if(E=this.renderedTiles[t],E.getState()===a.Z.LOADED){const t=_.getTileCoordExtent(E.tileCoord);s.getWrapX()&&o.canWrapX()&&!(0,u.r4)(l,t)&&(0,p.Cf)(m,o);break}E=void 0}if(!E||E.loadingSourceTiles>0)return void e([]);const y=_.getTileCoordExtent(E.wrappedTileCoord),x=(0,u.rL)(y),v=[(m[0]-x[0])/d,(x[1]-m[1])/d],R=E.getSourceTiles().reduce(function(t,e){return t.concat(e.getFeatures())},[]);let S=E.hitDetectionImageData[n];if(!S){const t=(0,f.Pq)(_.getTileSize(_.getZForResolution(d,s.zDirection))),e=this.renderedRotation_,i=[this.getRenderTransform(_.getTileCoordCenter(E.wrappedTileCoord),d,0,h.UN,t[0]*h.UN,t[1]*h.UN,0)];S=(0,h.TU)(t,i,R,r.getStyleFunction(),_.getTileCoordExtent(E.wrappedTileCoord),E.getReplayState(r).renderedResolution,e),E.hitDetectionImageData[n]=S}e((0,h.ix)(v,R,S))})}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t){const e=this.context,i=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();const r=t.viewHints,n=!(r[l.Z.ANIMATING]||r[l.Z.INTERACTING]),s=this.renderedTiles;for(let e=0,i=s.length;e<i;++e){const i=s[e],r=i.declutterExecutorGroups[(0,g.sq)(this.getLayer())];if(r)for(let e=r.length-1;e>=0;--e)r[e].execute(this.context,1,this.getTileRenderTransform(i,t),t.viewState.rotation,n,void 0,t.declutterTree)}e.globalAlpha=i}getTileRenderTransform(t,e){const i=e.pixelRatio,r=e.viewState,n=r.center,s=r.resolution,o=r.rotation,a=e.size,l=Math.round(a[0]*i),h=Math.round(a[1]*i),u=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),d=t.tileCoord,g=u.getTileCoordExtent(t.wrappedTileCoord),f=u.getTileCoordExtent(d,this.tmpExtent)[0]-g[0];return(0,c.Jp)((0,c.bA)(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(n,s,o,i,l,h,f))}postRender(t,e){const i=e.viewHints,r=!(i[l.Z.ANIMATING]||i[l.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;const n=this.getLayer(),s=n.getRenderMode(),o=t.globalAlpha;t.globalAlpha=n.getOpacity();const a=m[s],h=e.viewState,c=h.rotation,d=n.getSource(),f=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),p=this.renderedTiles,_=[],T=[];let E=!0;for(let i=p.length-1;i>=0;--i){const s=p[i];E=E&&!s.getReplayState(n).dirty;const o=s.executorGroups[(0,g.sq)(n)].filter(t=>t.hasExecutors(a));if(0===o.length)continue;const l=this.getTileRenderTransform(s,e),h=s.tileCoord[0];let d=!1;const m=o[0].getClipCoords(l);if(m){for(let e=0,i=_.length;e<i;++e)if(f!==h&&h<T[e]){const i=_[e];(0,u.kK)([m[0],m[3],m[4],m[7]],[i[0],i[3],i[4],i[7]])&&(d||(t.save(),d=!0),t.beginPath(),t.moveTo(m[0],m[1]),t.lineTo(m[2],m[3]),t.lineTo(m[4],m[5]),t.lineTo(m[6],m[7]),t.moveTo(i[6],i[7]),t.lineTo(i[4],i[5]),t.lineTo(i[2],i[3]),t.lineTo(i[0],i[1]),t.clip())}_.push(m),T.push(h)}for(let e=0,i=o.length;e<i;++e)o[e].execute(t,1,l,c,r,a);d&&t.restore()}t.globalAlpha=o,this.ready=E,super.postRender(t,e)}renderFeature(t,e,i,r,n){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let o=0,a=i.length;o<a;++o)s=(0,d.Pn)(r,t,i[o],e,this.boundHandleStyleImageChange_,void 0,n)||s;else s=(0,d.Pn)(r,t,i,e,this.boundHandleStyleImageChange_,void 0,n);return s}tileImageNeedsRender_(t){const e=this.getLayer();if("vector"===e.getRenderMode())return!1;const i=t.getReplayState(e),r=e.getRevision(),n=t.wantedResolution;return i.renderedTileResolution!==n||i.renderedTileRevision!==r}renderTileImage_(t,e){const i=this.getLayer(),r=t.getReplayState(i),n=i.getRevision(),s=t.executorGroups[(0,g.sq)(i)];r.renderedTileRevision=n;const o=t.wrappedTileCoord,a=o[0],l=i.getSource();let h=e.pixelRatio;const u=e.viewState.projection,d=l.getTileGridForProjection(u),f=d.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,m=d.getResolution(a),T=t.getContext(i);h=Math.round(Math.max(h,p/h));const E=l.getTilePixelSize(a,h,u);T.canvas.width=E[0],T.canvas.height=E[1];const y=h/p;if(1!==y){const t=(0,c.mc)(this.tmpTransform_);(0,c.bA)(t,y,y),T.setTransform.apply(T,t)}const x=d.getTileCoordExtent(o,this.tmpExtent),v=p/m,R=(0,c.mc)(this.tmpTransform_);(0,c.bA)(R,v,-v),(0,c.Iu)(R,-x[0],-x[3]);for(let t=0,e=s.length;t<e;++t)s[t].execute(T,y,R,0,!0,_[i.getRenderMode()]);r.renderedTileResolution=t.wantedResolution}}const E=T;var y=i(808280),x=i(199515);class v extends r.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;const i=t.renderMode||"hybrid";(0,x.h)("hybrid"==i||"vector"==i,28),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new E(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(y.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(y.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(y.Z.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(y.Z.USE_INTERIM_TILES_ON_ERROR,t)}}const R=v},38981:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Wt});var r=i(594272),n=i(471912),s=i(463130),o=i(809494),a=i(637195),l=i(100208),h=i(185487),c=i(720825),u=i(974187);class d extends l.Z{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(h.Z.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===a.Z.LOADED,this.loaded)this.uploadTile();else{if(t instanceof c.Z){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(h.Z.CHANGE,this.handleTileChange_)}}uploadTile(){(0,u.O3)()}setReady(){this.ready=!0,this.dispatchEvent(h.Z.CHANGE)}handleTileChange_(){this.tile.getState()===a.Z.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(h.Z.CHANGE,this.handleTileChange_)}}const g=d;var f=i(80349),p=i(740177);const _=34962,m=34963,T=35044,E=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function y(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!p.ME},e);const i=E.length;for(let r=0;r<i;++r)try{const i=t.getContext(E[r],e);if(i)return i}catch(t){}return null}var x=i(199515);function v(t){switch(t){case _:return Float32Array;case m:return Uint32Array;default:return Float32Array}}const R=class{constructor(t,e){this.array=null,this.type=t,(0,x.h)(t===_||t===m,62),this.usage=void 0!==e?e:35044}ofSize(t){return this.array=new(v(this.type))(t),this}fromArray(t){return this.array=v(this.type).from(t),this}fromArrayBuffer(t){return this.array=new(v(this.type))(t),this}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}};var S=i(968326),C=i(904307);function w(t,e,i){const r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function P(t,e,i,r,n,s){const o=t.getGL();let a,l;i instanceof Float32Array?(a=o.FLOAT,t.getExtension("OES_texture_float"),l=null!==t.getExtension("OES_texture_float_linear")):(a=o.UNSIGNED_BYTE,l=!0),w(o,e,s&&l);const h=i.byteLength/r[1];let c,u=1;switch(h%8==0?u=8:h%4==0?u=4:h%2==0&&(u=2),n){case 1:c=o.LUMINANCE;break;case 2:c=o.LUMINANCE_ALPHA;break;case 3:c=o.RGB;break;case 4:c=o.RGBA;break;default:throw new Error(`Unsupported number of bands: ${n}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,u),o.texImage2D(o.TEXTURE_2D,0,c,r[0],r[1],0,c,a,i),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let b=null;const F=class extends g{constructor(t){super(t),this.textures=[],this.renderSize_=(0,C.Pq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new R(_,T);e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),i=this.tile;let r;this.textures.length=0,r=i instanceof c.Z||i instanceof o.Z?i.getImage():i.getData();const n=(0,f.G0)(r);if(n){const t=e.createTexture();return this.textures.push(t),this.bandCount=4,function(t,e,i,r){w(t,e,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(e,t,n,i.interpolate),void this.setReady()}r=(0,f.px)(r);const s=i.getSize(),a=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],l=r instanceof Float32Array,h=a[0]*a[1],u=l?Float32Array:Uint8Array,d=u.BYTES_PER_ELEMENT,g=r.byteLength/a[1];this.bandCount=Math.floor(g/d/a[0]);const p=Math.ceil(this.bandCount/4);if(1===p){const n=e.createTexture();return this.textures.push(n),P(t,n,r,a,this.bandCount,i.interpolate),void this.setReady()}const _=new Array(p);for(let t=0;t<p;++t){const i=e.createTexture();this.textures.push(i);const r=t<p-1?4:(this.bandCount-1)%4+1;_[t]=new u(h*r)}let m=0,T=0;const E=a[0]*this.bandCount;for(let t=0;t<a[1];++t){for(let t=0;t<E;++t){const e=r[T+t],i=Math.floor(m/this.bandCount),n=t%this.bandCount,s=_[Math.floor(n/4)];s[i*(s.length/h)+n%4]=e,++m}T+=g/d}for(let e=0;e<p;++e){const r=this.textures[e],n=_[e];P(t,r,n,a,n.length/h,i.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(h.Z.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,i){const r=this.gutter_,n=this.renderSize_[0],s=this.renderSize_[1];b||(b=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})),b.clearRect(0,0,1,1);const o=t.width-2*r,a=t.height-2*r,l=r+Math.floor(o*(e/n)),h=r+Math.floor(a*(i/s));let c;try{b.drawImage(t,l,h,1,1,0,0,1,1),c=b.getImageData(0,0,1,1).data}catch(t){return b=null,null}return c}getArrayPixelData_(t,e,i,r){const n=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1],a=e[0],l=e[1],h=a+2*n,c=l+2*n,u=n+Math.floor(a*(i/s)),d=n+Math.floor(l*(r/o));if(t instanceof DataView){const e=t.byteLength/(h*c),i=e*(d*h+u),r=t.buffer.slice(i,i+e);return new DataView(r)}const g=this.bandCount*(d*h+u);return t.slice(g,g+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof f.ZP){const i=this.tile.getData(),r=(0,f.px)(i);if(r){const i=this.tile.getSize();return this.getArrayPixelData_(r,i,t,e)}return this.getImagePixelData_((0,f.G0)(i),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}};var A=i(946131),L=i(102519),I=i(110115),G=i(657380),Z=i(398771);const O="webglcontextlost",D="webglcontextrestored";var M=i(455431);const j=class{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();const i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(i);const r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(r),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,r),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(i=>{this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})})}getGL(){return this.gl_}init(t){const e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const t=0,r=e.RGBA,n=0,s=e.RGBA,o=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,r,i[0],i[1],n,s,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(t,e,i,r){const n=this.getGL(),s=t.size;if(n.bindFramebuffer(n.FRAMEBUFFER,e?e.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,u.sq)(n.canvas);if(!t.renderTargets[e]){const i=n.getContextAttributes();i&&i.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),t.renderTargets[e]=!0}}n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),n.uniform1i(this.renderTargetTextureLocation_,0);const o=t.layerStatesArray[t.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(t),i&&i(n,t),n.drawArrays(n.TRIANGLES,0,6),r&&r(n,t)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(t){const e=this.getGL();let i,r=1;this.uniforms_.forEach(function(n){if(i="function"==typeof n.value?n.value(t):n.value,i instanceof HTMLCanvasElement||i instanceof ImageData)n.texture||(n.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${r}`]),e.bindTexture(e.TEXTURE_2D,n.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,i.width,i.height,0,e.UNSIGNED_BYTE,new Uint8Array(i.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.uniform1i(n.location,r++);else if(Array.isArray(i))switch(i.length){case 2:return void e.uniform2f(n.location,i[0],i[1]);case 3:return void e.uniform3f(n.location,i[0],i[1],i[2]);case 4:return void e.uniform4f(n.location,i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&e.uniform1f(n.location,i)})}};var U=i(69374),z=i(506101);function N(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const $={};function k(t){return"shared/"+t}let B=0;class X extends M.Z{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?k(t.canvasCacheKey):function(){const t="unique/"+B;return B+=1,t}(),this.canvas_=function(t){let e=$[t];if(!e){const i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",e={users:0,canvas:i},$[t]=e}return e.users+=1,e.canvas}(this.canvasCacheKey_),this.gl_=y(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(O,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(D,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,z.Ue)(),this.offsetScaleMatrix_=(0,z.Ue)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(t=>new j({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})):[new j({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[];for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===k(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,i=(0,u.sq)(t);let r=this.bufferCache_[i];r||(r={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=r),e.bindBuffer(t.getType(),r.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,i=(0,u.sq)(t),r=this.bufferCache_[i];r&&!e.isContextLost()&&e.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener(O,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(D,this.boundHandleWebGLContextRestored_),function(t){const e=$[t];if(!e)return;if(e.users-=1,e.users>0)return;const i=y(e.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete $[t]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(t,e){const i=this.gl_,r=this.getCanvas(),n=t.size,s=t.pixelRatio;r.width===n[0]*s&&r.height===n[1]*s||(r.width=n[0]*s,r.height=n[1]*s,r.style.width=n[0]+"px",r.style.height=n[1]+"px");for(let e=this.postProcessPasses_.length-1;e>=0;e--)this.postProcessPasses_[e].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}bindTexture(t,e,i){const r=this.gl_;r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t),r.uniform1i(this.getUniformLocation(i),e)}prepareDrawToRenderTarget(t,e,i){const r=this.gl_,n=e.getSize();r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.viewport(0,0,n[0],n[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA)}drawElements(t,e){const i=this.gl_;this.getExtension("OES_element_index_uint");const r=i.UNSIGNED_INT,n=e-t,s=4*t;i.drawElements(i.TRIANGLES,n,r,s)}finalizeDraw(t,e,i){for(let r=0,n=this.postProcessPasses_.length;r<n;r++)r===n-1?this.postProcessPasses_[r].apply(t,null,e,i):this.postProcessPasses_[r].apply(t,this.postProcessPasses_[r+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(t){const e=t.size,i=t.viewState.rotation,r=t.pixelRatio,n=(0,z.mc)(this.offsetScaleMatrix_);(0,z.bA)(n,2/e[0],2/e[1]);const s=(0,z.mc)(this.offsetRotateMatrix_);0!==i&&(0,z.U1)(s,-i),this.setUniformMatrixValue("u_offsetScaleMatrix",N(this.tmpMat4_,n)),this.setUniformMatrixValue("u_offsetRotateMatrix",N(this.tmpMat4_,s)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution),this.setUniformFloatValue("u_pixelRatio",r),this.setUniformFloatVec2("u_viewportSizePx",[e[0],e[1]])}applyUniforms(t){const e=this.gl_;let i,r=0;this.uniforms_.forEach(n=>{if(i="function"==typeof n.value?n.value(t):n.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)n.texture||(n.prevValue=void 0,n.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${r}`]),e.bindTexture(e.TEXTURE_2D,n.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&n.prevValue!==i&&(n.prevValue=i,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)),e.uniform1i(this.getUniformLocation(n.name),r++);else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(n.name,N(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void e.uniform2f(this.getUniformLocation(n.name),i[0],i[1]);case 3:return void e.uniform3f(this.getUniformLocation(n.name),i[0],i[1],i[2]);case 4:return void e.uniform4f(this.getUniformLocation(n.name),i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&e.uniform1f(this.getUniformLocation(n.name),i)})}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const i=this.gl_,r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}getProgram(t,e){const i=this.gl_,r=this.compileShader(t,i.FRAGMENT_SHADER),n=this.compileShader(e,i.VERTEX_SHADER),s=i.createProgram();if(i.attachShader(s,r),i.attachShader(s,n),i.linkProgram(s),!i.getShaderParameter(r,i.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(t)}if(i.deleteShader(r),!i.getShaderParameter(n,i.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${i.getShaderInfoLog(n)}`;throw new Error(t)}if(i.deleteShader(n),!i.getProgramParameter(s,i.LINK_STATUS)){const t=`GL program linking failed: ${i.getProgramInfoLog(s)}`;throw new Error(t)}return s}getUniformLocation(t){const e=(0,u.sq)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,u.sq)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const i=t.size,r=t.viewState.rotation,n=t.viewState.resolution,s=t.viewState.center;return(0,z.qC)(e,0,0,2/(n*i[0]),2/(n*i[1]),-r,-s[0],-s[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,i,r,n){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,e,i,!1,r,n))}enableAttributes(t){const e=function(t){let e=0;for(let i=0;i<t.length;i++){const r=t[i];e+=r.size*V(r.type)}return e}(t);let i=0;for(let r=0;r<t.length;r++){const n=t[r];this.enableAttributeArray_(n.name,n.size,n.type||5126,e,i),i+=n.size*V(n.type)}}handleWebGLContextLost(){(0,U.Z)(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(t,e,i){const r=this.gl_;i=i||r.createTexture();const n=r.RGBA,s=r.RGBA,o=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),e?r.texImage2D(r.TEXTURE_2D,0,n,s,o,e):r.texImage2D(r.TEXTURE_2D,0,n,t[0],t[1],0,s,o,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i}}function V(t){switch(t){case 5121:return Uint8Array.BYTES_PER_ELEMENT;case 5123:return Uint16Array.BYTES_PER_ELEMENT;case 5125:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const K=X;class q extends I.Z{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,z.Ue)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(n.Z.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(Z.Z.PRECOMPOSE)){const r=new G.Z(Z.Z.PRECOMPOSE,void 0,e,t);i.dispatchEvent(r)}}dispatchPostComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(Z.Z.POSTCOMPOSE)){const r=new G.Z(Z.Z.POSTCOMPOSE,void 0,e,t);i.dispatchEvent(r)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,i=!0,r=-1;for(let n=0,s=t.layerStatesArray.length;n<s;n++){const s=t.layerStatesArray[n].layer,o=s.getRenderer();if(!(o instanceof q)){i=!0;continue}const a=s.getClassName();if((i||a!==e)&&(r+=1,i=!1),e=a,o===this)break}const n="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(n)||(this.removeHelper(),this.helper=new K({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:n}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,i){const r=this.getLayer();if(r.hasListener(t)){(0,z.qC)(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const n=new G.Z(t,this.inversePixelTransform_,i,e);r.dispatchEvent(n)}}preRender(t,e){this.dispatchRenderEvent_(Z.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Z.Z.POSTRENDER,t,e)}}const Y=q;var W=i(465537),H=i(98634),J=i(31660),Q=i(928641);const tt={};function et(t){return 2*(1-1/(t+1))-1}function it(t,e){return t.tileIds.has((0,u.sq)(e))}function rt(t,e,i){const r=t.representationsByZ;i in r||(r[i]=new Set),r[i].add(e),t.tileIds.add((0,u.sq)(e.tile))}function nt(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=(0,Q.Ed)(e,(0,J.dY)(i.extent,t.viewState.projection)));const r=i.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=(0,Q.Ed)(e,i))}return e}function st(t,e){return`${t.getKey()},${(0,H.km)(e)}`}const ot=class extends Y{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,z.Ue)(),this.tempMat4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new L.Z(0,0,0,0),this.tempTileCoord_=(0,H.T9)(0,0,0),this.tempSize_=[0,0];const i=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new A.Z(i),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==a.Z.LOADED||i==a.Z.EMPTY||i==a.Z.ERROR&&!r}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;const e=this.getLayer().getRenderSource();return!!e&&!(0,Q.xb)(nt(t,t.extent))&&"ready"===e.getState()}createTileRepresentation(t){return(0,u.O3)()}enqueueTiles(t,e,i,r,n){const s=t.viewState,o=this.getLayer(),l=o.getRenderSource(),h=l.getTileGridForProjection(s.projection),c=l.getGutterForProjection(s.projection),d=(0,u.sq)(l);d in t.wantedTiles||(t.wantedTiles[d]={});const g=t.wantedTiles[d],f=this.tileRepresentationCache,p=o.getMapInternal(),_=Math.max(i-n,h.getMinZoom(),h.getZForResolution(Math.min(o.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):h.getResolution(0)),l.zDirection));for(let n=i;n>=_;--n){const i=h.getTileRangeForExtentAndZ(e,n,this.tempTileRange_),o=h.getResolution(n);for(let e=i.minX;e<=i.maxX;++e)for(let u=i.minY;u<=i.maxY;++u){const i=(0,H.T9)(n,e,u,this.tempTileCoord_),p=st(l,i);let _,m;if(f.containsKey(p)&&(_=f.get(p),m=_.tile),_&&_.tile.key===l.getKey()||(m=l.getTile(n,e,u,t.pixelRatio,s.projection)),it(r,m))continue;if(_)if(this.isDrawableTile_(m))_.setTile(m);else{const t=m.getInterimTile();_.setTile(t)}else _=this.createTileRepresentation({tile:m,grid:h,helper:this.helper,gutter:c}),f.set(p,_);rt(r,_,n);const T=m.getKey();g[T]=!0,m.getState()===a.Z.IDLE&&(t.tileQueue.isKeyQueued(T)||t.tileQueue.enqueue([m,d,h.getTileCoordCenter(i),o]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e)}renderTile(t,e,i,r,n,s,o,a,l,h,c){}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const i=t.viewState,r=this.getLayer(),n=r.getRenderSource(),l=n.getTileGridForProjection(i.projection),h=n.getGutterForProjection(i.projection),c=nt(t,t.extent),d=l.getZForResolution(i.resolution,n.zDirection),g={tileIds:new Set,representationsByZ:{}},f=r.getPreload();if(t.nextExtent){const e=l.getZForResolution(i.nextResolution,n.zDirection),r=nt(t,t.nextExtent);this.enqueueTiles(t,r,e,g,f)}this.enqueueTiles(t,c,d,g,0),f>0&&setTimeout(()=>{this.enqueueTiles(t,c,d-1,g,f-1)},0);const p={},_=(0,u.sq)(this),m=t.time;let T=!1;for(const t of g.representationsByZ[d]){const e=t.tile;if((e instanceof o.Z||e instanceof s.Z)&&e.getState()===a.Z.EMPTY)continue;const i=e.tileCoord;if(t.loaded){const t=e.getAlpha(_,m);if(1===t){e.endTransition(_);continue}T=!0,p[(0,H.km)(i)]=t}if(this.renderComplete=!1,this.findAltTiles_(l,i,d+1,g))continue;const r=l.getMinZoom();for(let t=d-1;t>=r&&!this.findAltTiles_(l,i,t,g);--t);}this.beforeTilesRender(t,T);const E=g.representationsByZ,y=Object.keys(E).map(Number).sort(W.j2);for(let e=0,i=y.length;e<i;++e){const i=y[e];for(const e of E[i]){if(!e.loaded)continue;const r=e.tile.tileCoord,n=(0,H.km)(r),s=n in p?p[n]:1;s<1&&(t.animate=!0);const o=l.getResolution(i),a=(0,C.Pq)(l.getTileSize(i),this.tempSize_),u=l.getOrigin(i),d=l.getTileCoordExtent(r),g=et(i),f=t.viewState,_=f.center[0],m=f.center[1],T=a[0]+2*h,E=a[1]+2*h,y=T/E,x=(_-u[0])/(a[0]*o),v=(u[1]-m)/(a[1]*o),R=f.resolution/o,S=r[1],w=r[2];(0,z.mc)(this.tileTransform_),(0,z.bA)(this.tileTransform_,2/(t.size[0]*R/T),-2/(t.size[1]*R/T)),(0,z.U1)(this.tileTransform_,f.rotation),(0,z.bA)(this.tileTransform_,1,1/y),(0,z.Iu)(this.tileTransform_,(a[0]*(S-x)-h)/T,(a[1]*(w-v)-h)/E),this.renderTile(e,this.tileTransform_,t,c,o,a,u,d,g,h,s)}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const x=this.helper.getCanvas(),v=this.tileRepresentationCache;for(;v.canExpireCache();)v.pop().dispose();return t.postRenderFunctions.push(function(t,e){n.updateCacheSize(.1,e.viewState.projection),n.expireCache(e.viewState.projection,tt)}),this.postRender(e,t),x}findAltTiles_(t,e,i,r){const n=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!n)return!1;let s=!0;const o=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let t=n.minX;t<=n.maxX;++t)for(let e=n.minY;e<=n.maxY;++e){const n=st(a,[i,t,e]);let l=!1;if(o.containsKey(n)){const t=o.get(n);t.loaded&&!it(r,t.tile)&&(rt(r,t,i),l=!0)}l||(s=!1)}return s}clearCache(){const t=this.tileRepresentationCache;t.forEach(t=>t.dispose()),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}},at="u_tileTransform",lt="u_transitionAlpha",ht="u_depth",ct="u_renderExtent",ut="u_resolution",dt="u_zoom",gt="u_tileTextures",ft="u_texturePixelWidth",pt="u_texturePixelHeight",_t="u_textureResolution",mt="u_textureOriginX",Tt="u_textureOriginY",Et="a_textureCoord",yt=[{name:Et,size:2,type:5126}],xt=class extends ot{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new R(m,T),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new F(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,i,r,n,s,o,a,l,h,c){const u=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(yt);let d=0;for(;d<t.textures.length;){const e=`${gt}[${d}]`;this.helper.bindTexture(t.textures[d],d,e),++d}for(let t=0;t<this.paletteTextures_.length;++t){const e=this.paletteTextures_[t],i=e.getTexture(u);this.helper.bindTexture(i,d,e.name),++d}const g=i.viewState,f=s[0]+2*h,p=s[1]+2*h,_=t.tile.tileCoord,m=_[1],T=_[2];this.helper.setUniformMatrixValue(at,N(this.tempMat4,e)),this.helper.setUniformFloatValue(lt,c),this.helper.setUniformFloatValue(ht,l);let E=r;h>0&&(E=a,(0,Q.Ed)(E,r,E)),this.helper.setUniformFloatVec4(ct,E),this.helper.setUniformFloatValue(ut,g.resolution),this.helper.setUniformFloatValue(dt,g.zoom),this.helper.setUniformFloatValue(ft,f),this.helper.setUniformFloatValue(pt,p),this.helper.setUniformFloatValue(_t,n),this.helper.setUniformFloatValue(mt,o[0]+m*s[0]*n-h*n),this.helper.setUniformFloatValue(Tt,o[1]-T*s[1]*n+h*n),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const e=this.frameState;if(!e)return null;const i=this.getLayer(),r=(0,z.nn)(e.pixelToCoordinateTransform,t.slice()),n=e.viewState,l=i.getExtent();if(l&&!(0,Q.b8)((0,J.dY)(l,n.projection),r))return null;const h=i.getSources((0,Q.hI)([r]),n.resolution);let c,u,d;for(c=h.length-1;c>=0;--c)if(u=h[c],"ready"===u.getState()){if(d=u.getTileGridForProjection(n.projection),u.getWrapX())break;const t=d.getExtent();if(!t||(0,Q.b8)(t,r))break}if(c<0)return null;const g=this.tileRepresentationCache;for(let t=d.getZForResolution(n.resolution);t>=d.getMinZoom();--t){const e=d.getTileCoordForCoordAndZ(r,t),i=st(u,e);if(!g.containsKey(i))continue;const n=g.get(i),l=n.tile;if((l instanceof o.Z||l instanceof s.Z)&&l.getState()===a.Z.EMPTY)return null;if(!n.loaded)continue;const h=d.getOrigin(t),c=(0,C.Pq)(d.getTileSize(t)),f=d.getResolution(t),p=(r[0]-h[0])/f-e[1]*c[0],_=(h[1]-r[1])/f-e[2]*c[1];return n.getPixelData(p,_)}return null}disposeInternal(){const t=this.helper;t&&(t.getGL().deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}},vt=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}};var Rt=i(379706);const St=16,Ct={};function wt(t){if("number"==typeof t)return 1;if("boolean"==typeof t)return 8;if("string"==typeof t)return(0,Rt.e1)(t)?6:2;if(!Array.isArray(t))throw new Error(`Unhandled value type: ${JSON.stringify(t)}`);const e=t;if(e.every(function(t){return"number"==typeof t}))return 3===e.length||4===e.length?20:St;if("string"!=typeof e[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const i=Ct[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.getReturnType(e.slice(1))}function Pt(t){const e=[];return(1&t)>0&&e.push("number"),(4&t)>0&&e.push("color"),(8&t)>0&&e.push("boolean"),(t&St)>0&&e.push("number[]"),(2&t)>0&&e.push("string"),e.length>0?e.join(", "):"(no type)"}function bt(t){const e=t.toString();return e.includes(".")?e:e+".0"}function Ft(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(bt).join(", ")})`}function At(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function Lt(t,e,i){const r=void 0!==i?i:1;if(Array.isArray(e)&&"string"==typeof e[0]){const i=Ct[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.toGlsl(t,e.slice(1),r)}const n=wt(e)&r;if(zt(e,n,""),(1&n)>0)return bt(e);if((8&n)>0)return e.toString();if((2&n)>0)return function(t,e){return bt(At(t,e))}(t,e.toString());if((4&n)>0)return function(t){const e=(0,Rt._2)(t),i=e.length>3?e[3]:1;return Ft([e[0]/255*i,e[1]/255*i,e[2]/255*i,i])}(e);if((n&St)>0)return Ft(e);throw new Error(`Unexpected expression ${e} (expected type ${Pt(r)})`)}function It(t){if(!(1&wt(t)))throw new Error(`A numeric value was expected, got ${JSON.stringify(t)} instead`)}function Gt(t){for(let e=0;e<t.length;e++)It(t[e])}function Zt(t){if(!(2&wt(t)))throw new Error(`A string value was expected, got ${JSON.stringify(t)} instead`)}function Ot(t){if(!(8&wt(t)))throw new Error(`A boolean value was expected, got ${JSON.stringify(t)} instead`)}function Dt(t,e){if(t.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${t.length} instead`)}function Mt(t,e){if(t.length<e)throw new Error(`At least ${e} arguments were expected, got ${t.length} instead`)}function jt(t,e){if(t.length>e)throw new Error(`At most ${e} arguments were expected, got ${t.length} instead`)}function Ut(t){if(t.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${JSON.stringify(t)} instead`)}function zt(t,e,i){if(0===e)throw new Error(`No matching type was found for the following expression ${i}: ${JSON.stringify(t)}`)}function Nt(t,e,i){if(zt(t,e,i),r=e,Math.log2(r)%1!=0)throw new Error(`Expected to have a unique type for the following expression ${i}: ${JSON.stringify(t)}\nGot the following types instead: ${Pt(e)}`);var r}function $t(t,e,i,r){if(0===(e&i))throw new Error(`Expected the ${r} type of the following expression: ${JSON.stringify(t)} to be of the following types: ${Pt(i)}\nGot these types instead: ${Pt(e)}`)}function kt(t){return"u_var_"+t}Ct.get={getReturnType:function(t){return 2===t.length?function(t){switch(t){case"string":return 2;case"color":return 4;case"number":return 1;case"boolean":return 8;case"number[]":return St;default:throw new Error(`Unrecognized type hint: ${t}`)}}(t[1]):31},toGlsl:function(t,e,i){Mt(e,1),jt(e,2),Zt(e[0]);const r=i&Ct.get.getReturnType(e);Nt(["get",...e],r,"");const n=e[0].toString(),s=t.attributes.find(t=>t.name===n);if(s){if(r!==s.type)throw new Error(`The following attribute was used in different places with incompatible types: ${n}\nTypes were: ${Pt(s.type)} and ${Pt(r)}`)}else t.attributes.push({name:n,type:r});return(t.inFragmentShader?"v_":"a_")+n}},Ct.var={getReturnType:function(){return 31},toGlsl:function(t,e,i){Dt(e,1),Zt(e[0]);const r=e[0].toString();if(!t.style.variables||void 0===t.style.variables[r])throw new Error(`The following variable is missing from the style: ${r}`);const n=i&wt(t.style.variables[r]);Nt(["var",...e],n,"");const s=t.variables.find(t=>t.name===r);if(s){if(n!==s.type)throw new Error(`The following variable was used in different places with incompatible types: ${r}\nTypes were: ${Pt(s.type)} and ${Pt(n)}`)}else t.variables.push({name:r,type:n});return kt(r)}};const Bt="u_paletteTextures";Ct.palette={getReturnType:function(){return 4},toGlsl:function(t,e){Dt(e,2),It(e[0]);const i=Lt(t,e[0]),r=e[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const n=r.length,s=new Uint8Array(4*n);for(let t=0;t<n;t++){const e=r[t];let i;if("string"==typeof e)i=(0,Rt.mL)(e);else{if(!Array.isArray(e))throw new Error("The second argument of palette must be an array of strings or colors");const t=e.length;if(4===t)i=e;else{if(3!==t)throw new Error(`Expected palette color to have 3 or 4 values, got ${t}`);i=[e[0],e[1],e[2],1]}}const n=4*t;s[n]=i[0],s[n+1]=i[1],s[n+2]=i[2],s[n+3]=255*i[3]}t.paletteTextures||(t.paletteTextures=[]);const o=`${Bt}[${t.paletteTextures.length}]`,a=new vt(o,s);return t.paletteTextures.push(a),`texture2D(${o}, vec2((${i} + 0.5) / ${n}.0, 0.5))`}};const Xt="getBandValue";function Vt(t){return{getReturnType:function(){return 8},toGlsl:function(e,i){Dt(i,2);let r=31;for(let t=0;t<i.length;t++)r&=wt(i[t]);if(0===r)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(i)} instead`);return r&=-5,`(${Lt(e,i[0],r)} ${t} ${Lt(e,i[1],r)})`}}}function Kt(t){return{getReturnType:function(){return 8},toGlsl:function(e,i){Mt(i,2);for(let t=0;t<i.length;t++)Ot(i[t]);let r=i.map(t=>Lt(e,t,8)).join(` ${t} `);return r=`(${r})`,r}}}function qt(t,e){const i=`\n    attribute vec2 ${Et};\n    uniform mat4 ${at};\n    uniform float ${ft};\n    uniform float ${pt};\n    uniform float ${_t};\n    uniform float ${mt};\n    uniform float ${Tt};\n    uniform float ${ht};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${Et};\n      v_mapCoord = vec2(\n        ${mt} + ${_t} * ${ft} * v_textureCoord[0],\n        ${Tt} - ${_t} * ${pt} * v_textureCoord[1]\n      );\n      gl_Position = ${at} * vec4(${Et}, ${ht}, 1.0);\n    }\n  `,r={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e,style:t},n=[];if(void 0!==t.color){const e=Lt(r,t.color,4);n.push(`color = ${e};`)}if(void 0!==t.contrast){const e=Lt(r,t.contrast,1);n.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=Lt(r,t.exposure,1);n.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=Lt(r,t.saturation,1);n.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=Lt(r,t.gamma,1);n.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=Lt(r,t.brightness,1);n.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=r.variables.length;if(o>1&&!t.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let e=0;e<o;++e){const i=r.variables[e];if(!(i.name in t.variables))throw new Error(`Missing '${i.name}' in style variables`);s[kt(i.name)]=function(){let e=t.variables[i.name];return"string"==typeof e&&(e=At(r,e)),void 0!==e?e:-9999999}}const a=Object.keys(s).map(function(t){return`uniform float ${t};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${gt}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${Bt}[${r.paletteTextures.length}];`);const h=Object.keys(r.functions).map(function(t){return r.functions[t]});return{vertexShader:i,fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${ct};\n    uniform float ${lt};\n    uniform float ${ft};\n    uniform float ${pt};\n    uniform float ${ut};\n    uniform float ${dt};\n\n    ${a.join("\n")}\n\n    ${h.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${ct}[0] ||\n        v_mapCoord[1] < ${ct}[1] ||\n        v_mapCoord[0] > ${ct}[2] ||\n        v_mapCoord[1] > ${ct}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${gt}[0],  v_textureCoord);\n\n      ${n.join("\n")}\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${lt};\n    }`,uniforms:s,paletteTextures:r.paletteTextures}}Ct.band={getReturnType:function(){return 1},toGlsl:function(t,e){Mt(e,1),jt(e,3);const i=e[0];if(!(Xt in t.functions)){let e="";const i=t.bandCount||1;for(let t=0;t<i;t++){const r=Math.floor(t/4);let n=t%4;t===i-1&&1===n&&(n=3),e+=`\n          if (band == ${t+1}.0) {\n            return texture2D(${gt}[${r}], v_textureCoord + vec2(dx, dy))[${n}];\n          }\n        `}t.functions[Xt]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ${ft};\n          float dy = yOffset / ${pt};\n          ${e}\n        }\n      `}const r=Lt(t,i),n=Lt(t,e[1]||0),s=Lt(t,e[2]||0);return`${Xt}(${r}, ${n}, ${s})`}},Ct.time={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,0),"u_time"}},Ct.zoom={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,0),"u_zoom"}},Ct.resolution={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,0),"u_resolution"}},Ct["*"]={getReturnType:function(t){let e=5;for(let i=0;i<t.length;i++)e&=wt(t[i]);return e},toGlsl:function(t,e,i){Mt(e,2);let r=i;for(let t=0;t<e.length;t++)r&=wt(e[t]);return $t(e,r,5,"output"),`(${e.map(e=>Lt(t,e,r)).join(" * ")})`}},Ct["/"]={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} / ${Lt(t,e[1])})`}},Ct["+"]={getReturnType:function(){return 1},toGlsl:function(t,e){return Mt(e,2),Gt(e),`(${e.map(e=>Lt(t,e)).join(" + ")})`}},Ct["-"]={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} - ${Lt(t,e[1])})`}},Ct.clamp={getReturnType:function(){return 1},toGlsl:function(t,e){Dt(e,3),Gt(e);const i=Lt(t,e[1]),r=Lt(t,e[2]);return`clamp(${Lt(t,e[0])}, ${i}, ${r})`}},Ct["%"]={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,2),Gt(e),`mod(${Lt(t,e[0])}, ${Lt(t,e[1])})`}},Ct["^"]={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,2),Gt(e),`pow(${Lt(t,e[0])}, ${Lt(t,e[1])})`}},Ct.abs={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`abs(${Lt(t,e[0])})`}},Ct.floor={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`floor(${Lt(t,e[0])})`}},Ct.round={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`floor(${Lt(t,e[0])} + 0.5)`}},Ct.ceil={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`ceil(${Lt(t,e[0])})`}},Ct.sin={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`sin(${Lt(t,e[0])})`}},Ct.cos={getReturnType:function(){return 1},toGlsl:function(t,e){return Dt(e,1),Gt(e),`cos(${Lt(t,e[0])})`}},Ct.atan={getReturnType:function(){return 1},toGlsl:function(t,e){return Mt(e,1),jt(e,2),Gt(e),2===e.length?`atan(${Lt(t,e[0])}, ${Lt(t,e[1])})`:`atan(${Lt(t,e[0])})`}},Ct[">"]={getReturnType:function(){return 8},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} > ${Lt(t,e[1])})`}},Ct[">="]={getReturnType:function(){return 8},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} >= ${Lt(t,e[1])})`}},Ct["<"]={getReturnType:function(){return 8},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} < ${Lt(t,e[1])})`}},Ct["<="]={getReturnType:function(){return 8},toGlsl:function(t,e){return Dt(e,2),Gt(e),`(${Lt(t,e[0])} <= ${Lt(t,e[1])})`}},Ct["=="]=Vt("=="),Ct["!="]=Vt("!="),Ct["!"]={getReturnType:function(){return 8},toGlsl:function(t,e){return Dt(e,1),Ot(e[0]),`(!${Lt(t,e[0],8)})`}},Ct.all=Kt("&&"),Ct.any=Kt("||"),Ct.between={getReturnType:function(){return 8},toGlsl:function(t,e){Dt(e,3),Gt(e);const i=Lt(t,e[1]),r=Lt(t,e[2]),n=Lt(t,e[0]);return`(${n} >= ${i} && ${n} <= ${r})`}},Ct.array={getReturnType:function(){return St},toGlsl:function(t,e){Mt(e,2),jt(e,4),Gt(e);const i=e.map(function(e){return Lt(t,e)});return`vec${e.length}(${i.join(", ")})`}},Ct.color={getReturnType:function(){return 4},toGlsl:function(t,e){Mt(e,3),jt(e,4),Gt(e);const i=e.slice(0,3).map(e=>`${Lt(t,e)} / 255.0`);return 3===e.length?`vec4(${i.join(", ")}, 1.0)`:`(${Lt(t,e[3])} * vec4(${i.join(", ")}, 1.0))`}},Ct.interpolate={getReturnType:function(t){let e=5;for(let i=3;i<t.length;i+=2)e&=wt(t[i]);return e},toGlsl:function(t,e,i){Ut(e),Mt(e,6);const r=e[0];let n;switch(r[0]){case"linear":n=1;break;case"exponential":n=r[1];break;default:n=null}if(!n)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(r)}`);const s=Ct.interpolate.getReturnType(e)&i;Nt(["interpolate",...e],s,"output");const o=Lt(t,e[1],1),a=bt(n);let l="";for(let i=2;i<e.length-2;i+=2){const r=Lt(t,e[i],1),n=l||Lt(t,e[i+1],s),h=Lt(t,e[i+2],1);l=`mix(${n}, ${Lt(t,e[i+3],s)}, pow(clamp((${o} - ${r}) / (${h} - ${r}), 0.0, 1.0), ${a}))`}return l}},Ct.match={getReturnType:function(t){let e=31;for(let i=2;i<t.length;i+=2)e&=wt(t[i]);return e&=wt(t[t.length-1]),e},toGlsl:function(t,e,i){Ut(e),Mt(e,4);let r=wt(e[0]);for(let t=1;t<e.length-1;t+=2)r&=wt(e[t]);$t(["match",...e],r,11,"input"),r&=11;const n=Ct.match.getReturnType(e)&i;Nt(["match",...e],n,"output");const s=Lt(t,e[0],r),o=Lt(t,e[e.length-1],n);let a=null;for(let i=e.length-3;i>=1;i-=2)a=`(${s} == ${Lt(t,e[i],r)} ? ${Lt(t,e[i+1],n)} : ${a||o})`;return a}},Ct.case={getReturnType:function(t){let e=31;for(let i=1;i<t.length;i+=2)e&=wt(t[i]);return e&=wt(t[t.length-1]),e},toGlsl:function(t,e,i){!function(t){if(t.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${JSON.stringify(t)} instead`)}(e),Mt(e,3);const r=Ct.case.getReturnType(e)&i;Nt(["case",...e],r,"output");for(let t=0;t<e.length-1;t+=2)Ot(e[t]);const n=Lt(t,e[e.length-1],r);let s=null;for(let i=e.length-3;i>=0;i-=2)s=`(${Lt(t,e[i],8)} ? ${Lt(t,e[i+1],r)} : ${s||n})`;return s}};class Yt extends r.Z{constructor(t){const e=(t=t?Object.assign({},t):{}).style||{};delete t.style;const i=t.cacheSize;delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=i,this.styleVariables_=this.style_.variables||{},this.addChangeListener(n.Z.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const i=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=qt(this.style_,this.getSourceBandCount_());return new xt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const i=this.getRenderer();let r;for(let n=0,s=e.length;n<s;++n)this.renderedSource_=e[n],i.prepareFrame(t)&&(r=i.renderFrame(t));return r}render(t,e){this.rendered=!0;const i=t.viewState,r=this.getSources(t.extent,i.resolution);let n=!0;for(let t=0,e=r.length;t<e;++t){const e=r[t],i=e.getState();if("loading"==i){const t=()=>{"ready"==e.getState()&&(e.removeEventListener("change",t),this.changed())};e.addEventListener("change",t)}n=n&&"ready"==i}const s=this.renderSources(t,r);if(this.getRenderer().renderComplete&&n)return this.renderedResolution_=i.resolution,s;if(this.renderedResolution_>.5*i.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter(t=>!r.includes(t));if(e.length>0)return this.renderSources(t,e)}return s}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t;const e=qt(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}Yt.prototype.dispose;const Wt=Yt},29839:(t,e,i)=>{"use strict";i.d(e,{Pt:()=>l,u3:()=>h});var r=i(555069),n=i(740177),s=i(506101),o=i(276234),a=i(31660);function l(t,e){const i=t.canvas,o=(e=e||{}).pixelRatio||n.MP,a=e.size;a&&(i.width=a[0]*o,i.height=a[1]*o,i.style.width=a[0]+"px",i.style.height=a[1]+"px");const l=[0,0,i.width,i.height],h=(0,s.bA)((0,s.Ue)(),o,o);return new r.Z(t,o,l,h,0)}function h(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],i=t.inversePixelTransform[1],n=Math.sqrt(e*e+i*i),l=t.frameState,h=(0,s.Jp)(t.inversePixelTransform.slice(),l.coordinateToPixelTransform),c=(0,o.se)(l.viewState.resolution,n);let u;const d=(0,a.Cs)();return d&&(u=(0,a.WO)(d,l.viewState.projection)),new r.Z(t.context,n,l.extent,h,l.viewState.rotation,c,u)}},463130:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var r=i(504773),n=i(80349),s=i(185487),o=i(637195),a=i(55476),l=i(887161),h=i(733983),c=i(968326),u=i(928641),d=i(465818);class g extends n.ZP{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),i=this.targetTileGrid_.getExtent();let n=this.sourceTileGrid_.getExtent();const s=i?(0,u.Ed)(e,i):e;if(0===(0,u.bg)(s))return void(this.state=o.Z.EMPTY);const c=t.sourceProj,d=c.getExtent();d&&(n=n?(0,u.Ed)(n,d):d);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=t.targetProj,p=(0,l.Co)(c,f,s,g);if(!isFinite(p)||p<=0)return void(this.state=o.Z.EMPTY);const _=void 0!==t.errorThreshold?t.errorThreshold:r.m;if(this.triangulation_=new a.Z(c,f,s,n,p*_,g),0===this.triangulation_.getTriangles().length)return void(this.state=o.Z.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let m=this.triangulation_.calculateSourceExtent();if(n&&(c.canWrapX()?(m[1]=(0,h.uZ)(m[1],n[1],n[3]),m[3]=(0,h.uZ)(m[3],n[1],n[3])):m=(0,u.Ed)(m,n)),(0,u.bg)(m)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),i=t.getTileFunction;for(let t=e.minX;t<=e.maxX;t++)for(let r=e.minY;r<=e.maxY;r++){const e=i(this.sourceZ_,t,r,this.pixelRatio_);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=o.Z.EMPTY)}else this.state=o.Z.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{if(!e||e.getState()!==o.Z.LOADED)return;const i=e.getSize(),r=this.gutter_;let s;s=(0,n.px)(e.getData())||(0,n.qo)((0,n.G0)(e.getData()));const a=[i[0]+2*r,i[1]+2*r],l=s instanceof Float32Array,h=a[0]*a[1],c=l?Float32Array:Uint8Array,u=new c(s.buffer),d=c.BYTES_PER_ELEMENT,g=d*u.length/h,f=u.byteLength/a[1],p=Math.floor(f/d/a[0]),_=h*p;let m=u;if(u.length!==_){m=new c(_);let t=0,e=0;const i=a[0]*p;for(let r=0;r<a[1];++r){for(let r=0;r<i;++r)m[t++]=u[e+r];e+=f/d}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(m.buffer),dataType:c,bytesPerPixel:g,pixelSize:a})}),this.sourceTiles_.length=0,0===t.length)this.state=o.Z.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,d;const g=t[0].bytesPerPixel;for(let e=Math.ceil(g/3)-1;e>=0;--e){const i=[];for(let r=0,n=t.length;r<n;++r){const n=t[r],s=n.data,o=n.pixelSize,a=o[0],h=o[1],u=(0,c.E4)(a,h,l.rX),d=u.createImageData(a,h),f=d.data;let p=3*e;for(let t=0,e=f.length;t<e;t+=4)f[t]=s[p],f[t+1]=s[p+1],f[t+2]=s[p+2],f[t+3]=255,p+=g;u.putImageData(d,0,0),i.push({extent:n.extent,image:u.canvas})}const o=(0,l.sY)(r,n,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,h,this.triangulation_,i,this.gutter_,!1,!1);for(let t=0,e=i.length;t<e;++t){const e=i[t].image.getContext("2d");(0,c.jy)(e),l.rX.push(e.canvas)}const f=o.getContext("2d"),p=f.getImageData(0,0,o.width,o.height);(0,c.jy)(f),l.rX.push(o),u||(d=new Uint8Array(g*p.width*p.height),u=new t[0].dataType(d.buffer));const _=p.data;let m=3*e;for(let t=0,e=_.length;t<e;t+=4)255===_[t+3]?(d[m]=_[t],d[m+1]=_[t+1],d[m+2]=_[t+2]):(d[m]=0,d[m+1]=0,d[m+2]=0),m+=g}this.reprojData_=u,this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(n*this.pixelRatio_)],this.state=o.Z.LOADED}this.changed()}load(){if(this.state!==o.Z.IDLE&&this.state!==o.Z.ERROR)return;this.state=o.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const i=e.getState();if(i!==o.Z.IDLE&&i!==o.Z.LOADING)return;t++;const r=(0,d.oL)(e,s.Z.CHANGE,function(){const i=e.getState();i!=o.Z.LOADED&&i!=o.Z.ERROR&&i!=o.Z.EMPTY||((0,d.bN)(r),t--,0===t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t){t.getState()==o.Z.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(d.bN),this.sourcesListenerKeys_=null}}const f=g},131655:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(510928),n=i(928641),s=i(67848),o=i(98634),a=i(357248),l=i(31660);class h extends r.Z{constructor(t){const e=void 0!==t.hidpi&&t.hidpi;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:!0,projection:(0,l.U2)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet;const i="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(i).then(t=>t.json()).then(t=>this.handleImageryMetadataResponse(t))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error");const e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,r=this.getProjection(),h=(0,a.Tl)(r),c=this.hidpi_?2:1,u=e.imageWidth==e.imageHeight?e.imageWidth/c:[e.imageWidth/c,e.imageHeight/c],d=(0,a.dl)({extent:h,minZoom:e.zoomMin,maxZoom:i,tileSize:u});this.tileGrid=d;const g=this.culture_,f=this.hidpi_;if(this.tileUrlFunction=(0,s.Un)(e.imageUrlSubdomains.map(function(t){const i=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",g);return function(t,e,n){if(!t)return;(0,o.T9)(t[0],t[1],t[2],i);let s=r;return f&&(s+="&dpi=d1&device=mobile"),s.replace("{quadkey}",function(t){const e=t[0],i=new Array(e);let r,n,s=1<<e-1;for(r=0;r<e;++r)n=48,t[1]&s&&(n+=1),t[2]&s&&(n+=2),i[r]=String.fromCharCode(n),s>>=1;return i.join("")}(i))}})),e.imageryProviders){const t=(0,l.WO)((0,l.U2)("EPSG:4326"),this.getProjection());this.setAttributions(i=>{const r=[],s=i.viewState,o=this.getTileGrid(),a=o.getZForResolution(s.resolution,this.zDirection),l=o.getTileCoordForCoordAndZ(s.center,a)[0];return e.imageryProviders.map(function(e){let s=!1;const o=e.coverageAreas;for(let e=0,r=o.length;e<r;++e){const r=o[e];if(l>=r.zoomMin&&l<=r.zoomMax){const e=r.bbox,o=[e[1],e[0],e[3],e[2]],a=(0,n.Ne)(o,t);if((0,n.kK)(a,i.extent)){s=!0;break}}}s&&r.push(e.attribution)}),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r})}this.setState("ready")}}const c=h},274665:(t,e,i)=>{"use strict";i.d(e,{Z:()=>k});var r=i(80349),n=i(185487),s=i(463130),o=i(211702),a=i(588815),l=i(357302),h=i(637195),c=i(357248),u=i(31660),d=i(98634),g=i(974187),f=i(436885),p=i(904307);class _ extends l.Z{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let i=t.tileGrid;void 0===i&&e&&(i=(0,c.dl)({extent:(0,c.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:i,opaque:t.opaque,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,p.Pq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?(0,p.Pq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return!e||(0,u.OP)(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,i,r,n){const o=this.getTileCacheForProjection(r),a=(0,d.lg)(t,e,i);if(o.containsKey(a)){const t=o.get(a);if(t&&t.key==this.getKey())return t}const l=this.getTileGrid(),h=Math.max.apply(null,l.getResolutions().map((t,e)=>{const i=(0,p.Pq)(l.getTileSize(e)),r=this.getTileSize(e);return Math.max(r[0]/i[0],r[1]/i[1])})),c=this.getTileGridForProjection(n),u=this.getTileGridForProjection(r),g=[t,e,i],f=this.getTileCoordForTileUrlFunction(g,r),_=Object.assign({sourceProj:n,sourceTileGrid:c,targetProj:r,targetTileGrid:u,tileCoord:g,wrappedTileCoord:f,pixelRatio:h,gutter:this.getGutterForProjection(n),getTileFunction:(t,e,i,r)=>this.getTile(t,e,i,r,n)},this.tileOptions),m=new s.Z(_);return m.key=this.getKey(),m}getTile(t,e,i,s,o){const a=this.getProjection();if(a&&o&&!(0,u.OP)(a,o))return this.getReprojTile_(t,e,i,o,a);const l=this.getTileSize(t),h=(0,d.lg)(t,e,i);if(this.tileCache.containsKey(h))return this.tileCache.get(h);const c=this.loader_,g=Object.assign({tileCoord:[t,e,i],loader:function(){return(0,f.Vi)(function(){return c(t,e,i)})},size:l},this.tileOptions),p=new r.ZP(g);return p.key=this.getKey(),p.addEventListener(n.Z.CHANGE,this.handleTileChange_),this.tileCache.set(h,p),p}handleTileChange_(t){const e=t.target,i=(0,g.sq)(e),r=e.getState();let n;r==h.Z.LOADING?(this.tileLoadingKeys_[i]=!0,n=a.Z.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=r==h.Z.ERROR?a.Z.TILELOADERROR:r==h.Z.LOADED?a.Z.TILELOADEND:void 0),n&&this.dispatchEvent(new l.s(n,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,u.OP)(e,t)))return this.tileGrid;const i=(0,g.sq)(t);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=(0,c.X$)(t)),this.tileGridForProjection_[i]}setTileGridForProjection(t,e){const i=(0,u.U2)(t);if(i){const t=(0,g.sq)(i);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,u.OP)(e,t))return this.tileCache;const i=(0,g.sq)(t);return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new o.Z(.1)),this.tileCacheForProjection_[i]}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection_){const r=this.tileCacheForProjection_[t];r.expireCache(r==i?e:{})}}clear(){super.clear();for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}const m=_;var T=i(808738),E=i(14812);const y="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,x=class{constructor(t=y,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise(t=>{i.e(26509).then(i.bind(i,926509)).then(e=>{t(e.create)})}),this._awaitingDecoder.then(e=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:e(),idle:!0})}))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?(0,E.X)(t).then(i=>i.decode(t,e)):new Promise(i=>{const r=this.workers.find(t=>t.idle)||this.workers[Math.floor(Math.random()*this.size)];r.idle=!1;const n=this.messageId++,s=t=>{t.data.id===n&&(r.idle=!0,i(t.data.decoded),r.worker.removeEventListener("message",s))};r.worker.addEventListener("message",s),r.worker.postMessage({fileDirectory:t,buffer:e,id:n},[e])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}};var v=i(513461),R=i(682499),S=i(733983),C=i(928641),w=i(570044),P=i(858375);function b(t,e){if(!t)return!1;if(!0===t)return!0;if(3!==e.getSamplesPerPixel())return!1;const i=e.fileDirectory.PhotometricInterpretation,r=R.Ie;return i===r.CMYK||i===r.YCbCr||i===r.CIELab||i===r.ICCLab}const F="STATISTICS_MAXIMUM",A="STATISTICS_MINIMUM";let L;function I(){return L||(L=new x),L}function G(t){try{return t.getBoundingBox()}catch(e){return[0,0,t.getWidth(),t.getHeight()]}}function Z(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.getHeight()]}}function O(t,e){try{return t.getResolution(e)}catch(i){return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function D(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=(0,u.U2)(t);if(!i){const r=(0,P.N)(e.ProjLinearUnitsGeoKey);r&&(i=new u.kv({code:t,units:r}))}return i}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let i=(0,u.U2)(t);if(!i){const r=(0,P.N)(e.GeogAngularUnitsGeoKey);r&&(i=new u.kv({code:t,units:r}))}return i}return null}function M(t){return t.getImageCount().then(function(e){const i=new Array(e);for(let r=0;r<e;++r)i[r]=t.getImage(r);return Promise.all(i)})}function j(t,e){let i;return i=t.blob?(0,v.mK)(t.blob):t.overviews?(0,v.MS)(t.url,t.overviews,e):(0,v.W0)(t.url,e),i.then(M)}function U(t,e,i,r,n){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const t=new Error(r);throw n(t),t}for(let o=0;o<s;++o)U(t[o],e[o],i,r,n);return}if(Math.abs(t-e)>i*t)throw new Error(r)}function z(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function N(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class $ extends m{constructor(t){super({state:"loading",tileGrid:null,projection:null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(t=>t.url).join(","));const i=this,r=new Array(e);for(let t=0;t<e;++t)r[t]=j(this.sourceInfo_[t],this.sourceOptions_);Promise.all(r).then(function(t){i.configure_(t)}).catch(function(t){(0,w.vU)(t),i.error_=t,i.setState("error")})}getError(){return this.error_}determineProjection(t){const e=t[0];for(let t=e.length-1;t>=0;--t){const i=D(e[t]);if(i){this.projection=i;break}}}configure_(t){let e,i,r,n,s;const o=new Array(t.length),a=new Array(t.length),l=new Array(t.length);let h=0;const c=t.length;for(let u=0;u<c;++u){const c=[],d=[];t[u].forEach(t=>{4&~(t.fileDirectory.NewSubfileType||0)?c.push(t):d.push(t)});const g=c.length;if(d.length>0&&d.length!==g)throw new Error(`Expected one mask per image found ${d.length} masks and ${g} images`);let f,p;const _=new Array(g),m=new Array(g),T=new Array(g);a[u]=new Array(g),l[u]=new Array(g);for(let t=0;t<g;++t){const e=c[t],i=e.getGDALNoData();l[u][t]=e.getGDALMetadata(0),a[u][t]=i;const r=this.sourceInfo_[u].bands;o[u]=r?r.length:e.getSamplesPerPixel();const n=g-(t+1);f||(f=G(e)),p||(p=Z(e));const s=O(e,c[0]);T[n]=s[0];const h=[e.getTileWidth(),e.getTileHeight()];h[0]!==h[1]&&h[1]<256&&(h[0]=256,h[1]=256),_[n]=h;const d=s[0]/Math.abs(s[1]);m[n]=[h[0],h[1]/d]}if(e?(0,C.Ed)(e,f,e):e=f,i?U(i,p,0,`Origin mismatch for source ${u}, got [${p}] but expected [${i}]`,this.viewRejector):i=p,s){s.length-h>T.length&&(h=s.length-T.length);const t=s[s.length-1]/T[T.length-1];this.resolutionFactors_[u]=t;const e=T.map(e=>e*t),i=`Resolution mismatch for source ${u}, got [${e}] but expected [${s}]`;U(s.slice(h,s.length),e,.02,i,this.viewRejector)}else s=T,this.resolutionFactors_[u]=1;r?U(r.slice(h,r.length),m,.01,`Tile size mismatch for source ${u}`,this.viewRejector):r=m,n?U(n.slice(h,n.length),_,0,`Tile size mismatch for source ${u}`,this.viewRejector):n=_,this.sourceImagery_[u]=c.reverse(),this.sourceMasks_[u]=d.reverse()}for(let t=0,e=this.sourceImagery_.length;t<e;++t){const e=this.sourceImagery_[t];for(;e.length<s.length;)e.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=l;t:for(let t=0;t<c;++t){if(void 0!==this.sourceInfo_[t].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[t].length){this.addAlpha_=!0;break}const e=a[t],i=this.sourceInfo_[t].bands;if(i){for(let t=0;t<i.length;++t)if(null!==e[i[t]-1]){this.addAlpha_=!0;break t}}else for(let t=0;t<e.length;++t)if(null!==e[t]){this.addAlpha_=!0;break t}}let d=this.addAlpha_?1:0;for(let t=0;t<c;++t)d+=o[t];this.bandCount=d;const g=new T.Z({extent:e,minZoom:h,origin:i,resolutions:s,tileSizes:r});this.tileGrid=g,this.setTileSizes(n),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===s.length?s=[s[0],s[1],s[1]/2]:1===s.length&&(s=[2*s[0],s[0],s[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:(0,u.lO)((0,C.qg)(e),this.projection),extent:(0,u.Fj)(e,this.projection),zoom:1})}loadTile_(t,e,i){const r=this.getTileSize(t),n=this.sourceImagery_.length,s=new Array(2*n),o=this.nodataValues_,a=this.sourceInfo_,l=I();for(let h=0;h<n;++h){const c=a[h],u=this.resolutionFactors_[h],d=[Math.round(e*(r[0]*u)),Math.round(i*(r[1]*u)),Math.round((e+1)*(r[0]*u)),Math.round((i+1)*(r[1]*u))],g=this.sourceImagery_[h][t];let f,p;c.bands&&(f=c.bands.map(function(t){return t-1})),p="nodata"in c&&null!==c.nodata?c.nodata:f?f.map(function(t){return o[h][t]}):o[h];const _={window:d,width:r[0],height:r[1],samples:f,fillValue:p,pool:l,interleave:!1};b(this.convertToRGB_,g)?s[h]=g.readRGB(_):s[h]=g.readRasters(_);const m=n+h,T=this.sourceMasks_[h][t];s[m]=T?T.readRasters({window:d,width:r[0],height:r[1],samples:[0],pool:l,interleave:!1}):Promise.resolve(null)}return Promise.all(s).then(this.composeTile_.bind(this,r)).catch(function(t){throw(0,w.vU)(t),t})}composeTile_(t,e){const i=this.metadata_,r=this.sourceInfo_,n=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,h=this.addAlpha_,c=t[0]*t[1],u=c*s;let d;d=l?new Uint8Array(u):new Float32Array(u);let g=0;for(let t=0;t<c;++t){let s=h;for(let c=0;c<n;++c){const u=r[c];let f,p,_=u.min,m=u.max;if(l){const t=i[c][0];void 0===_&&(_=t&&A in t?parseFloat(t[A]):z(e[c][0])),void 0===m&&(m=t&&F in t?parseFloat(t[F]):N(e[c][0])),f=255/(m-_),p=-_*f}for(let i=0;i<o[c];++i){const r=e[c][i][t];let n;if(n=l?(0,S.uZ)(f*r+p,0,255):r,h){let t=u.nodata;if(void 0===t){let e;e=u.bands?u.bands[i]-1:i,t=a[c][e]}const e=isNaN(t);(!e&&r!==t||e&&!isNaN(r))&&(s=!1,d[g]=n)}else d[g]=n;g++}if(!s){const i=e[n+c];i&&!i[0][t]&&(s=!0)}}h&&(s||(d[g]=255),g++)}return d}}$.prototype.getView;const k=$},763580:(t,e,i)=>{"use strict";i.d(e,{Z:()=>A});var r=i(185487),n=i(100291),s=i(570553),o=i(504773),a=i(431798),l=i(55476),h=i(887161),c=i(928641),u=i(465818);class d extends a.Z{constructor(t,e,i,r,n,a,u){let d=t.getExtent();d&&t.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);let g=e.getExtent();g&&e.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const f=g?(0,c.Ed)(i,g):i,p=(0,c.qg)(f),_=(0,h.aA)(t,e,p,r),m=o.m,T=new l.Z(t,e,f,d,_*m,r),E=T.calculateSourceExtent(),y=(0,c.xb)(E)?null:a(E,_,n),x=y?s.Z.IDLE:s.Z.EMPTY,v=y?y.getPixelRatio():1;super(i,r,v,x),this.targetProj_=e,this.maxSourceExtent_=d,this.triangulation_=T,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=y,this.sourcePixelRatio_=v,this.interpolate_=u,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==s.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==s.Z.LOADED){const t=(0,c.dz)(this.targetExtent_)/this.targetResolution_,e=(0,c.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,h.sY)(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==s.Z.IDLE){this.state=s.Z.LOADING,this.changed();const t=this.sourceImage_.getState();t==s.Z.LOADED||t==s.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,u.oL)(this.sourceImage_,r.Z.CHANGE,function(t){const e=this.sourceImage_.getState();e!=s.Z.LOADED&&e!=s.Z.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,u.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const g=d;var f=i(158458),p=i(974187),_=i(31660),m=i(465537);class T extends n.ZP{constructor(t,e){super(t),this.image=e}}class E extends f.Z{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();return e&&(t=e[(0,m.h7)(e,t,0)]),t}getImage(t,e,i,r){const n=this.getProjection();if(!n||!r||(0,_.OP)(n,r))return n&&(r=n),this.getImageInternal(t,e,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,_.OP)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&(0,c.fS)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new g(n,r,t,e,i,(t,e,i)=>this.getImageInternal(t,e,i,n),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,r){return(0,p.O3)()}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case s.Z.LOADING:this.loading=!0,i="imageloadstart";break;case s.Z.LOADED:this.loading=!1,i="imageloadend";break;case s.Z.ERROR:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new T(i,e))}}function y(t,e){t.getImage().src=e}const x=E;var v=i(518096),R=i(373449),S=i(735195),C=i(199515),w=i(733983),P=i(289871),b=i(968326);const F=[101,101],A=class extends x{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.context_=(0,b.E4)(1,1),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:y,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getFeatureInfoUrl(t,e,i,r){if(void 0===this.url_)return;const n=(0,_.U2)(i),s=this.getProjection();s&&s!==n&&(e=(0,h.aA)(s,n,t,e),t=(0,_.vs)(t,n,s));const o=(0,c.p8)(t,e,0,F),a={SERVICE:"WMS",VERSION:R.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(a,this.params_,r);const l=(0,w.GW)((t[0]-o[0])/e,4),u=(0,w.GW)((o[3]-t[1])/e,4);return a[this.v13_?"I":"X"]=l,a[this.v13_?"J":"Y"]=u,this.getRequestUrl_(o,F,1,s||n,a)}getLegendUrl(t,e){if(void 0===this.url_)return;const i={SERVICE:"WMS",VERSION:R.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(Array.isArray(t)&&1!==t.length)return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;i.SCALE=t*e/r}return Object.assign(i,e),(0,S.B)(this.url_,i)}getParams(){return this.params_}getImageInternal(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const s=e/i,o=(0,c.qg)(t),a=(0,w.mD)((0,c.dz)(t)/s,4),l=(0,w.mD)((0,c.Cr)(t)/s,4),h=(0,c.p8)(o,s,0,[a,l]),u=(0,w.mD)(this.ratio_*(0,c.dz)(t)/s,4),d=(0,w.mD)(this.ratio_*(0,c.Cr)(t)/s,4),g=(0,c.p8)(o,s,0,[u,d]),f=this.image_;if(f&&this.renderedRevision_==this.getRevision()&&f.getResolution()==e&&f.getPixelRatio()==i&&(0,c.r4)(f.getExtent(),h))return f;const p={SERVICE:"WMS",VERSION:R.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(p,this.params_),this.imageSize_[0]=(0,w.NM)((0,c.dz)(g)/s,4),this.imageSize_[1]=(0,w.NM)((0,c.Cr)(g)/s,4);const _=this.getRequestUrl_(g,this.imageSize_,i,n,p);return this.image_=new v.Z(g,e,i,_,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(r.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,i,r,n){if((0,C.h)(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":const t=90*i+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+t:n.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":n.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":n.DPI=90*i;break;default:(0,C.h)(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];const s=r.getAxisOrientation();let o;return o=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=o.join(","),(0,S.B)(this.url_,n)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_.VERSION||R.e;this.v13_=(0,P.n)(t,"1.3")>=0}}},398266:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(554680);class n extends r.Z{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",r=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:r,wrapX:t.wrapX,zDirection:t.zDirection})}}const s=n},357302:(t,e,i)=>{"use strict";i.d(e,{s:()=>f,Z:()=>p});var r=i(100291),n=i(158458),s=i(211702),o=i(637195),a=i(974187),l=i(199515),h=i(31660),c=i(98634),u=i(357248),d=i(904307);class g extends n.Z{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&(0,d.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new s.Z(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){const n=this.getTileCacheForProjection(t);if(!n)return!1;let s,a,l,h=!0;for(let t=i.minX;t<=i.maxX;++t)for(let u=i.minY;u<=i.maxY;++u)a=(0,c.lg)(e,t,u),l=!1,n.containsKey(a)&&(s=n.get(a),l=s.getState()===o.Z.LOADED,l&&(l=!1!==r(s))),l||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,r,n){return(0,a.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,u.X$)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,l.h)(null===e||(0,h.OP)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),s=(0,d.Pq)(r.getTileSize(t),this.tmpSize);return 1==n?s:(0,d.bA)(s,n,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,u.Cf)(i,t,e)),(0,c.tE)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}}class f extends r.ZP{constructor(t,e){super(t),this.tile=e}}const p=g},165136:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(510928),n=i(735195),s=i(928641),o=i(733983),a=i(904307),l=i(98634);class h extends r.Z{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=t.params||{},this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,s.lJ)(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,r,s,a){const h=this.urls;if(!h)return;const c=s.getCode().split(/:(?=\d+$)/).pop();let u;a.SIZE=e[0]+","+e[1],a.BBOX=i.join(","),a.BBOXSR=c,a.IMAGESR=c,a.DPI=Math.round(a.DPI?a.DPI*r:90*r),u=1==h.length?h[0]:h[(0,o.$W)((0,l.vp)(t),h.length)];const d=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,n.B)(d,a)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_||(e=1);const n=r.getTileCoordExtent(t,this.tmpExtent_);let s=(0,a.Pq)(r.getTileSize(t[0]),this.tmpSize);1!=e&&(s=(0,a.bA)(s,e,this.tmpSize));const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(o,this.params_),this.getRequestUrl_(t,s,n,e,i,o)}}const c=h},588815:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},510928:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var r=i(185487),n=i(720825),s=i(809494),o=i(211702),a=i(637195),l=i(819939),h=i(31660),c=i(98634),u=i(357248),d=i(974187);class g extends l.Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:f,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:n.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const r=this.tileCacheForProjection[t];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,h.OP)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,h.OP)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,h.OP)(e,t)))return this.tileGrid;const i=(0,d.sq)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,u.X$)(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,h.OP)(e,t))return this.tileCache;const i=(0,d.sq)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new o.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,n,s,o){const l=[t,e,i],h=this.getTileCoordForTileUrlFunction(l,s),c=h?this.tileUrlFunction(h,n,s):void 0,u=new this.tileClass(l,void 0!==c?a.Z.IDLE:a.Z.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(r.Z.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,r,n){const o=this.getProjection();if(!o||!n||(0,h.OP)(o,n))return this.getTileInternal(t,e,i,r,o||n);const a=this.getTileCacheForProjection(n),l=[t,e,i];let u;const d=(0,c.km)(l);a.containsKey(d)&&(u=a.get(d));const g=this.getKey();if(u&&u.key==g)return u;const f=this.getTileGridForProjection(o),p=this.getTileGridForProjection(n),_=this.getTileCoordForTileUrlFunction(l,n),m=new s.Z(o,f,n,p,l,_,this.getTilePixelRatio(r),this.getGutter(),(t,e,i,r)=>this.getTileInternal(t,e,i,r,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=g,u?(m.interimTile=u,m.refreshInterimChain(),a.replace(d,m)):a.set(d,m),m}getTileInternal(t,e,i,r,n){let s=null;const o=(0,c.lg)(t,e,i),l=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=l){const h=s;s=this.createTile_(t,e,i,r,n,l),h.getState()==a.Z.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,i,r,n,l),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,h.U2)(t);if(i){const t=(0,d.sq)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function f(t,e){t.getImage().src=e}const p=g},14409:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var r=i(510928),n=i(373449),s=i(735195),o=i(199515),a=i(928641),l=i(904307),h=i(887161),c=i(289871),u=i(31660),d=i(733983),g=i(98634);class f extends r.Z{constructor(t){t=t||{};const e=Object.assign({},t.params),i=!("TRANSPARENT"in e)||e.TRANSPARENT;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,a.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,r){const s=(0,u.U2)(i),o=this.getProjection();let c=this.getTileGrid();c||(c=this.getTileGridForProjection(s));const d=c.getZForResolution(e,this.zDirection),g=c.getTileCoordForCoordAndZ(t,d);if(c.getResolutions().length<=g[0])return;let f=c.getResolution(g[0]),p=c.getTileCoordExtent(g,this.tmpExtent_),_=(0,l.Pq)(c.getTileSize(g[0]),this.tmpSize);const m=this.gutter_;0!==m&&(_=(0,l.f3)(_,m,this.tmpSize),p=(0,a.f3)(p,f*m,p)),o&&o!==s&&(f=(0,h.aA)(o,s,t,f),p=(0,u.$A)(p,s,o),t=(0,u.vs)(t,s,o));const T={SERVICE:"WMS",VERSION:n.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(T,this.params_,r);const E=Math.floor((t[0]-p[0])/f),y=Math.floor((p[3]-t[1])/f);return T[this.v13_?"I":"X"]=E,T[this.v13_?"J":"Y"]=y,this.getRequestUrl_(g,_,p,1,o||s,T)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:"WMS",VERSION:n.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(Array.isArray(t)&&1!==t.length)return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;i.SCALE=t*e/r}return Object.assign(i,e),(0,s.B)(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,n,a){const l=this.urls;if(!l)return;if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case"geoserver":const t=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+t:a.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:(0,o.h)(!1,52)}const h=n.getAxisOrientation(),c=i;if(this.v13_&&"ne"==h.substr(0,2)){let t;t=i[0],c[0]=i[1],c[1]=t,t=i[2],c[2]=i[3],c[3]=t}let u;return a.BBOX=c.join(","),u=1==l.length?l[0]:l[(0,d.$W)((0,g.vp)(t),l.length)],(0,s.B)(u,a)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||n.e;this.v13_=(0,c.n)(t,"1.3")>=0}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const s=r.getResolution(t[0]);let o=r.getTileCoordExtent(t,this.tmpExtent_),h=(0,l.Pq)(r.getTileSize(t[0]),this.tmpSize);const c=this.gutter_;0!==c&&(h=(0,l.f3)(h,c,this.tmpSize),o=(0,a.f3)(o,s*c,o)),1!=e&&(h=(0,l.bA)(h,e,this.tmpSize));const u={SERVICE:"WMS",VERSION:n.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(u,this.params_),this.getRequestUrl_(t,h,o,e,i,u)}}const p=f},819939:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(588815),n=i(357302),s=i(637195),o=i(67848),a=i(98634),l=i(974187);class h extends n.Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===h.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,l.sq)(e),o=e.getState();let a;o==s.Z.LOADING?(this.tileLoadingKeys_[i]=!0,a=r.Z.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==s.Z.ERROR?r.Z.TILELOADERROR:o==s.Z.LOADED?r.Z.TILELOADEND:void 0),null!=a&&this.dispatchEvent(new n.s(a,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,o.Gk)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,o.uR)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const r=(0,a.lg)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const c=h},46339:(t,e,i)=>{"use strict";i.d(e,{Z:()=>S});var r=i(185487),n=i(394806),s=i(637195);class o extends n.Z{constructor(t,e,i,r,n,s){super(t,e,s),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==s.Z.IDLE&&(this.setState(s.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(s.Z.ERROR)}setFeatures(t){this.features_=t,this.setState(s.Z.LOADED)}setLoader(t){this.loader_=t}}const a=o;var l=i(211702),h=i(808738),c=i(819939),u=i(968326),d=i(974187);const g=[];class f extends n.Z{constructor(t,e,i,r){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=(0,d.sq)(t);return e in this.context_||(this.context_[e]=(0,u.E4)(1,1,g)),this.context_[e]}hasContext(t){return(0,d.sq)(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=(0,d.sq)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];(0,u.jy)(e),g.push(e.canvas),delete this.context_[t]}super.release()}}const p=f;var _=i(94768),m=i(928641),T=i(357248),E=i(98634),y=i(69374),x=i(37537),v=i(904307);class R extends c.Z{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||(0,T.Tl)(e),r=t.tileGrid||(0,T.dl)({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:r,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:C,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new l.Z(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:a,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache;if(0===i.getCount())return e;const r=(0,E.Ul)(i.peekFirstKey())[0],n=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]!==r||i.getState()!==s.Z.LOADED)return;const o=i.getSourceTiles();for(let i=0,r=o.length;i<r;++i){const r=o[i],s=r.tileCoord;if((0,m.kK)(t,n.getTileCoordExtent(s))){const i=r.getFeatures();if(i)for(let r=0,n=i.length;r<n;++r){const n=i[r],s=n.getGeometry();(0,m.kK)(t,s.getExtent())&&e.push(n)}}}}),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),r=Object.keys(e).reduce((t,e)=>{const r=(0,E.MY)(e),n=i.peek(r);if(n){const e=n.sourceTiles;for(let i=0,r=e.length;i<r;++i)t[e[i].getKey()]=!0}return t},{});super.expireCache(t,e),this.sourceTileCache.expireCache(r)}getSourceTiles(t,e,i){if(i.getState()===s.Z.IDLE){i.setState(s.Z.LOADING);const n=i.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(n),l=n[0],h=o.getResolution(l);(0,m.f3)(a,-h,a);const c=this.tileGrid,u=c.getExtent();u&&(0,m.Ed)(a,u,a);const d=c.getZForResolution(h,this.zDirection);c.forEachTileCoord(a,d,n=>{const o=this.tileUrlFunction(n,t,e),a=this.sourceTileCache.containsKey(o)?this.sourceTileCache.get(o):new this.tileClass(n,o?s.Z.IDLE:s.Z.EMPTY,o,this.format_,this.tileLoadFunction);i.sourceTiles.push(a);const l=a.getState();if(l<s.Z.LOADED){const t=e=>{this.handleTileChange(e);const n=a.getState();if(n===s.Z.LOADED||n===s.Z.ERROR){const e=a.getKey();e in i.errorTileKeys?a.getState()===s.Z.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,n===s.Z.ERROR?i.errorTileKeys[e]=!0:a.removeEventListener(r.Z.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,y.x)(i.errorTileKeys)?s.Z.LOADED:s.Z.ERROR)}};a.addEventListener(r.Z.CHANGE,t),i.loadingSourceTiles++}l===s.Z.IDLE&&(a.extent=c.getTileCoordExtent(n),a.projection=e,a.resolution=c.getResolution(n[0]),this.sourceTileCache.set(o,a),a.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(t=>t.getState()===s.Z.ERROR)?s.Z.ERROR:s.Z.LOADED)}return i.sourceTiles}getTile(t,e,i,r,n){const o=(0,E.lg)(t,e,i),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const h=[t,e,i];let c=this.getTileCoordForTileUrlFunction(h,n);const u=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(n);if(c&&u){const e=d.getTileCoordExtent(c);(0,m.f3)(e,-d.getResolution(t),e),(0,m.kK)(u,e)||(c=null)}let g=!0;if(null!==c){const e=this.tileGrid,i=d.getResolution(t),s=e.getZForResolution(i,1),o=d.getTileCoordExtent(c);(0,m.f3)(o,-i,o),e.forEachTileCoord(o,s,t=>{g=g&&!this.tileUrlFunction(t,r,n)})}const f=new p(h,g?s.Z.EMPTY:s.Z.IDLE,c,this.getSourceTiles.bind(this,r,n));return f.key=a,l?(f.interimTile=l,f.refreshInterimChain(),this.tileCache.replace(o,f)):this.tileCache.set(o,f),f}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const t=this.tileGrid,r=t.getResolutions().slice(),n=r.map(function(e,i){return t.getOrigin(i)}),s=r.map(function(e,i){return t.getTileSize(i)}),o=_.e+1;for(let t=r.length;t<o;++t)r.push(r[t-1]/2),n.push(n[t-1]),s.push(s[t-1]);i=new h.Z({extent:t.getExtent(),origins:n,resolutions:r,tileSizes:s}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),n=(0,v.Pq)(r.getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}const S=R;function C(t,e){t.setLoader(function(i,r,n){(0,x.ov)(e,t.getFormat(),i,r,n,t.onLoad.bind(t),t.onError.bind(t))})}},75913:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var r=i(510928),n=i(735195),s=i(67848);i(31660);class o extends r.Z{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid;let r=t.urls;void 0===r&&void 0!==t.url&&(r=(0,s.Gk)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:r,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=(0,s.Un)(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction((0,s.Un)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?(0,n.B)(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});const r=this.tileGrid,s=this.dimensions_;return function(i,o,a){if(!i)return;const l={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(l,s);let h=t;return h="KVP"==e?(0,n.B)(h,l):h.replace(/\{(\w+?)\}/g,function(t,e){return l[e]}),h}}}const a=o},554680:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var r=i(510928),n=i(357248);class s extends r.Z{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:(0,n.dl)({extent:(0,n.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const o=s},373449:(t,e,i)=>{"use strict";i.d(e,{e:()=>r});const r="1.3.0"},289871:(t,e,i)=>{"use strict";function r(t,e){const i=(""+t).split("."),r=(""+e).split(".");for(let t=0;t<Math.max(i.length,r.length);t++){const e=parseInt(i[t]||"0",10),n=parseInt(r[t]||"0",10);if(e>n)return 1;if(n>e)return-1}return 0}i.d(e,{n:()=>r})},946131:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(199515);const n=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,r.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,r.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.h)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}},98634:(t,e,i)=>{"use strict";function r(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function n(t,e,i){return t+"/"+e+"/"+i}function s(t){return n(t[0],t[1],t[2])}function o(t){const[e,i,r]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return n(e,i,r)}function a(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function h(t,e){const i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const s=e.getFullTileRange(i);return!s||s.containsXY(r,n)}i.d(e,{T9:()=>r,lg:()=>n,km:()=>s,MY:()=>o,Ul:()=>a,vp:()=>l,tE:()=>h})},357248:(t,e,i)=>{"use strict";i.d(e,{X$:()=>l,Cf:()=>h,dl:()=>c,Tl:()=>d});var r=i(808738),n=i(94768),s=i(31660),o=i(928641),a=i(904307);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t){return function(t,e,i,n){n=void 0!==n?n:"top-left";const s=u(t,e,i);return new r.Z({extent:t,origin:(0,o.g0)(t,n),resolutions:s,tileSize:i})}(d(t),void 0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function h(t,e,i){const r=e[0],n=t.getTileCoordCenter(e),s=d(i);if(!(0,o.b8)(s,n)){const e=(0,o.dz)(s),i=Math.ceil((s[0]-n[0])/e);return n[0]+=e*i,t.getTileCoordForCoordAndZ(n,r)}return e}function c(t){const e=t||{},i=e.extent||(0,s.U2)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:u(i,e.maxZoom,e.tileSize,e.maxResolution)};return new r.Z(n)}function u(t,e,i,r){e=void 0!==e?e:n.e,i=(0,a.Pq)(void 0!==i?i:n.S);const s=(0,o.Cr)(t),l=(0,o.dz)(t);r=r>0?r:Math.max(l/i[0],s/i[1]);const h=e+1,c=new Array(h);for(let t=0;t<h;++t)c[t]=r/Math.pow(2,t);return c}function d(t){let e=(t=(0,s.U2)(t)).getExtent();if(!e){const i=180*s.Wm.degrees/t.getMetersPerUnit();e=(0,o.T9)(-i,-i,i,i)}return e}},808738:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var r=i(102519),n=i(94768),s=i(199515),o=i(733983),a=i(928641),l=i(98634),h=i(563746),c=i(465537),u=i(904307);const d=[0,0,0],g=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,s.h)((0,c.pT)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,s.h)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,a.rL)(i)),(0,s.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,s.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:n.S,(0,s.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){const n=new r.Z(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const r=this.getTileRangeForExtentAndZ(t,e);for(let t=r.minX,n=r.maxX;t<=n;++t)for(let n=r.minY,s=r.maxY;n<=s;++n)i([e,t,n])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=(0,r.T)(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return(0,r.T)(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],o=t[2];if(e===n)return(0,r.T)(s,o,s,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),a=Math.floor(s*t),l=Math.floor(o*t);if(e<n)return(0,r.T)(a,a,l,l,i);const h=Math.floor(t*(s+1))-1,c=Math.floor(t*(o+1))-1;return(0,r.T)(a,h,l,c,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const n=d[1],s=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const o=d[1],a=d[2];return(0,r.T)(n,o,s,a,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*n[0]*r,o=i[1]-(t[2]+1)*n[1]*r,l=s+n[0]*r,h=o+n[1]*r;return(0,a.T9)(s,o,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,n){const s=this.getZForResolution(i),a=i/this.getResolution(s),h=this.getOrigin(s),c=(0,u.Pq)(this.getTileSize(s),this.tmpSize_);let d=a*(t-h[0])/i/c[0],g=a*(h[1]-e)/i/c[1];return r?(d=(0,o.mD)(d,5)-1,g=(0,o.mD)(g,5)-1):(d=(0,o.GW)(d,5),g=(0,o.GW)(g,5)),(0,l.T9)(s,d,g,n)}getTileCoordForXYAndZ_(t,e,i,r,n){const s=this.getOrigin(i),a=this.getResolution(i),h=(0,u.Pq)(this.getTileSize(i),this.tmpSize_);let c=(t-s[0])/a/h[0],d=(s[1]-e)/a/h[1];return r?(c=(0,o.mD)(c,5)-1,d=(0,o.mD)(d,5)-1):(c=(0,o.GW)(c,5),d=(0,o.GW)(d,5)),(0,l.T9)(i,c,d,n)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,c.h7)(this.resolutions_,t,e||0);return(0,o.uZ)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,h.mV)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}},859600:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(808738);i(31660);class n extends r.Z{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}const s=n},67848:(t,e,i)=>{"use strict";i.d(e,{uR:()=>a,Un:()=>l,Gk:()=>h});var r=i(199515),n=i(733983),s=i(98634);function o(t,e){const i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(a,l,h){if(a)return t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(s,a[2].toString()).replace(o,function(){const t=a[0],i=e.getFullTileRange(t);return(0,r.h)(i,55),(i.getHeight()-a[2]-1).toString()})}}function a(t,e){const i=t.length,r=new Array(i);for(let n=0;n<i;++n)r[n]=o(t[n],e);return l(r)}function l(t){return 1===t.length?t[0]:function(e,i,r){if(!e)return;const o=(0,s.vp)(e),a=(0,n.$W)(o,t.length);return t[a](e,i,r)}}function h(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);let s;for(s=r;s<=n;++s)e.push(t.replace(i[0],String.fromCharCode(s)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const r=parseInt(i[2],10);for(let n=parseInt(i[1],10);n<=r;n++)e.push(t.replace(i[0],n.toString()));return e}return e.push(t),e}},735195:(t,e,i)=>{"use strict";function r(t,e){const i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});const r=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+r}i.d(e,{B:()=>r})}}]);