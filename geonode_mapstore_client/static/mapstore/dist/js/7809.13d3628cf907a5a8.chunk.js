"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7809],{620388:(t,e,n)=>{n.d(e,{L:()=>l});var r=n(307887),o=n(552259),i=6371008.8;function a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=t[1]*Math.PI/180,a=t[0]*Math.PI/180,u=e/r,c=Math.asin(Math.sin(o)*Math.cos(u)+Math.cos(o)*Math.sin(u)*Math.cos(n));return[180*(a+Math.atan2(Math.sin(n)*Math.sin(u)*Math.cos(o),Math.cos(u)-Math.sin(o)*Math.sin(c)))/Math.PI,180*c/Math.PI]}function u(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sides,o=void 0===r?128:r,i=n.sphereRadius,u=[],c=0;c<o;++c)u.push(a(t,e,2*Math.PI*c/o,i));return u.push(u[0]),u}function c(t,e){var n=t%e;return n*e<0?n+e:n}function s(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.sides,a=void 0===i?128:i,u=n.projection,s=void 0===u?"EPSG:3857":u,l=(0,r.reproject)(t,"EPSG:4326",s),g=[l.x,l.y],y=(0,r.getUnits)(s),f=e/o.Wm[y],h=2*(a+1),m=new Array(h),d=0;d<h;d+=2){m[d]=0,m[d+1]=0;for(var v=2;v<2;v++)m[d+v]=g[v]}for(var p=0;p<=a;++p){var M=2*p,P=0+2*c(p,a)*Math.PI/a;m[M]=g[0]+f*Math.cos(P),m[M+1]=g[1]+f*Math.sin(P)}for(var C=[],S=0;S<m.length-1;S++)if(S%2==0){var G=(0,r.reproject)([m[S],m[S+1]],s,"EPSG:4326");C.push([G.x,G.y])}return C}function l(t,e,n,r){return{type:"Polygon",coordinates:[(n?u:s)(t,e,r)]}}},507122:(t,e,n)=>{n.d(e,{v:()=>l});var r=n(905776),o=n(93042),i=n(322506),a=n(307887);function u(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var s=function(t){return["centerPoint","lineToArc","startPoint","endPoint"].includes(null==t?void 0:t.name)},l={cesium:function(t){var e=t.Cesium,n=function(t){if(null!=t&&t.positions)return{type:t.geometry.type,positions:null==t?void 0:t.positions[0]};var n=("Polygon"===t.geometry.type?t.geometry.coordinates[0]:t.geometry.coordinates).map(function(t){return e.Cartesian3.fromDegrees(t[0],t[1],t[2])});return{type:t.geometry.type,positions:n}},r={centerPoint:function(t){var r,o=n(t),a=o.positions,s=o.type,l=a.map(function(t){var n=e.Cartographic.fromCartesian(t),r=n.longitude,o=n.latitude,i=n.height;return[e.Math.toDegrees(r),e.Math.toDegrees(o),i]});if("LineString"===s){var g=a.reduce(function(t,n,r){return a[r+1]?t+e.Cartesian3.distance(n,a[r+1]):t},0)/2,y=l.map(function(t,n){var r=a.filter(function(t,e){return e<n+1});return[t[0],t[1],t[2],r.reduce(function(t,n,o){return r[o+1]?t+e.Cartesian3.distance(n,r[o+1]):t},0)]}),f=y.find(function(t){return t[3]>g}),h=y.indexOf(f)-1,m=y[h],d=g-m[3],v=e.Cartographic.toCartesian(e.Cartographic.fromDegrees(m[0],m[1],m[2])),p=e.Cartesian3.normalize(e.Cartesian3.subtract(e.Cartographic.toCartesian(e.Cartographic.fromDegrees(f[0],f[1],f[2])),v,new e.Cartesian3),new e.Cartesian3);return{position:e.Cartesian3.add(v,e.Cartesian3.multiplyByScalar(p,d,new e.Cartesian3),new e.Cartesian3)}}var M,P=((0,i.Z)({type:"Polygon",coordinates:[[].concat((M=l,function(t){if(Array.isArray(t))return c(t)}(M)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(M)||u(M)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[l[0]])]})||{}).geometry,C=l.reduce(function(t,e){return t+function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3)[2]},0)/l.length,S=[P.coordinates[0],P.coordinates[1],C]||0;return{position:e.Cartographic.toCartesian((r=e.Cartographic).fromDegrees.apply(r,S))}},lineToArc:function(){return{arcType:e.ArcType.GEODESIC,perPositionHeight:void 0}},startPoint:function(t){return{position:n(t).positions[0].clone()}},endPoint:function(t){var e=n(t).positions;return{position:e["Polygon"===t.geometry.type?e.length-2:e.length-1].clone()}}};return function(t){var e=t.msGeometry;return s(e)&&r[null==e?void 0:e.name]?r[e.name]:null}},openlayers:function(t){var e=t.Point,n=t.LineString,i=t.Polygon,u=t.GeoJSON,c=t.getCenter,l=new u,g={centerPoint:function(t){return function(n){var i=n.getGeometry().getType();if(["Point","MultiPoint"].includes(i))return n.getGeometry();var u=t?t.getView().getProjection().getCode():"EPSG:3857",s=n.getGeometry();if(["LineString"].includes(i)){var g=JSON.parse(l.writeFeature(n,{dataProjection:"EPSG:4326",featureProjection:u})),y=(0,r.Z)(g)/2,f=(0,o.Z)(g,y),h=(0,a.reproject)(f.geometry.coordinates,"EPSG:4326",u);return new e([h.x,h.y])}var m=s.getExtent(),d=c(m);return new e(d)}},lineToArc:function(t){return function(e){var r=t?t.getView().getProjection().getCode():"EPSG:3857",o=e.getGeometry().getType();if("LineString"===o||"MultiPoint"===o){var u=e.getGeometry().getCoordinates();return u=(0,a.transformLineToArcs)(u.map(function(t){var e=(0,a.reproject)(t,r,"EPSG:4326");return[e.x,e.y]})),new n(u.map(function(t){var e=(0,a.reproject)(t,"EPSG:4326",r);return[e.x,e.y]}))}if("Polygon"===o){var c=e.getGeometry().getCoordinates()[0];return c=(0,a.transformLineToArcs)(c.map(function(t){var e=(0,a.reproject)(t,r,"EPSG:4326");return[e.x,e.y]})),new i([c.map(function(t){var e=(0,a.reproject)(t,"EPSG:4326",r);return[e.x,e.y]})])}return e.getGeometry()}},startPoint:function(){return function(t){var n=t.getGeometry(),r=n.getType();if(["Point","MultiPoint"].includes(r))return t.getGeometry();var o="Polygon"===r?n.getCoordinates()[0]:n.getCoordinates();return o.length>1?new e(o[0]):null}},endPoint:function(){return function(t){var n=t.getGeometry(),r=n.getType();if(["Point","MultiPoint"].includes(r))return t.getGeometry();var o="Polygon"===r?n.getCoordinates()[0]:n.getCoordinates();return new e(o.length>3?o[o.length-("Polygon"===r?2:1)]:o[o.length-1])}}};return function(t,e,n){var r,o=t.msGeometry;if(s(o)&&g[null==o?void 0:o.name])return{geometry:g[o.name](n)};var i=(null==e?void 0:e.getGeometry)&&(null==e||null===(r=e.getGeometry())||void 0===r?void 0:r.getType());return["Mark","Icon"].includes(t.kind)&&["LineString","MultiLineString","Polygon","MultiPolygon"].includes(i)?{geometry:g.centerPoint(n)}:null}},geojson:function(){var t={centerPoint:function(t){if(["LineString"].includes(t.geometry.type)){var e=(0,r.Z)(t)/2;return(0,o.Z)(t,e).geometry.coordinates}return(0,i.Z)(t).geometry.coordinates},lineToArc:function(t){return"LineString"===t.geometry.type?(0,a.transformLineToArcs)(t.geometry.coordinates):"Polygon"===t.geometry.type?t.geometry.coordinates.map(a.transformLineToArcs):null},startPoint:function(t){return"Polygon"===t.geometry.type?t.geometry.coordinates[0][0]:"LineString"===t.geometry.type?t.geometry.coordinates[0]:null},endPoint:function(t){return"Polygon"===t.geometry.type?t.geometry.coordinates[0][t.geometry.coordinates[0].length-2]:"LineString"===t.geometry.type?t.geometry.coordinates[t.geometry.coordinates.length-1]:null}};return function(e){var n=e.msGeometry;return s(n)&&t[null==n?void 0:n.name]?t[n.name]:null}}}},93042:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(701449),o=n(936987);function i(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=i(e,t);return(n+180)%360}(t,e);var a=(0,o.c9)(t),u=(0,o.c9)(e),c=(0,r.Ht)(a[0]),s=(0,r.Ht)(u[0]),l=(0,r.Ht)(a[1]),g=(0,r.Ht)(u[1]),y=Math.sin(s-c)*Math.cos(g),f=Math.cos(l)*Math.sin(g)-Math.sin(l)*Math.cos(g)*Math.cos(s-c);return(0,r.vi)(Math.atan2(y,f))}function a(t,e,n,i){void 0===i&&(i={});var a=(0,o.c9)(t),u=(0,r.Ht)(a[0]),c=(0,r.Ht)(a[1]),s=(0,r.Ht)(n),l=(0,r.lF)(e,i.units),g=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(s)),y=u+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(g)),f=(0,r.vi)(y),h=(0,r.vi)(g);return(0,r.xm)([f,h],i.properties)}var u=n(492964);function c(t,e,n){void 0===n&&(n={});for(var c=(0,o.wA)(t).coordinates,s=0,l=0;l<c.length&&!(e>=s&&l===c.length-1);l++){if(s>=e){var g=e-s;if(g){var y=i(c[l],c[l-1])-180;return a(c[l],g,y,n)}return(0,r.xm)(c[l])}s+=(0,u.Z)(c[l],c[l+1],n)}return(0,r.xm)(c[c.length-1])}},492964:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(936987),o=n(701449);const i=function(t,e,n){void 0===n&&(n={});var i=(0,r.c9)(t),a=(0,r.c9)(e),u=(0,o.Ht)(a[1]-i[1]),c=(0,o.Ht)(a[0]-i[0]),s=(0,o.Ht)(i[1]),l=(0,o.Ht)(a[1]),g=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(s)*Math.cos(l);return(0,o.DL)(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),n.units)}},905776:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(492964),o=n(739034);function i(t,e){return void 0===e&&(e={}),(0,o.hE)(t,function(t,n){var o=n.geometry.coordinates;return t+(0,r.Z)(o[0],o[1],e)},0)}}}]);