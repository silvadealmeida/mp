"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50578],{591884:(e,t,r)=>{r.d(t,{H:()=>j,k:()=>I});var n=r(580416),o=r(501157),i=r(577215),a=r(432420),l=r(375875),c=r.n(l),u=r(472500),s=r.n(u),f=r(727418),d=r.n(f),m=r(505055),y=r.n(m),p=r(611847);const v={describeCoverage:function(e,t){var r=s().parse((0,p.eW)(e),!0),n=s().format(d()({},r,{query:d()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return c().get(n).then(function(e){var t;return y().parseString(e.data,{explicitArray:!1},function(e,r){t=r}),t})}};var b=r(624262),g=r(227361),h=r.n(g),S=r(838848);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function P(e,t,r){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t,r){return function(i){return o.ZP.describeLayer(e,t.name,r).then(function(r){return r&&"WFS"===r.owsType?a.v$(e,r.name).then(function(e){return r.geometryType=(0,S.mI)(e),i((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))}).catch(function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))}):(r&&"WCS"===r.owsType&&v.describeCoverage(e,r.name).then(function(e){var o=h()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map(function(e,t){return t+1+""}),i((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))}).catch(function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))}),i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))}).catch(function(e){return i((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))})}}function I(e){var t=(0,b.Fh)(e);return function(r){return r((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(t).then(function(t){var a=o.ZP.parseLayerCapabilities(t,e);r(a?(0,n.tV)(e.id,"id",w(w({},(0,i.Br)(a)),{},{capabilitiesLoading:null})):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))}).catch(function(t){r((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))})}}},396909:(e,t,r)=>{r.d(t,{vZ:()=>n,TB:()=>o,gF:()=>i,g$:()=>a,dJ:()=>l,uz:()=>c,vA:()=>u,lX:()=>s,E2:()=>f,mF:()=>d,ch:()=>m,DX:()=>y,j1:()=>p,wL:()=>v,Nm:()=>b,rb:()=>g,dk:()=>h,Wv:()=>S,Nf:()=>E,FU:()=>O,k5:()=>w,pt:()=>P,Wm:()=>j,wj:()=>I,l1:()=>T,cu:()=>C,Fe:()=>k,Lc:()=>Z,p2:()=>A,WQ:()=>N,E0:()=>D,xR:()=>x,WB:()=>U,bB:()=>L});var n="STYLEEDITOR:TOGGLE_STYLE_EDITOR",o="STYLEEDITOR:SELECT_STYLE_TEMPLATE",i="STYLEEDITOR:UPDATE_TEMPORARY_STYLE",a="STYLEEDITOR:UPDATE_STATUS",l="STYLEEDITOR:RESET_STYLE_EDITOR",c="STYLEEDITOR:ADD_STYLE",u="STYLEEDITOR:CREATE_STYLE",s="STYLEEDITOR:LOADING_STYLE",f="STYLEEDITOR:LOADED_STYLE",d="STYLEEDITOR:ERROR_STYLE",m="STYLEEDITOR:UPDATE_STYLE_CODE",y="STYLEEDITOR:EDIT_STYLE_CODE",p="STYLEEDITOR:DELETE_STYLE",v="STYLEEDITOR:INIT_STYLE_SERVICE",b="STYLEEDITOR:SET_EDIT_PERMISSION",g="STYLEEDITOR:SET_DEFAULT_STYLE",h="STYLEEDITOR:UPDATE_EDITOR_METADATA";function S(e,t){return{type:n,layer:e,enabled:t}}function E(e){return{type:a,status:e}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,r=e.templateId,n=e.format,i=e.languageVersion,a=e.init;return{type:o,code:t,templateId:r,format:n,init:a,languageVersion:i}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.temporaryId,r=e.templateId,n=e.code,o=e.format,a=e.languageVersion,l=e.init;return{type:i,temporaryId:t,templateId:r,code:n,format:o,init:l,languageVersion:a}}function P(e){return{type:s,status:e}}function j(){return{type:f}}function I(e){return{type:u,settings:e}}function T(){return{type:l}}function C(e){return{type:c,add:e}}function k(e,t){return{type:d,status:e,error:t}}function Z(){return{type:m}}function A(e){return{type:y,code:e}}function N(e){return{type:p,styleName:e}}function D(e,t){return{type:v,service:e,permissions:t}}function x(e){return{type:b,canEdit:e}}function U(){return{type:g}}function L(e){return{type:h,metadata:e}}},378795:(e,t,r)=>{r.d(t,{Z:()=>L});var n=r(611847),o=r(472500),i=r.n(o),a=r(189734),l=r.n(a),c=r(91175),u=r.n(c),s=r(984596),f=r.n(s),d=r(281763),m=r.n(d),y=r(747037),p=r.n(y),v=r(727418),b=r.n(v),g=r(65792),h=r.n(g),S=r(624262),E=r(129389);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var w=["SLD","viewparams"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e,t,r,n){var o=e?u()((e.thematic.colors||e.thematic.additionalColors||[]).filter(function(e){return e.name===t}))||u()(E.S.filter(function(e){return e.name===t})):n?u()([n].concat(T(E.S)).filter(function(e){return e.name===t})):u()(E.S.filter(function(e){return e.name===t}));return o&&(p()(o.colors)||o.colors.length>=2)?{ramp:"custom",colors:h().scale(o.colors).colors(r).join(",")}:{ramp:t}},Z=function(e,t){var r=e.thematic&&e.thematic.params||[],n=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce(function(o,i){return function(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(function(t){return t.field===e}).length>0}(e,t)}(i,[].concat(T(r),T(n)))?b()(o,function(e,t,r){return{viewparams:(e?e+";":"")+t+":"+r}}(o.viewparams,i,t[i])):"ramp"===i?b()(o,k(e,t[i],t.intervals||5)):"classification"===i?b()(o,(a=t[i])?{customClasses:a.reduce(function(e,t){return[].concat(T(e),[t.min+","+t.max+","+t.color])},[]).join(";")}:{}):"attribute"===i?b()(o,{attribute:e.thematic&&e.thematic.fieldAsParam?t[i]:t.field}):"field"===i&&e.thematic&&!e.thematic.fieldAsParam?o:"strokeWeight"!==i||t.strokeOn?"strokeOn"===i?o:b()(o,I({},i,t[i])):b()(o,I({},i,-1));var a},{})},A=function(e){return b()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{})},N=function(e){return e.reduce(function(e,t){return m()(t)?t:e},null)},D=function(e){return e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null},x=function(e){return e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080"},U={getStyleService:function(e,t){var r=(0,n.ij)((0,S.Hi)(e));return i().format(b()(A(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:b()({},Z(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:function(e){var t=(0,n.ij)((0,S.Hi)(e));return i().format(b()(A(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:function(e,t,r){var o=r||{},a=o.baseUrl,l=void 0===a?"":a,c=o.isStatic,u=void 0!==c&&c,s=(0,n.ij)(u?l:(0,S.Hi)(e));return i().format(b()(A(s),{pathname:s.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:function(e,t){return{SLD:U.getStyleService(e,t),viewparams:Z(e,t).viewparams}},getMetadataParameters:function(e,t){return Z(e,t)},getFieldsService:function(e){var t=(0,n.ij)((0,S.Hi)(e)),r=e.thematic&&e.thematic.datatable||e.name;return i().format(b()(A(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+r+"/attributes.json"}))},readFields:function(e){return l()(f()(e.Attributes.Attribute||[]).filter(function(e){return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t}).map(function(e){return{name:e.name,type:(e.type,"number")}}),function(e){return e.name})},readClassification:function(e,t){!function(e){if(e&&e.Rule)throw new Error("toc.thematic.invalid_attribute");if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");f()(e.Rules.Rule).forEach(function(e){if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")})}(e);var r=f()(e.Rules.Rule||[]);return r.map(function(e,n){var o,i,a,l;return j({title:e.Title,color:x(e),type:D(e)},"uniqueInterval"===t?{unique:e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal}:{min:N([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,n===r.length-1&&(null==e||null===(o=e.Filter)||void 0===o||null===(i=o.PropertyIsGreaterThanOrEqualTo)||void 0===i?void 0:i.Literal)]),max:N([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===n&&(null==e||null===(a=e.Filter)||void 0===a||null===(l=a.PropertyIsLessThan)||void 0===l?void 0:l.Literal)])})})||[]},readRasterClassification:function(e){var t,r,n,o;return((null===(r=f()(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===r||null===(n=r.RasterSymbolizer)||void 0===n||null===(o=n.ColorMap)||void 0===o?void 0:o.ColorMapEntry)||[]).map(function(e){return{color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])}})},methods:["equalInterval","quantile","jenks"],getThematicParameters:function(e){return e.map(function(e){return e.type&&U.standardParams[e.type]&&b()({},U.standardParams[e.type],e)||e})},standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:k,getColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.S,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return(t?t.thematic.colors||[].concat(T(e),T(t.thematic.additionalColors||[])):n?[n].concat(T(e)):T(e)).map(function(e){return!p()(e.colors)&&e.colors.length>=r?e:j(j({},e),{},{colors:h().scale(1===e.colors.length?[e.colors[0],e.colors[0]]:e.colors).colors(r)})})},hasThematicStyle:function(e){return!!(e&&e.params&&e.params.SLD)},removeThematicStyle:function(e){e.SLD,e.viewparams;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,w);return b()({},t,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}};const L=U},108954:(e,t,r)=>{r.d(t,{eb:()=>C,IW:()=>Z,DG:()=>A});var n=r(618446),o=r.n(n),i=r(227361),a=r.n(i),l=r(984596),c=r.n(l),u=r(747037),s=r.n(u),f=r(375875),d=r.n(f),m=r(322666),y=r(378795);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=["equalInterval","uniqueInterval","quantile","jenks","standardDeviation"],E=["equalInterval","quantile","jenks"],O={};function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map(function(t){return t.ruleId===e?r(t):t})}var P=function(e,t){var r="uniqueInterval"===(null==e?void 0:e.method),n=null==e?void 0:e.intervalsForUnique;return{errorId:t&&t.includes("toc")?t:r?"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationError",msgParams:r?{intervalsForUnique:n}:{}}},j=function(e,t){var r="uniqueInterval"===(null==e?void 0:e.method),n=null==e?void 0:e.intervalsForUnique;return{errorId:r?t&&t.includes("float type")?"styleeditor.classificationRasterUniqueIntervalError":"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationRasterError",msgParams:r?{intervalsForUnique:n}:{}}},I=function(e,t){if(e.classification)return{classification:e.classification};var r=a()(e,"Rules.Rule"),n=r&&a()(r,"RasterSymbolizer.ColorMap.ColorMapEntry"),o="classificationRaster"===t.type?n&&c()(n).length:r&&c()(r).length,i="custom"===t.ramp&&t.classification.length>0&&{name:"custom",colors:t.classification.map(function(e){return e.color})},l=y.Z.getColor(void 0,t.ramp,o||t.intervals,i).colors,u=void 0===l?[]:l,s=null==u?void 0:u.split(",");return t.reverse&&(s=s.reverse()),{classification:y.Z["classificationRaster"===t.type?"readRasterClassification":"readClassification"](e,t.method).map(function(e,t){return g(g({},e),{},{color:s[t]})})}},T={geoserver:{updateStyleService:function(e){var t=e.baseUrl,r=e.styleService,n=null!=r&&r.isStatic?r.baseUrl:t;if(O[n])return new Promise(function(e){return e(O[n])});var o=y.Z.getCapabilitiesUrl({url:n});return(null!=r&&r.isStatic?new Promise(function(e){return e(r)}):m.ZP.getStyleService({baseUrl:n})).then(function(e){return d().get(o).then(function(t){var r=t.data;return[e,r]}).catch(function(){return[e,null]})}).then(function(e){var t,r,o,i,a,l,c,u,s,f,d,m=(d=2,function(e){if(Array.isArray(e))return e}(f=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(f,d)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(f,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],p=m[1],b=g(g({},y),{},{classificationMethods:p?(t=p,r=(t||{}).capabilities,o=void 0===r?{}:r,i=o.vector,a=void 0===i?{}:i,l=o.raster,c=void 0===l?{}:l,u=a.classifications||[],s=c.classifications||[],{vector:u.filter(function(e){return-1!==S.indexOf(e)}),raster:s.filter(function(e){return-1!==S.indexOf(e)})}):{vector:E,raster:E}});return O[n]=b,b})}}};function C(e){var t=e.baseUrl,r=e.styleService;return T.geoserver.updateStyleService({baseUrl:t,styleService:r})}var k=function(e){var t=e.layer,r=e.params,n=e.styleService,o=Object.keys(r.msViewParams||{}).map(function(e){var t=r.msViewParams[e];if(void 0===t)return null;var n=c()(t).map(function(e){return s()(e)?"'".concat(e,"'"):e}).join("\\,");return"".concat(e,":").concat(n)}).filter(function(e){return e}).join(";"),i=g({intervals:r.intervals,method:r.method,attribute:r.attribute,intervalsForUnique:r.intervalsForUnique},o&&{viewparams:o});return d().get(y.Z.getStyleMetadataService(t,i,n))};function Z(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,a=e.styleService,l=e.classificationRequest,c=void 0===l?k:l,u=["intervals","method","reverse","attribute","ramp","intervalsForUnique","msViewParams"],s=g(g({},r),t),f=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){var d=y.Z.getColor(void 0,t.ramp,s.intervals).colors.split(",");return new Promise(function(e){return e(w(f,n,function(e){return g(g(g({},e),s),{},{classification:s.classification.map(function(e,t){return g(g({},e),{},{color:d[t]})}),errorId:void 0})}))})}var m=u.reduce(function(e,t){return g(g({},e),{},h({},t,r[t]))},{}),p=u.reduce(function(e,t){return g(g({},e),{},h({},t,s[t]))},{}),v=!u.filter(function(e){return"msViewParams"!==e}).find(function(e){return void 0===s[e]})&&!o()(m,p)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.errorId,o=e.msgParams;return w(f,n,function(e){return g(g(g({},e),t),{},{errorId:r,msgParams:o})})};return v?c({layer:i,params:s,styleService:a}).then(function(e){var r=e.data;return w(f,n,function(e){return g(g(g(g({},e),t),I(r,s)),{},{errorId:void 0})})}).catch(function(e){return b(P(s,null==e?void 0:e.message))}):new Promise(function(e){return e(b())})}function A(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,a=e.styleService,l=["intervals","continuous","method","reverse","ramp","intervalsForUnique"],c=g(g({},r),t),u=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==c?void 0:c.method)&&!t.classification){var s=y.Z.getColor(void 0,t.ramp,c.intervals).colors.split(",");return new Promise(function(e){return e(w(u,n,function(e){return g(g(g({},e),c),{},{classification:c.classification.map(function(e,t){return g(g({},e),{},{color:s[t]})}),errorId:void 0})}))})}var f=l.reduce(function(e,t){return g(g({},e),{},h({},t,r[t]))},{}),m=l.reduce(function(e,t){return g(g({},e),{},h({},t,c[t]))},{}),p=!l.find(function(e){return void 0===c[e]})&&!o()(f,m)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==c?void 0:c.method),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.errorId,o=e.msgParams;return w(u,n,function(e){return g(g(g({},e),t),{},{errorId:r,msgParams:o})})};return p?d().get(y.Z.getStyleMetadataService(i,{intervals:c.intervals,continuous:c.continuous,method:c.method,reverse:c.reverse,intervalsForUnique:c.intervalsForUnique},a)).then(function(e){var r=e.data;return w(u,n,function(e){return g(g(g(g({},e),t),I(r,c)),{},{errorId:void 0})})}).catch(function(e){return v(j(c,null==e?void 0:e.data))}):new Promise(function(e){return e(v())})}},322666:(e,t,r)=>{r.d(t,{ZP:()=>U,bc:()=>x,Uz:()=>D});var n=r(375875),o=r.n(n),i=r(727418),a=r.n(i),l=r(227361),c=r.n(l),u=r(567523),s=r.n(u),f=r(968929),d=r.n(f);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y={},p=function(e){return e.map(function(e){return s()(e,function(e,t){return d()(t)})})},v=r(91175),b=r.n(v),g=r(984596),h=r.n(g),S=r(99009);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){j(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t,r){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=[{regex:/gt-css/,format:"css"}],T={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},C=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?T.sldse:T.sld:T[e]||T.sld},k=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,c=e.languageVersion,u=t?{name:encodeURIComponent(a)}:{};return{options:P(P({},n),{},{params:P(P({},n.params),u),headers:P(P({},n.headers||{}),{},{"Content-Type":C(o,c)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},Z=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/","".concat(encodeURIComponent(n),".").concat(i))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h()((null==e?void 0:e.entry)||[]).reduce(function(e,t){return P(P({},e),{},j({},t["@key"],t.$))},{})},N=function(e){var t=e.baseUrl,r=e.styleName,n=e.metadata,i=Z(P(P({},(0,S.$N)(r)),{},{geoserverBaseUrl:t}));return o().get(i).then(function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,r=void 0===t?{}:t;return o().put(i,{style:P(P({},r.style),{},{metadata:P(P({},A(null===(e=r.style)||void 0===e?void 0:e.metadata)),n)})})})},D=function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,u=e.metadata,s=(0,S.$N)(l),f=s.name,d=s.workspace,m=k({options:n,format:a,baseUrl:t,name:f,workspace:d,languageVersion:c});return o().put(m.url,r,m.options).then(function(){return u?N({baseUrl:t,styleName:l,metadata:u}).then(function(){return null}).catch(function(){return null}):null})},x=function(e){var t=e.baseUrl,r=e.styleName,n=e.options,i=(0,S.$N)(r),a=i.name,l=i.workspace,c=Z({name:a,workspace:l,geoserverBaseUrl:t});return o().get(c,n).then(function(e){return e.data&&e.data.style&&e.data.style.name?o().get(Z({workspace:l,geoserverBaseUrl:t,name:e.data.style.name,format:(r=e.data.style.filename,r.split(".").pop())})).then(function(t){var r,n,o=t.data;return P(P(P({},e.data.style),(null==e||null===(r=e.data)||void 0===r||null===(n=r.style)||void 0===n?void 0:n.metadata)&&{metadata:A(e.data.style.metadata)}),{},{code:o})}):null;var r})};const U={saveStyle:function(e,t,r,n){var i=e+"styles/"+encodeURI(t),l=a()({},n);return l.headers=a()({},l.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o().put(i,r,l)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return y[t]?new Promise(function(e){return e(y[t])}):o().all([o().get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return c()(t,"about.resource")}).catch(function(){return null}),o().get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return c()(t,"about.resource")}).catch(function(){return null}),o().get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then(function(e){var t=e.data;return c()(t,"fonts")}).catch(function(){return null})]).then(function(e){var r,n,o=(n=3,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(r,n)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=o[2],c={version:i&&p(i),manifest:a&&p(a),fonts:l};return i&&a?(y[t]=c,y[t]):c})}({baseUrl:t}).then(function(e){var r=e.version,n=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!r)return null;var a,l=(n||[]).map(function(e){var t=e.name;return b()(I.filter(function(e){var r=e.regex;return t.match(r)}).map(function(e){return e.format}))}).filter(function(e){return e}),c=b()(r.filter(function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()}))||{};return{baseUrl:t,version:c.version,formats:[].concat((a=l,function(e){if(Array.isArray(e))return O(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["sld"]),availableUrls:[],fonts:i}})},getStyle:function(e){var t=e.options,r=e.format,n=e.baseUrl,i=e.styleName,a=(0,S.$N)(i),l=a.name,c=a.workspace,u=k({options:t,format:r,baseUrl:n,name:l,workspace:c});return o().get(u.url,u.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,u=e.metadata,s=(0,S.$N)(l),f=s.name,d=s.workspace,m=k({options:n,format:a,baseUrl:t,name:f,workspace:d,languageVersion:c},!0);return o().post(m.url,r,m.options).then(function(){return u?N({baseUrl:t,styleName:l,metadata:u}).then(function(){return null}).catch(function(){return null}):null})},updateStyle:D,deleteStyle:function(e){var t=e.baseUrl,r=e.options,n=e.format,i=void 0===n?"sld":n,a=e.styleName,l=(0,S.$N)(a),c=l.name,u=l.workspace,s=k({options:r,format:i,baseUrl:t,name:c,workspace:u});return o().delete(s.url,s.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,n=void 0===r?[]:r,i=[],l=n.length;return new Promise(function(e){n&&0!==n.length?n.forEach(function(r,c){var u=r.name,s=r.href;return o().get(s||Z(P(P({},(0,S.$N)(u)),{},{geoserverBaseUrl:t}))).then(function(t){var r=t.data;i[c]=a()({},n[c],r&&r.style&&P(P(P({},r.style),r.style.metadata&&{metadata:A(r.style.metadata)}),{},{name:(0,S.U_)(r.style)})||{}),0===--l&&e(i.filter(function(e){return e}))}).catch(function(){i[c]=a()({},n[c]),0===--l&&e(i.filter(function(e){return e}))})}):e([])})},getStyleCodeByName:x,updateStyleMetadata:N}},135400:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),i=r(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,a=void 0===n?{}:n,l=e.contentStyle,u=void 0===l?{}:l,s=e.imageStyle,f=void 0===s?{}:s,d=e.glyph,m=void 0===d?"info-sign":d,y=e.iconFit,p=e.title,v=e.tooltip,b=e.tooltipId,g=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:y?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:y?"100%":void 0},a)},m?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:y?"100%":void 0},f)},o().createElement(i.Z,{iconFit:y,tooltip:v,tooltipId:b,glyph:m})):null,p?o().createElement("h1",{key:"title"},p):null,g?o().createElement("p",{key:"description",className:"empty-state-description"},g):null),o().createElement("div",{key:"content",className:"empty-state-content",style:u},h))}},592778:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(893379),o=r.n(n),i=r(172704);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=r(45697),l=r.n(a),c=r(124852),u=r.n(c),s=r(271418);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return v(e=function(e,t,r){return t=y(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"onFilter",function(t){e.props.onFilter(t.target.value)}),v(e,"onClear",function(){e.props.onFilter("")}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.filterText?u().createElement(s.Ox,{placement:"bottom",overlay:u().createElement(s.u,{id:"mapstore-toc-filter"},this.props.tooltipClear)},u().createElement(s.gG,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):u().createElement(s.gG,{className:"text-primary",glyph:"filter"});return u().createElement(s.cw,{className:"mapstore-filter"},u().createElement(s.BZ,null,u().createElement(s.NI,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),u().createElement(s.BZ.Addon,{className:"square-button-md"},this.props.loading?u().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&d(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(u().Component);v(g,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),v(g,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const h=g},379313:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),i=r(271418),a=r(496259),l=(0,r(815135).Z)(i.gG);const c=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,i=e.tooltipId,c=e.iconFit,u=e.padding,s=void 0===u?0:u,f=e.margin,d=void 0===f?0:f;return o().createElement(a.Z,null,function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:d+"px",textAlign:"center",fontSize:c?Math.min(t,a)-2*s-2*d:t-2*s-2*d}})})}},638064:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i),l=r(271418),c=r(876424);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(null,arguments)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function p(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){return t=m(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,u=t||c.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.X2,{className:"items-list"},r.map(function(e,t){return a().createElement(l.JX,s({key:e.id||t},n),a().createElement(u,s({onClick:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.apply(void 0,[e].concat(r))},size:i},e)))})))}}],n&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);p(b,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),p(b,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const g=b},677306:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(805346),a=r(298854);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const u=function(e){var t=e.onValid,r=e.onError,c=e.editorRef,u=e.json,s=void 0===u?{}:u,f=e.editorWillUnmount,d=void 0===f?function(){}:f,m=l((0,n.useState)(JSON.stringify(s,!0,2)),2),y=m[0],p=m[1],v=l((0,n.useState)(),2),b=v[0],g=v[1];return(0,n.useEffect)(function(){try{var e=JSON.parse(y);g(),t(e)}catch(e){g(e),r(e)}},[y]),o().createElement("div",{className:"code-editor"},o().createElement(a.Z,{ref:c,editorWillUnmount:function(){return d(y)},value:y,onBeforeChange:function(e,t,r){p(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),b&&o().createElement("div",{className:"error-area"},o().createElement("div",{className:"error-area-header"},o().createElement(i.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),o().createElement("div",{className:"error-area-body"},o().createElement(i.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:b.message}},function(e){return o().createElement("pre",{className:"error-msg"},e)}))))}},982030:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(623560),a=r.n(i),l=r(867076),c=r(135400);const u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,l.branch)(e,function(){return function(e){return o().createElement(r,t&&a()(t)?t(e):t)}})}},173014:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(867076),a=r(82110);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var c=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Z;return(0,i.branch)(e,function(){return function(e){var n=e.loaderProps;return o().createElement(r,l({},t,n))}})}},906724:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(124852),o=r.n(n),i=r(867076),a=function(e,t,r){var n=r.maskContainerStyle,a=r.maskStyle,l=r.className,c=r.white;return function(r){return(0,i.nest)(function(r){return o().createElement("div",{className:"ms2-mask-container ".concat(l||""," ").concat(e(r)?"":"ms2-mask-empty"),style:n},r.children,e(r)?o().createElement("div",{className:"ms2-mask"+(c?" white-mask":""),style:a},t(r)):null)},r)}};const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.alwaysWrap,o=void 0===n||n,l=r.white,c=void 0!==l&&l,u=r.maskContainerStyle,s=void 0===u?{}:u,f=r.maskStyle,d=void 0===f?{}:f,m=r.className;return o?a(e,t,{maskContainerStyle:s,maskStyle:d,className:m,white:c}):(0,i.branch)(e,a(function(){return!0},t,{maskContainerStyle:s,maskStyle:d,white:c}))}},218291:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(124852),o=r.n(n);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(null,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,r=void 0===t?null:t;return function(t){return(0,n.forwardRef)(function(a,l){return void 0===e||e(a)?o().createElement(n.Suspense,{fallback:r},o().createElement(t,i({ref:l},a))):null})}}},467057:(e,t,r)=>{r.d(t,{Z:()=>R});var n=r(23279),o=r.n(n),i=r(666654),a=r.n(i),l=r(618446),c=r.n(l),u=r(623560),s=r.n(u),f=r(513218),d=r.n(f),m=r(747037),y=r.n(m),p=r(727418),v=r.n(p),b=r(45697),g=r.n(b),h=r(124852),S=r.n(h),E=r(805346),O=r(965539),w=r(532425),P=r(202576),j=r(298854);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function x(e,t,r){return(t=U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}var L=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return x(e=function(e,t,r){return t=N(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}(this,t,[].concat(n)),"state",{}),x(e,"onRenderToken",function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)}),e.inlineWidgets=[],t.doc.iter(0,r,function(r){var n=r.lineNo();t.getLineTokens(n).forEach(function(r){e.inlineWidgets=e.props.inlineWidgets.reduce(function(o,i){var a=i.type,l=i.style,c=void 0===l?{}:l,u=i.active,f=void 0===u?function(){return!1}:u,d=i.className,m=void 0===d?"":d;if(f(r)){var y=e.getInlineWidget({className:m,token:r,onClick:function(){return e.setState({inlineWidgetType:a,token:r,lineNo:n})},style:s()(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},y,!1),[].concat(C(o),[y])}return C(o)},C(e.inlineWidgets))})})}),x(e,"onAutocomplete",function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&(a()(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;e.cm.commands.autocomplete(t,null,{completeSingle:!1,container:o})}}}),x(e,"onUpdate",function(){e.update.cancel(),e.update()}),x(e,"getInlineWidget",function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,i=e.className,a=void 0===i?"":i,l=e.style,c=void 0===l?{}:l,u=document.createElement("div");return u.setAttribute("class","".concat(a," ms-style-editor-inline-widget")),v()(u.style,c),u.onclick=function(){return r(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},o))},u}),x(e,"getChangedCode",function(e,t){if("application/json"===t&&y()(e))try{return{code:JSON.parse(e)}}catch(e){return{error:e}}return{code:e}}),x(e,"getErrorMessage",function(){return e.props.error.messageId?S().createElement(E.Z,{msgId:e.props.error.messageId,msgParams:e.props.error.messageParams}):e.props.error.line?e.props.error.message:S().createElement(E.Z,{msgId:"styleeditor.genericValidationError"})}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:d()(this.props.code)?JSON.stringify(this.props.code,null,2):this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!c()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return S().createElement(O.Z,{className:"ms-style-editor",style:this.props.style,header:S().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&S().createElement(w.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&S().createElement(P.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:S().createElement(E.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.getErrorMessage()}))},S().createElement(j.Z,{key:"style-editor",value:this.state.code,editorDidMount:function(t,r,n,i){e.onRenderToken(t),e.editor=t,e.cm=i,t.on("inputRead",e.onAutocomplete),e.update=o()(function(){var t=e.getChangedCode(e.state.code,e.props.mode),r=t.error,n=t.code;r?e.props.onError(r):e.props.onChange(n)},e.props.waitTime),e.cm.extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&S().createElement("div",{className:"ms-inline-widget-container"},S().createElement("div",null,S().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),S().createElement("div",null,this.props.inlineWidgets.filter(function(t){return t.type===e.state.inlineWidgetType}).map(function(t){var r=t.Widget;return S().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})}))))}}])&&Z(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(S().Component);x(L,"propTypes",{mode:g().string,theme:g().string,style:g().object,code:g().oneOfType([g().string,g().object]),onChange:g().func,waitTime:g().number,hintProperties:g().object,error:g().object,inlineWidgets:g().array,loading:g().bool,onError:g().func}),x(L,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[],onError:function(){}});const R=L},888894:(e,t,r)=>{r.d(t,{Z:()=>Q});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i),l=r(23279),c=r.n(l),u=r(313311),s=r.n(u),f=r(406557),d=r.n(f),m=r(80717),y=r(532425),p=r(3047),v=r(166287),b=r(521992),g=r(99009),h=r(21090),S=r(202576),E=r(805346),O=r(271418),w=r(290702),P=r(815135),j=r(624847),I=r(677306),T=r(618446),C=r.n(T),k=r(86638);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D=(0,P.Z)(j.Z),x={params:[]};const U=function(e,t){var r=e.onUpdate,i=e.thematicCustomParams,a=e.editorRef,l=t.messages,c=A((0,n.useState)(!1),2),u=c[0],s=c[1],f=A((0,n.useState)(!0),2),d=f[0],y=f[1],p=A((0,n.useState)(!1),2),v=p[0],b=p[1],g=function(e){var t=!0;return e.params.forEach(function(e){var r,n,o="object"===Z(e),i=null==e?void 0:e.field,a=!!((null==e||null===(r=e.values)||void 0===r?void 0:r.length)&&(null==e||null===(n=e.values)||void 0===n?void 0:n.length)>=1)&&(null==e?void 0:e.values.every(function(e){return(null==e?void 0:e.value)&&(null==e?void 0:e.name)}));o&&i&&a||(t=!1)}),t},h=function(){d?s(function(e){return!e}):b(!0)};return o().createElement(w.z,{open:u,onClick:function(){return h()},placement:"right",content:o().createElement("div",{className:"ms-classification-layer-settings"},o().createElement("div",{className:"ms-classification-layer-settings-title"},o().createElement(E.Z,{msgId:"styleeditor.customParams"}),o().createElement(D,{className:"square-button-md no-border",onClick:function(){return h()}},o().createElement(O.gG,{glyph:"1-close"}))),o().createElement(I.Z,{json:null!=i&&i.params?i:x,editorWillUnmount:function(e){try{var t=JSON.parse(e);g(t)&&!C()(t,i)&&r(t)}catch(e){}},onValid:function(e){var t;if(null!=e&&null!==(t=e.params)&&void 0!==t&&t.length){if(!g(e))throw y(!1),new Error((0,k.S$)(l,"styleeditor.wrongFormatMsg"));!d&&y(!0)}},onError:function(){y(!1)},editorRef:a}),v&&o().createElement("div",{className:"ms-style-editor-alert"},o().createElement(O.bZ,{bsStyle:"warning"},o().createElement("p",null,o().createElement(E.Z,{msgId:"styleeditor.alertCustomParamsNotValid"})),o().createElement("p",null,o().createElement(m.Z,{buttons:[{text:o().createElement(E.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){b(!1),s(!0)},style:{marginRight:4}},{bsStyle:"primary",text:o().createElement(E.Z,{msgId:"styleeditor.closeCustomParamsEditor"}),onClick:function(){y(!0),b(!1),s(!1)}}]})))))},o().createElement(D,{className:"square-button-md no-border",tooltipId:"toc.thematic.goToCfg"},o().createElement(O.gG,{glyph:"cog"})))};var L=["values"];function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function F(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t,r){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B="UPDATE_STYLE",Y="UNDO_STYLE",$="REDO_STYLE",G=V({},B,function(e,t){return q({},t)}),J=(0,h.ZP)(function(e,t){return(G[t.type]||d())(e,t.payload)},{limit:20,undoType:Y,redoType:$,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),H={};function X(e){var t,r,i,a,l,u=e.code,f=e.format,d=e.layer,h=e.zoom,O=e.scales,w=e.geometryType,P=e.fonts,j=e.bands,I=e.attributes,T=e.onChange,C=e.onError,k=e.defaultStyleJSON,Z=e.config,A=e.loading,N=e.error,D=e.methods,x=e.getColors,R=e.styleUpdateTypes,z=e.debounceTime,M=e.styleService,W=e.exactMatchGeometrySymbol,V=e.enable3dStyleOptions,G=e.onUpdateNode,X=(0,b.Z)({exactMatchGeometrySymbol:W,enable3dStyleOptions:V}),Q=X.symbolizerBlock,K=X.ruleBlock,ee=_((0,n.useState)(!1),2),te=ee[0],re=ee[1],ne=_((0,n.useReducer)(J,{}),2),oe=ne[0],ie=ne[1],ae=(null==oe?void 0:oe.present)||H,le=(0,n.useRef)();le.current={style:ae};var ce=(0,n.useRef)(!1);(0,n.useEffect)(function(){ce.current&&null!==k||(0,v.getStyleParser)(f).then(function(e){return e&&u&&null===k?e.readStyle(u).then(function(e){ie({type:B,payload:(0,g.VM)(e)}),ce.current=!0}).catch(function(e){return C(q(q({},e),{},{status:400}))}):e&&u&&k?(ce.current=!0,ie({type:B,payload:k})):u&&!e?C({messageId:"styleeditor.formatNotSupported",status:400}):null})},[u,f,k]);var ue=function(e){if(re(!1),!e)return null;var t=q(q({},le.current.style),{},{rules:e});return ie({type:B,payload:t})},se=(0,n.useRef)();(0,n.useEffect)(function(){return se.current=c()(function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400,isEmpty:!0};var t=s()(e.map(function(e){return e.errorId}),function(e){return e});if(t)return{messageId:t,status:400};if(s()(e,function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)}))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n,o,i=s()(e,function(e){var t=e.symbolizers,r=void 0===t?[]:t;return s()(r,function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)})});return i?{messageId:"styleeditor.".concat(null==i||null===(r=i.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);return r?C(r):(0,v.getStyleParser)(e.format).then(function(t){return t.writeStyle((0,g.Gg)(e.style)).then(function(t){var r=(0,g.BG)(e,t),n=r.parsedCode,o=r.errorObj;o?C(o):T(n,e.style)}).catch(function(e){C(q(q({},e),{},{status:400}))})})},z),function(){se.current.cancel()}},[]),(0,n.useEffect)(function(){se.current.cancel(),se.current({format:f,style:ae})},[JSON.stringify(ae)]);var fe=N&&(N.message||N.messageId&&o().createElement(E.Z,{msgId:N.messageId}));return o().createElement(p.Z,{loading:te,toolbar:o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===((null==oe||null===(t=oe.past)||void 0===t?void 0:t.length)||0),onClick:function(){return ie({type:Y})}},{disabled:0===((null==oe||null===(r=oe.future)||void 0===r?void 0:r.length)||0),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return ie({type:$})}},{visible:["wms"].includes(null==d?void 0:d.type)&&!!s()(null===(i=le.current)||void 0===i||null===(a=i.style)||void 0===a?void 0:a.rules,function(e){return"Classification"===e.kind}),thematicCustomParams:null==d?void 0:d.thematic,onUpdate:function(e){G(d.id,"layers",{thematic:q({},e)})},Element:U},{visible:!!N,Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(S.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:o().createElement(E.Z,{msgId:"styleeditor.validationErrorTitle"}),text:o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement(E.Z,{msgId:"styleeditor.genericValidationError"})),fe?o().createElement("p",null,o().createElement(E.Z,{msgId:"styleeditor.validationError"}),": ",fe):o().createElement("p",null,o().createElement(E.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!A&&!te),Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(y.Z,{size:18}))}}]}),ruleBlock:K,symbolizerBlock:Q,config:q({geometryType:w,zoom:h,fonts:P,scales:O,bands:j,attributes:I,methods:D,getColors:x,format:f,thematicCustomParams:null==d||null===(l=d.thematic)||void 0===l?void 0:l.params},Z),rules:(null==ae?void 0:ae.rules)&&F(ae.rules).reverse(),onChange:function(e){return ue(F(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,L);re(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,i=e.styleService,a=e.styleUpdateTypes,l=void 0===a?{}:a;return new Promise(function(e){var a=r.type&&l[r.type];return e(a?a({values:t,properties:r,rules:n,layer:o,styleService:i}):n.map(function(e){return e.ruleId===r.ruleId?q(q(q({},e),t),{},{errorId:void 0}):e}))})}({values:t,properties:r,layer:d,rules:le.current.style.rules,styleService:M,styleUpdateTypes:R}).then(function(e){return ue(e)}).catch(function(){return ue()})}})}X.propTypes={code:a().string,format:a().string,layer:a().object,zoom:a().number,scales:a().array,geometryType:a().string,fonts:a().array,bands:a().array,attributes:a().array,onChange:a().func,onError:a().func,defaultStyleJSON:a().object,config:a().object,loading:a().bool,error:a().object,methods:a().array,getColors:a().func,styleUpdateTypes:a().object,debounceTime:a().number,onUpdateNode:a().func},X.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null,onUpdateNode:function(){}};const Q=X},298854:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(124852);const o=(0,r(218291).Z)()((0,n.lazy)(function(){return Promise.all([r.e(39935),r.e(89782)]).then(r.bind(r,789782))}))},931088:(e,t,r)=>{r.d(t,{T:()=>R,Z:()=>F});var n=r(701469),o=r.n(n),i=r(513218),a=r.n(i),l=r(124852),c=r.n(l),u=r(271418),s=r(171703),f=r(22222),d=r(396909),m=r(580416),y=r(378795),p=r(108954),v=r(805346),b=r(965539),g=r(532425),h=r(80717),S=r(467057),E=r(888894),O=r(800827),w=r(893222),P=r(784715),j=r(99009),I=r(24198),T=r(717621),C=r.n(T);const k=[{type:"color",active:function(e){return"atom"===e.type&&C()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement(I.xS,{color:{hex:r||t.string},onChange:function(e){return o(e.hex)}})}}];var Z=["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading","header","editors"];function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(null,arguments)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D={classificationVector:p.IW,classificationRaster:p.DG,classification:p.IW,"classification-raster":p.DG};function x(e,t,r){return e&&"raster"!==t?(0,j.u9)(e,r):[]}var U=(0,s.connect)((0,f.P1)([w.gB,w.iB,w.m2,w.p,w.aN,w.Vf,w.lC,O.up,O.Od,w.Z0],function(e,t,r,n,i,a,l,c,u,s){var f,d;return{code:e,mode:(0,j.H$)(t),bands:o()(r)&&"raster"===l&&r||[],attributes:x(r,l,null==a?void 0:a.fields),error:n.edit||null,loading:i,format:t,layer:a,geometryType:l,scales:c.map(function(e){return Math.round(e)}),zoom:u.zoom,fonts:s.fonts||[],methods:("raster"===l?null==s||null===(f=s.classificationMethods)||void 0===f?void 0:f.raster:null==s||null===(d=s.classificationMethods)||void 0===d?void 0:d.vector)||y.Z.methods,styleService:{baseUrl:null==s?void 0:s.baseUrl,isStatic:null==s?void 0:s.isStatic}}}),{onError:d.Fe.bind(null,"edit")})(E.Z);U.defaultProps={getColors:y.Z.getColors,styleUpdateTypes:D};var L={visual:U,textarea:(0,s.connect)((0,f.P1)([w.gB,w.iB,w.m2,w.p,w.aN],function(e,t,r,n,o){return{code:e,mode:(0,j.H$)(t),hintProperties:r,error:n.edit||null,loading:o}}))(S.Z)};function R(e){var t,r,n=e.code,o=e.error,i=e.canEdit,s=e.editorType,f=e.onUpdateMetadata,d=e.onChange,m=e.loading,y=e.header,p=e.editors,S=void 0===p?[]:p,E=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Z),O=(t=(0,l.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=O[0],P=O[1],j={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!n&&!o)return c().createElement("div",{style:j},c().createElement(g.Z,{size:150}));if(!i)return c().createElement("div",{style:j},c().createElement("div",null,c().createElement(u.gG,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(v.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==o?void 0:o.status))return c().createElement("div",{style:j},c().createElement("div",null,c().createElement(u.gG,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(v.Z,{msgId:"styleeditor.styleNotFound"}))));var I=S[s]||L[s]||L.textarea;return c().createElement(b.Z,{style:{position:"relative"},header:c().createElement("div",{className:"ms-style-editor-toolbar"},c().createElement("div",{className:"ms-style-editor-toolbar-left"},y),c().createElement(h.Z,{buttons:[{className:"no-border",bsSize:"xs",disabled:m,active:"textarea"===s,textId:"visual"===s?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return m?null:"visual"===s?f({editorType:"textarea"}):P(!0)}}]}))},I&&c().createElement(I,A({},E,{code:n,error:o,onChange:function(e,t){d(e),a()(t)&&f({styleJSON:JSON.stringify(t)})}})),w&&c().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},c().createElement(u.bZ,{bsStyle:"warning",style:{textAlign:"center"}},c().createElement("p",{style:{padding:8}},c().createElement(v.Z,{msgId:"styleeditor.alertForceTranslate"})),c().createElement("p",null,c().createElement(h.Z,{buttons:[{text:c().createElement(v.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return P(!1)},style:{marginRight:4}},{bsStyle:"primary",text:c().createElement(v.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){f({editorType:"visual"}),P(!1)}}]})))))}R.defaultProps={inlineWidgets:k};const F=(0,s.connect)((0,P.y1)(w.gB,w.p,w.z_,function(e){var t=(0,w.WW)(e);return null==t?void 0:t.editorType},function(e){try{var t=(0,w.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}},w.aN,function(e,t,r,n,o,i){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:i}}),{onUpdateMetadata:d.bB,onChange:d.p2,onUpdateNode:m.tV})(R)},750578:(e,t,r)=>{r.d(t,{m2:()=>X,tM:()=>ie,lC:()=>ne});var n=r(124852),o=r.n(n),i=r(171703),a=r(867076),l=r(22222),c=r(460604),u=r(591884),s=r(580416),f=r(396909),d=r(805346),m=r(965539),y=r(982030),p=r(173014),v=r(906724),b=r(532425),g=r(271418),h=r(638064),S=r(993451),E=r(815135),O=r(592778),w=r(283958),P=r(428913);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=(0,S.Z)("filterPlaceholder")(O.Z),Z=(0,E.Z)(g.gG),A=(0,y.Z)(function(e){return 0===e.items.length},{title:o().createElement(d.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.Z);var N=r(91175),D=r.n(N),x=r(615402);const U=function(e){var t=e.disabled,r=e.selected,n=e.title,i=e.preview,a=e.previewSrc,l=e.onClick,c=void 0===l?function(){}:l;return o().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return c()}},(i||a)&&o().createElement("div",{className:"ms-preview"},i||a&&o().createElement("img",{src:a})),o().createElement("small",null,n))};var L=r(399534),R=r(694745);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){M(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t,r){return(t=function(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,S.Z)("filterPlaceholder")(O.Z),q=(0,S.Z)("placeholder")(g.NI),V=(0,y.Z)(function(e){return 0===e.items.length},{title:o().createElement(d.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.Z),B=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};var Y=r(80717);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G=r(893222),J=r(675110),H=r(99009),X=r(931088).Z,Q=(0,H.YD)(),K=(0,y.Z)(function(e){return!e.canEdit},{glyph:"exclamation-mark",title:o().createElement(d.Z,{msgId:"styleeditor.noPermission"})}),ee=function(e){return(0,p.Z)(e,{size:150,style:{margin:"auto"}},function(e){return o().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},o().createElement(b.Z,e))})},te=(0,a.compose)((0,a.defaultProps)({templates:Q}),(0,i.connect)((0,l.P1)([G.Mc,G.w_,G.lC,G.z_,G.Z0,G.aN],function(e,t,r,n){var o=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).formats;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:void 0===o?[]:o,loading:arguments.length>5?arguments[5]:void 0}}),{onSelect:f.FU,onClose:f.cu.bind(null,!1),onSave:f.wj}),K,ee(function(e){return!e.geometryType}),(0,a.withState)("filterText","onFilter",""),(0,a.withState)("styleSettings","onUpdate",{}))(function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,i=void 0===n?{}:n,a=e.geometryType,l=void 0===a?"":a,c=e.templates,u=void 0===c?[]:c,s=e.filterText,f=e.availableFormats,y=void 0===f?["sld","css"]:f,p=e.formFields,v=void 0===p?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:o().createElement(d.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:o().createElement(d.Z,{msgId:"styleeditor.abstractSettings"})}]:p,h=e.onFilter,S=void 0===h?function(){}:h,E=e.onSelect,O=void 0===E?function(){}:E,P=e.onClose,j=void 0===P?function(){}:P,I=e.onSave,T=void 0===I?function(){}:I,C=e.onUpdate,k=void 0===C?function(){}:C,Z=e.loading;return o().createElement(m.Z,{header:o().createElement("div",null,o().createElement(W,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:s,onFilter:S}),o().createElement("div",{className:"text-center"},o().createElement("small",null,Z?o().createElement(b.Z,{size:15,style:{display:"inline-block"}}):o().createElement(d.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},o().createElement(V,{colProps:{},cardComponent:U,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;O({code:t,templateId:r,format:n||"css"}),k(z(z({},i),{},{title:D()(u.filter(function(e){return e.styleId===r}).map(function(e){return e.title}))}))},items:u.filter(function(e){var t=e.title;return!s||s&&-1!==t.indexOf(s)}).filter(function(e){var t=e.types,r=e.format;return!t||D()(t.filter(function(e){return e===l}))&&-1!==y.indexOf(r)}).map(function(e){var r;return z(z({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?o().createElement(w.Z,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:Z})})}),o().createElement(L.Z,null,o().createElement(R.Z,{show:!!r,fitContent:!0,title:o().createElement(d.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return j()},buttons:[{text:o().createElement(d.Z,{msgId:"save"}),bsStyle:"primary",disabled:!B(i),onClick:function(){return T(i)}}]},o().createElement(g.l0,null,o().createElement(g.cw,{controlId:"styleTitle",validationState:!B(i)&&"error"},v.map(function(e){var t=e.title,r=e.placeholder,n=e.key;return o().createElement("span",{key:n},o().createElement(g.J$,null,t),o().createElement(q,{type:"text",defaultValue:i[n],placeholder:r,onChange:function(e){return k(z(z({},i),{},M({},n,e.target.value)))}}))})),!B(i)&&o().createElement(g.bZ,{style:{margin:0},bsStyle:"danger"},o().createElement(x.Z,{msgId:"styleeditor.titleRequired"}))))))}),re=(0,a.compose)((0,i.connect)((0,l.P1)([G.ex,G.ov,J.Iz],function(e,t,r){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles,layer:r}}),{onSelect:s.Xy}),(0,a.withState)("filterText","onFilter",""),(0,v.Z)(function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r},function(){return o().createElement(te,null)},{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))(function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,i=e.availableStyles,a=void 0===i?[]:i,l=e.onSelect,c=void 0===l?function(){}:l,u=e.layer,s=void 0===u?{}:u,f=e.formatColors,d=void 0===f?{sld:"#33ffaa",css:"#ffaa33"}:f,y=e.filterText,p=void 0===y?"":y,v=e.onFilter,b=void 0===v?function(){}:v;return o().createElement(m.Z,{className:"ms-style-editor-list",header:o().createElement(k,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:p,onFilter:b})},o().createElement(A,{size:"sm",onItemClick:function(e){var t=e.name,r=(0,P.resetLayerLegendFilter)(s,"style",t);c(r?{layerFilter:r,style:t}:{style:t},!0)},items:a.filter(function(e){var t,r,n=e.name,o=void 0===n?"":n,i=e.title,a=void 0===i?"":i,l=e._abstract,c=void 0===l?"":l,u=e.metadata,s=void 0===u?{}:u;return o.toLowerCase().includes(p.toLowerCase())||(null==s||null===(t=s.title)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null==s||null===(r=s.description)||void 0===r?void 0:r.toLowerCase().includes(p.toLowerCase()))||a.toLowerCase().includes(p.toLowerCase())||c.toLowerCase().includes(p.toLowerCase())}).map(function(e){var i,a,l;return T(T({},e),{},{title:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.title)||e.label||e.title||e.name,description:(null==e||null===(a=e.metadata)||void 0===a?void 0:a.description)||e._abstract,selected:r===e.name,preview:e.format&&o().createElement(w.Z,{backgroundColor:"#333333",texts:[{text:(l=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[l]||l||"").toUpperCase(),fill:d[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||o().createElement(Z,{glyph:"geoserver"}),tools:t&&n===e.name?o().createElement(Z,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})})}))}),ne=(0,a.compose)((0,a.withState)("showModal","onShowModal"),(0,i.connect)((0,l.P1)([G.ex,G.Mc,G.p,G.QW,G.gB,G.aN,G.i7,G.z_,G.ov,G.Z0,G.Ed,J.Iz],function(e,t,r,n,o,i,a,l,c){var u=c.defaultStyle,s=(arguments.length>9&&void 0!==arguments[9]?arguments[9]:{}).formats,f=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,layerDefaultStyleName:u,selectedStyle:u===a?"":a,editEnabled:l,disableCodeEditing:-1===(void 0===s?["sld"]:s).indexOf(f)}}),{onSelectStyle:f.Nf.bind(null,"template"),onEditStyle:f.Nf.bind(null,"edit"),onBack:f.Nf.bind(null,""),onReset:c.B1.bind(null,H.s1,[{}]),onAdd:f.cu.bind(null,!0),onUpdate:f.Lc,onDelete:f.WQ,onSetDefault:f.WB}))(function(e){var t,r=e.status,n=e.buttons,i=void 0===n?[]:n,a=e.templateId,l=e.error,c=e.isCodeChanged,u=e.showModal,s=e.onShowModal,f=e.loading,m=e.selectedStyle,y=e.layerDefaultStyleName,p=e.editEnabled,v=e.enableSetDefaultStyle,b=e.defaultStyles,h=void 0===b?["generic","point","line","polygon","raster"]:b,S=e.onBack,E=void 0===S?function(){}:S,O=e.onAdd,w=void 0===O?function(){}:O,P=e.onReset,j=void 0===P?function(){}:P,I=e.onDelete,T=void 0===I?function(){}:I,C=e.onSelectStyle,k=void 0===C?function(){}:C,Z=e.onEditStyle,A=void 0===Z?function(){}:Z,N=e.onUpdate,D=void 0===N?function(){}:N,x=e.onSetDefault,U=void 0===x?function(){}:x,F=e.disableCodeEditing;return o().createElement("div",null,o().createElement(Y.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!f,onClick:function(){"edit"===r&&c?s({title:o().createElement(d.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:o().createElement(g.bZ,{bsStyle:"warning",style:{margin:0}},o().createElement(d.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:o().createElement(d.Z,{msgId:"close"}),bsStyle:"primary",onClick:function(){s(null),E(),j()}}]}):(E(),j())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!p),disabled:!!f,onClick:function(){return k()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!p),disabled:!!f||-1!==h.indexOf(m)||!m&&-1!==h.indexOf(y)||F,onClick:function(){return A()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(l&&l.edit&&l.edit.status)||!!f||-1!==h.indexOf(m),visible:!("edit"!==r||!p),onClick:function(){return D()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!a||!p),disabled:!!f,onClick:function(){return w()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!f||-1!==h.indexOf(m)||!m,visible:!(r||!p),onClick:function(){s({title:o().createElement(d.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:o().createElement(g.bZ,{bsStyle:"warning",style:{margin:0}},o().createElement(d.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:o().createElement(d.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){s(null),T(m)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!f||-1!==h.indexOf(m)||!m,visible:!(!v||r||!p),onClick:function(){return U()}}].concat((t=r?[]:i,function(e){if(Array.isArray(e))return $(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),o().createElement(L.Z,null,o().createElement(R.Z,{show:u,fitContent:!0,title:u&&u.title,onClose:function(){return s(null)},buttons:u&&u.buttons},u&&u.message)))}),oe=(0,a.compose)((0,i.connect)((0,l.P1)([G.Vf],function(e){return{layer:e}}),{onInit:u.k}),(0,a.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),ee(function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading}))(function(){return o().createElement(m.Z,{className:"ms-style-editor-container",footer:o().createElement("div",{style:{height:25}})},o().createElement(re,{readOnly:!0}))}),ie=(0,a.branch)(function(e){return e.readOnly},function(){return oe})(re)},893222:(e,t,r)=>{r.d(t,{gc:()=>g,Mc:()=>h,ex:()=>S,p:()=>E,aN:()=>O,iB:()=>w,j5:()=>P,gB:()=>j,QW:()=>I,w_:()=>T,ji:()=>C,Z0:()=>k,Vf:()=>Z,z_:()=>A,lC:()=>N,m2:()=>D,i7:()=>x,Ed:()=>U,ov:()=>L,WW:()=>R});var n=r(227361),o=r.n(n),i=r(91175),a=r.n(i),l=r(545578),c=r.n(l),u=(r(313311),r(747037)),s=r.n(u),f=r(675110),d=r(99009),m=r(274621);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){return o()(e,"styleeditor.temporaryId")},h=function(e){return o()(e,"styleeditor.templateId")},S=function(e){return o()(e,"styleeditor.status")},E=function(e){return o()(e,"styleeditor.error")||{}},O=function(e){return o()(e,"styleeditor.loading")},w=function(e){return o()(e,"styleeditor.format")||"css"},P=function(e){return o()(e,"styleeditor.languageVersion")||{}},j=function(e){return o()(e,"styleeditor.code")},I=function(e){return o()(e,"styleeditor.initialCode")||""},T=function(e){return o()(e,"styleeditor.addStyle")||""},C=function(e){return o()(e,"styleeditor.enabled")},k=function(e){return o()(e,"styleeditor.service")||{}},Z=function(e){var t=(0,f.jN)(e);return v(v({},(0,f.Iz)(e)||{}),t&&t.options||{})},A=function(e){var t=function(e){return o()(e,"styleeditor.editingAllowedRoles",[])}(e),r=function(e){return o()(e,"styleeditor.editingAllowedGroups",[])}(e),n=(0,d.uW)(Z(e),k(e));return(0,m.tv)({allowedRoles:t,allowedGroups:r})(e)&&n},N=function(e){var t=Z(e),r=(0,d.Py)(t).geometryType;return void 0===r?"vector":r},D=function(e){var t=Z(e),r=(0,d.Py)(t).properties;return void 0===r?{}:r},x=function(e){var t=Z(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},U=function(e){var t=(Z(e)||{}).availableStyles,r=void 0===t?[]:t,n=x(e);return a()(r.filter(function(e){return e.name===n}).map(function(e){return e.format}))},L=function(e){var t=Z(e),r=t.availableStyles||[],n=(a()(r)||{}).name,o=t.style||t&&!t.style&&n;return{availableStyles:c()(r.map(function(e){var t=e&&e.title&&s()(e.title)&&e.title.split(d.I$),r=t&&t[0]||e.name;return v(v({},e),{},{label:r})}),"name"),defaultStyle:n,enabledStyle:o}},R=function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata}},129389:(e,t,r)=>{r.d(t,{S:()=>p,G:()=>v});var n=r(944908),o=r.n(n),i=r(65792),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m={red:["#000","#f00"],green:["#000","#008000","#0f0"],blue:["#000","#00f"],gray:["#333","#eee"],jet:["#00f","#ff0","#f00"],random:["#57663d","#408064","#3d539a","#af36b3","#cdff29"]},y=o()(Object.keys(a().brewer).map(function(e){return e.toLocaleLowerCase()})).map(function(e){return{name:e,colors:e}}),p=[].concat(f(Object.keys(m).map(function(e){return{name:e,colors:m[e]}})),f(y)).map(function(e){return u(u({},e),{},{label:"global.colors.".concat(e.name)})}),v=function(e){var t;return null!==(t=m[e])&&void 0!==t?t:e}},172704:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(923645),o=r.n(n)()(function(e){return e[1]});o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=o}}]);